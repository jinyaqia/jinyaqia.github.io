[{"url":"/flink/remote-debug/"},{"title":"clickhouse源码构建","url":"/clickhouse/build/","content":"\n# clickhouse源码构建\n\n## 概述\n- 官方文档：https://clickhouse.com/docs/en/development/build/\n- 源码分支 21.12\n- 环境依赖\n  - ubuntu: 16.04\n  - cmake: 3.20.6\n  - clang: clang-13\n\n<!-- more -->\n\n## 步骤\n\n- 准备源码: \n\n  clickhouse官方库为：https://github.com/ClickHouse/ClickHouse\n\n  `git clone -b 21.12 https://github.com/ClickHouse/ClickHouse.git`，可切换到其他具体的分支\n\n- 执行git submodule更新相关的依赖包，依赖包会下载到``ClickHouse/contrib`下\n\n  ```shell\n  git submodule sync\n  # 初始化并下载相关依赖\n  git submodule update --init --recursive \n  ```\n\n- 编译环境下载相关的依赖，如cmake，clang等\n\n- 将下面脚本`build.sh`放在ClickhouseHouse目录下，执行`bash build.sh`\n\n  ```\n  mkdir build-clang\n  cd build-clang\n  \n  je=1\n  tc=1\n  BT=Release\n  #BT=Debug\n  \n  export TMPDIR=/data/tmp\n  /opt/cmake-3.20.6-linux-x86_64/bin/cmake .. -DENABLE_JEMALLOC=${je}  -DENABLE_TCMALLOC=${tc} -DCMAKE_EXPORT_COMPILE_COMMANDS=1  -DENABLE_TESTS=OFF  -DCMAKE_BUILD_TYPE=${BT} -DENABLE_RDKAFKA=0 -DCMAKE_CXX_COMPILER=`which clang++-13` -DCMAKE_C_COMPILER=`which clang-13`\n  \n  if [ $? -ne 0 ]; then\n    echo \"cmake faild\"\n    exit 1\n  fi\n  \n  \n  ninja -j20\n  \n  \n  if [ $? -ne 0 ]; then\n    echo \"faild\"\n    exit 1\n  fi\n  ```\n\n- 编译完可执行文件在`build-clang/programs下`\n\n  ```\n  $ tree -L 1 programs\n  programs\n  ├── bash-completion\n  ├── benchmark\n  ├── clickhouse\n  ├── clickhouse-benchmark -> clickhouse\n  ├── clickhouse-client -> clickhouse\n  ├── clickhouse-compressor -> clickhouse\n  ├── clickhouse-copier -> clickhouse\n  ├── clickhouse-extract-from-config -> clickhouse\n  ├── clickhouse-format -> clickhouse\n  ├── clickhouse-git-import -> clickhouse\n  ├── clickhouse-keeper -> clickhouse\n  ├── clickhouse-keeper-converter -> clickhouse\n  ├── clickhouse-library-bridge\n  ├── clickhouse-local -> clickhouse\n  ├── clickhouse-obfuscator -> clickhouse\n  ├── clickhouse-odbc-bridge\n  ├── clickhouse-server -> clickhouse\n  ├── clickhouse-static-files-disk-uploader -> clickhouse\n  ├── client\n  ├── CMakeFiles\n  ├── cmake_install.cmake\n  ├── compressor\n  ├── copier\n  ├── CTestTestfile.cmake\n  ├── extract-from-config\n  ├── format\n  ├── git-import\n  ├── install\n  ├── keeper\n  ├── keeper-converter\n  ├── library-bridge\n  ├── local\n  ├── obfuscator\n  ├── odbc-bridge\n  ├── server\n  └── static-files-disk-uploader\n  ```\n\n## 碰到的问题\n\n各种包依赖，这个时候看报错日志，把相关依赖解决就行","tags":["clickhouse"],"categories":["clickhouse"]},{"title":"ck集群运维注意事项","url":"/clickhouse/dev_notify/","content":"\n# ck集群运维注意事项\n\n<!-- more -->\n\n1. alter时，只需要在一个分片上执行即可\n2. 遇到zookeeper session expire删除不了表，可以先detach再attach\n3. ck mutation可以保证异步操作不会删除新写入的数据，可以通过system.mutations查看进度\n4. 多磁盘空出两块盘，单独部署zk,并且将zk的log和snapshot分开\n5. 遇到too many parts时，需要控制写入速度。sinker看看是不是负载没有好,可以 alter table t_dw_huya_page_pv_ck on cluster single modify setting parts_to_throw_insert=600 增大抛异常的值，但是本质上还是后台merge跟不上插入，可以增大io性能，或减少分区\n6. 没有副本的cluster,要设置 <internal_replication>false</internal_replication>\n7. 修改```<background_pool_size>64</background_pool_size> \n      <background_schedule_pool_size>64</background_schedule_pool_size>\n      <background_move_pool_size>32</background_move_pool_size>```调大后台执行线程数\n8. 修改```<max_partitions_per_insert_block>1000</max_partitions_per_insert_block>``` 解决 DB::Exception: Too many partitions for single INSERT block (more than 100)的问题\n9. 修改```<max_replicated_merges_in_queue>200</max_replicated_merges_in_queue>\n        <max_replicated_mutations_in_queue>200</max_replicated_mutations_in_queue>```\n解决  Number of queued merges (36) and part mutations (0) is greater than max_replicated_merges_in_queue (16)  的错误\n11. 查看集群事件和指标\nSELECT \n    event_time,\n    ProfileEvent_InsertQuery,\n    runningDifference(ProfileEvent_InsertQuery) ins_per_sec\nFROM system.metric_log\nWHERE event_date = today()\nORDER BY event_time DESC\nLIMIT 50;\nSELECT value\nFROM system.events\nWHERE event LIKE 'InsertQuery'\n\n12. 查看多少mutation没执行```select table,command,mutation_id,create_time,is_done,latest_fail_time,latest_fail_reason,parts_to_do from system.mutations where table= 't_oexp_precomputation_all_metric' order by create_time limit  10```\n13. 碰到 The local set of parts of table default.dwd_test doesn’t look like the set of parts in ZooKeeper 的问题，一般都是手动操作了表的ddl导致不同步，可以把metadata下的这个表先移除，让server可以正常启动，然后再重建表，数据会自动同步\n14.  select count() as c ,database||'.'||table from system.replication_queue where type='MUTATE_PART'  group by database,table order by c\n15.  select count() as c ,database||'.'||table from system.mutations where is_done=0 group by database,table order by c\n16.  遇到卡住的时候，可以先把卡住的表detach，然后批次attach回来","tags":["运维"],"categories":["clickhouse"]},{"title":"clickhouse集群2副本安装","url":"/clickhouse/install/","content":"\n\n\n# clickhouse集群2副本安装\n\n## 使用4台机器\n\n```\n节点1  10.64.148.133\n节点2  10.64.148.134\n节点3  10.64.148.135\n节点4  10.64.138.24\n```\n<!-- more -->\n## 配置路径\n\n```\nroot@ip-10-64-138-24:/data/clickhouse# tree\n.\n├── bin\n│   ├── clickhouse\n│   ├── clickhouse-client -> /data/clickhouse/bin/clickhouse\n│   └── clickhouse-server -> /data/clickhouse/bin/clickhouse\n├── conf\n│   ├── config.d\n│   │   ├── config.base.xml\n│   │   ├── config.disks.xml\n│   │   ├── config.macros.xml\n│   │   └── config.remote_servers.xml\n│   ├── config.xml\n│   ├── env.ini\n│   ├── users.d\n│   │   └── users.huya.xml\n│   └── users.xml\n├── format_schemas\n├── log\n│   ├── clickhouse-server.err.log\n│   ├── clickhouse-server.log\n│   ├── stderr.log\n│   └── stdout.log\n├── start_ch.sh\n├── tmp\n└── user_files\n```\n\n- `/data/clickhouse`为安装目录\n\n- `bin/`下为自行编译的clickhouse二进制文件\n\n- `conf/`下为ck的配置, `config.xml`为启动进程时默认加载的，\n  - `config.d/*.xml`为具体的子配置，具体包括\n    - `config.base.xml`: 基础配置\n    - `config.disks.xml`: 磁盘和存储策略配置\n    - `config.macros.xml`:宏定义配置\n    - `config.remote_servers.xml`: 集群配置\n  - `env.ini`： 环境配置\n- `users.d`: 存储用户配置，访问权限之类\n- `start_ch.sh`:启动脚本\n\n对应每个文件如下：\n\n### 默认启动配置 /data/clickhouse/conf/config.xml\n\n```\n<?xml version=\"1.0\"?>\n<!--\n  NOTE: User and query level settings are set up in \"users.xml\" file.\n-->\n<yandex>\n    <logger>\n        <!-- Possible levels: https://github.com/pocoproject/poco/blob/poco-1.9.4-release/Foundation/include/Poco/Logger.h#L105 -->\n        <level>trace</level>\n        <log>/data/clickhouse/log/clickhouse-server.log</log>\n        <errorlog>/data/clickhouse/log/clickhouse-server.err.log</errorlog>\n        <size>1000M</size>\n        <count>10</count>\n        <!-- <console>1</console> --> <!-- Default behavior is autodetection (log to console if not daemon mode and is tty) -->\n    </logger>\n    <!--display_name>production</display_name--> <!-- It is the name that will be shown in the client -->\n    <http_port>8123</http_port>\n    <tcp_port>9000</tcp_port>\n    <mysql_port>9004</mysql_port>\n    <!-- For HTTPS and SSL over native protocol. -->\n    <!--\n    <https_port>8443</https_port>\n    <tcp_port_secure>9440</tcp_port_secure>\n    -->\n\n    <!-- Used with https_port and tcp_port_secure. Full ssl options list: https://github.com/ClickHouse-Extras/poco/blob/master/NetSSL_OpenSSL/include/Poco/Net/SSLManager.h#L71 -->\n    <openSSL>\n        <server> <!-- Used for https server AND secure tcp port -->\n            <!-- openssl req -subj \"/CN=localhost\" -new -newkey rsa:2048 -days 365 -nodes -x509 -keyout /etc/clickhouse-server/server.key -out /etc/clickhouse-server/server.crt -->\n            <certificateFile>/etc/clickhouse-server/server.crt</certificateFile>\n            <privateKeyFile>/etc/clickhouse-server/server.key</privateKeyFile>\n            <!-- openssl dhparam -out /etc/clickhouse-server/dhparam.pem 4096 -->\n            <dhParamsFile>/etc/clickhouse-server/dhparam.pem</dhParamsFile>\n            <verificationMode>none</verificationMode>\n            <loadDefaultCAFile>true</loadDefaultCAFile>\n            <cacheSessions>true</cacheSessions>\n            <disableProtocols>sslv2,sslv3</disableProtocols>\n            <preferServerCiphers>true</preferServerCiphers>\n        </server>\n\n        <client> <!-- Used for connecting to https dictionary source -->\n            <loadDefaultCAFile>true</loadDefaultCAFile>\n            <cacheSessions>true</cacheSessions>\n            <disableProtocols>sslv2,sslv3</disableProtocols>\n            <preferServerCiphers>true</preferServerCiphers>\n            <!-- Use for self-signed: <verificationMode>none</verificationMode> -->\n            <invalidCertificateHandler>\n                <!-- Use for self-signed: <name>AcceptCertificateHandler</name> -->\n                <name>RejectCertificateHandler</name>\n            </invalidCertificateHandler>\n        </client>\n    </openSSL>\n\n    <!-- Default root page on http[s] server. For example load UI from https://tabix.io/ when opening http://localhost:8123 -->\n    <!--\n    <http_server_default_response><![CDATA[<html ng-app=\"SMI2\"><head><base href=\"http://ui.tabix.io/\"></head><body><div ui-view=\"\" class=\"content-ui\"></div><script src=\"http://loader.tabix.io/master.js\"></script></body></html>]]></http_server_default_response>\n    -->\n\n    <!-- Port for communication between replicas. Used for data exchange. -->\n    <interserver_http_port>9009</interserver_http_port>\n\n    <!-- Hostname that is used by other replicas to request this server.\n         If not specified, than it is determined analoguous to 'hostname -f' command.\n         This setting could be used to switch replication to another network interface.\n      -->\n    <!--\n    <interserver_http_host>example.yandex.ru</interserver_http_host>\n    -->\n\n    <!-- Listen specified host. use :: (wildcard IPv6 address), if you want to accept connections both with IPv4 and IPv6 from everywhere. -->\n    <!-- <listen_host>::</listen_host> -->\n    <!-- Same for hosts with disabled ipv6: -->\n    <!-- <listen_host>0.0.0.0</listen_host> -->\n\n    <!-- Default values - try listen localhost on ipv4 and ipv6: -->\n\n    <listen_host>0.0.0.0</listen_host>\n    <!-- <listen_host>127.0.0.1</listen_host> -->\n\n    <!-- Don't exit if ipv6 or ipv4 unavailable, but listen_host with this protocol specified -->\n    <!-- <listen_try>0</listen_try> -->\n\n    <!-- Allow listen on same address:port -->\n    <!-- <listen_reuse_port>0</listen_reuse_port> -->\n\n    <!-- <listen_backlog>64</listen_backlog> -->\n\n    <max_connections>4096</max_connections>\n    <keep_alive_timeout>3</keep_alive_timeout>\n\n    <!-- Maximum number of concurrent queries. -->\n    <max_concurrent_queries>500</max_concurrent_queries>\n\n    <!-- Set limit on number of open files (default: maximum). This setting makes sense on Mac OS X because getrlimit() fails to retrieve\n         correct maximum value. -->\n    <!-- <max_open_files>262144</max_open_files> -->\n\n    <!-- Size of cache of uncompressed blocks of data, used in tables of MergeTree family.\n         In bytes. Cache is single for server. Memory is allocated only on demand.\n         Cache is used when 'use_uncompressed_cache' user setting turned on (off by default).\n         Uncompressed cache is advantageous only for very short queries and in rare cases.\n      -->\n    <uncompressed_cache_size>8589934592</uncompressed_cache_size>\n\n    <!-- Approximate size of mark cache, used in tables of MergeTree family.\n         In bytes. Cache is single for server. Memory is allocated only on demand.\n         You should not lower this value.\n      -->\n    <mark_cache_size>5368709120</mark_cache_size>\n\n\n    <!-- Path to data directory, with trailing slash. -->\n    <path>/data/clickhouse/</path>\n\n    <!-- Path to temporary data for processing hard queries. -->\n    <tmp_path>/data/clickhouse/tmp/</tmp_path>\n\n    <!-- Policy from the <storage_configuration> for the temporary files.\n         If not set <tmp_path> is used, otherwise <tmp_path> is ignored.\n\n         Notes:\n         - move_factor              is ignored\n         - keep_free_space_bytes    is ignored\n         - max_data_part_size_bytes is ignored\n         - you must have exactly one volume in that policy\n    -->\n    <!-- <tmp_policy>tmp</tmp_policy> -->\n\n    <!-- Directory with user provided files that are accessible by 'file' table function. -->\n    <user_files_path>/data/clickhouse/user_files/</user_files_path>\n\n    <!-- Path to configuration file with users, access rights, profiles of settings, quotas. -->\n    <users_config>users.xml</users_config>\n\n    <!-- Default profile of settings. -->\n    <default_profile>default</default_profile>\n\n    <!-- System profile of settings. This settings are used by internal processes (Buffer storage, Distibuted DDL worker and so on). -->\n    <!-- <system_profile>default</system_profile> -->\n\n    <!-- Default database. -->\n    <default_database>default</default_database>\n\n    <!-- Server time zone could be set here.\n\n         Time zone is used when converting between String and DateTime types,\n          when printing DateTime in text formats and parsing DateTime from text,\n          it is used in date and time related functions, if specific time zone was not passed as an argument.\n\n         Time zone is specified as identifier from IANA time zone database, like UTC or Africa/Abidjan.\n         If not specified, system time zone at server startup is used.\n\n         Please note, that server could display time zone alias instead of specified name.\n         Example: W-SU is an alias for Europe/Moscow and Zulu is an alias for UTC.\n    -->\n    <timezone>Asia/Shanghai</timezone>\n\n    <!-- You can specify umask here (see \"man umask\"). Server will apply it on startup.\n         Number is always parsed as octal. Default umask is 027 (other users cannot read logs, data files, etc; group can only read).\n    -->\n    <!-- <umask>022</umask> -->\n\n    <!-- Perform mlockall after startup to lower first queries latency\n          and to prevent clickhouse executable from being paged out under high IO load.\n         Enabling this option is recommended but will lead to increased startup time for up to a few seconds.\n    -->\n    <mlock_executable>false</mlock_executable>\n    <!-- Configuration of clusters that could be used in Distributed tables.\n         https://clickhouse.tech/docs/en/operations/table_engines/distributed/\n      -->\n    <remote_servers incl=\"clickhouse_remote_servers\" >\n        <!-- Test only shard config for testing distributed storage -->\n    </remote_servers>\n\n    <!-- The list of hosts allowed to use in URL-related storage engines and table functions.\n        If this section is not present in configuration, all hosts are allowed.\n    -->\n    <remote_url_allow_hosts>\n        <!-- Host should be specified exactly as in URL. The name is checked before DNS resolution.\n            Example: \"yandex.ru\", \"yandex.ru.\" and \"www.yandex.ru\" are different hosts.\n                    If port is explicitly specified in URL, the host:port is checked as a whole.\n                    If host specified here without port, any port with this host allowed.\n                    \"yandex.ru\" -> \"yandex.ru:443\", \"yandex.ru:80\" etc. is allowed, but \"yandex.ru:80\" -> only \"yandex.ru:80\" is allowed.\n            If the host is specified as IP address, it is checked as specified in URL. Example: \"[2a02:6b8:a::a]\".\n            If there are redirects and support for redirects is enabled, every redirect (the Location field) is checked.\n        -->\n\n        <!-- Regular expression can be specified. RE2 engine is used for regexps.\n            Regexps are not aligned: don't forget to add ^ and $. Also don't forget to escape dot (.) metacharacter\n            (forgetting to do so is a common source of error).\n        -->\n    </remote_url_allow_hosts>\n\n    <!-- If element has 'incl' attribute, then for it's value will be used corresponding substitution from another file.\n         By default, path to file with substitutions is /etc/metrika.xml. It could be changed in config in 'include_from' element.\n         Values for substitutions are specified in /yandex/name_of_substitution elements in that file.\n      -->\n\n    <!-- ZooKeeper is used to store metadata about replicas, when using Replicated tables.\n         Optional. If you don't use replicated tables, you could omit that.\n\n         See https://clickhouse.yandex/docs/en/table_engines/replication/\n      -->\n\n    <zookeeper incl=\"zookeeper-servers\" optional=\"true\"/>\n\n    <!-- Substitutions for parameters of replicated tables.\n          Optional. If you don't use replicated tables, you could omit that.\n\n         See https://clickhouse.yandex/docs/en/table_engines/replication/#creating-replicated-tables\n      -->\n    <macros incl=\"macros\" optional=\"true\" />\n\n\n    <!-- Reloading interval for embedded dictionaries, in seconds. Default: 3600. -->\n    <builtin_dictionaries_reload_interval>3600</builtin_dictionaries_reload_interval>\n\n\n    <!-- Maximum session timeout, in seconds. Default: 3600. -->\n    <max_session_timeout>3600</max_session_timeout>\n\n    <!-- Default session timeout, in seconds. Default: 60. -->\n    <default_session_timeout>60</default_session_timeout>\n\n    <!-- Sending data to Graphite for monitoring. Several sections can be defined. -->\n    <!--\n        interval - send every X second\n        root_path - prefix for keys\n        hostname_in_path - append hostname to root_path (default = true)\n        metrics - send data from table system.metrics\n        events - send data from table system.events\n        asynchronous_metrics - send data from table system.asynchronous_metrics\n    -->\n    <!--\n    <graphite>\n        <host>localhost</host>\n        <port>42000</port>\n        <timeout>0.1</timeout>\n        <interval>60</interval>\n        <root_path>one_min</root_path>\n        <hostname_in_path>true</hostname_in_path>\n\n        <metrics>true</metrics>\n        <events>true</events>\n        <events_cumulative>false</events_cumulative>\n        <asynchronous_metrics>true</asynchronous_metrics>\n    </graphite>\n    <graphite>\n        <host>localhost</host>\n        <port>42000</port>\n        <timeout>0.1</timeout>\n        <interval>1</interval>\n        <root_path>one_sec</root_path>\n\n        <metrics>true</metrics>\n        <events>true</events>\n        <events_cumulative>false</events_cumulative>\n        <asynchronous_metrics>false</asynchronous_metrics>\n    </graphite>\n    -->\n\n    <!-- Serve endpoint fot Prometheus monitoring. -->\n    <!--\n        endpoint - mertics path (relative to root, statring with \"/\")\n        port - port to setup server. If not defined or 0 than http_port used\n        metrics - send data from table system.metrics\n        events - send data from table system.events\n        asynchronous_metrics - send data from table system.asynchronous_metrics\n    -->\n    <!--\n    <prometheus>\n        <endpoint>/metrics</endpoint>\n        <port>9363</port>\n\n        <metrics>true</metrics>\n        <events>true</events>\n        <asynchronous_metrics>true</asynchronous_metrics>\n    </prometheus>\n    -->\n\n    <!-- Query log. Used only for queries with setting log_queries = 1. -->\n    <query_log>\n        <!-- What table to insert data. If table is not exist, it will be created.\n             When query log structure is changed after system update,\n              then old table will be renamed and new table will be created automatically.\n        -->\n        <database>system</database>\n        <table>query_log</table>\n        <!--\n            PARTITION BY expr https://clickhouse.yandex/docs/en/table_engines/custom_partitioning_key/\n            Example:\n                event_date\n                toMonday(event_date)\n                toYYYYMM(event_date)\n                toStartOfHour(event_time)\n        -->\n        <partition_by>toYYYYMMDD(event_date)</partition_by>\n\n        <!-- Instead of partition_by, you can provide full engine expression (starting with ENGINE = ) with parameters,\n             Example: <engine>ENGINE = MergeTree PARTITION BY toYYYYMM(event_date) ORDER BY (event_date, event_time) SETTINGS index_granularity = 1024</engine>\n          -->\n\n        <!-- Interval of flushing data. -->\n        <flush_interval_milliseconds>7500</flush_interval_milliseconds>\n    </query_log>\n\n    <!-- Trace log. Stores stack traces collected by query profilers.\n         See query_profiler_real_time_period_ns and query_profiler_cpu_time_period_ns settings. -->\n    <trace_log>\n        <database>system</database>\n        <table>trace_log</table>\n\n        <partition_by>toYYYYMMDD(event_date)</partition_by>\n        <flush_interval_milliseconds>7500</flush_interval_milliseconds>\n    </trace_log>\n\n    <!-- Query thread log. Has information about all threads participated in query execution.\n         Used only for queries with setting log_query_threads = 1. -->\n    <query_thread_log>\n        <database>system</database>\n        <table>query_thread_log</table>\n        <partition_by>toYYYYMM(event_date)</partition_by>\n        <flush_interval_milliseconds>7500</flush_interval_milliseconds>\n    </query_thread_log>\n\n    <!-- Uncomment if use part log.\n         Part log contains information about all actions with parts in MergeTree tables (creation, deletion, merges, downloads).\n         -->\n    <part_log>\n        <database>system</database>\n        <table>part_log</table>\n        <flush_interval_milliseconds>7500</flush_interval_milliseconds>\n    </part_log>\n\n\n    <!-- Uncomment to write text log into table.\n         Text log contains all information from usual server log but stores it in structured and efficient way.\n         The level of the messages that goes to the table can be limited (<level>), if not specified all messages will go to the table.\n           -->\n    <text_log>\n        <database>system</database>\n        <table>text_log</table>\n        <flush_interval_milliseconds>7500</flush_interval_milliseconds>\n        <level>trace</level>\n    </text_log>\n\n\n    <!-- Metric log contains rows with current values of ProfileEvents, CurrentMetrics collected with \"collect_interval_milliseconds\" interval. -->\n    <metric_log>\n        <database>system</database>\n        <table>metric_log</table>\n        <flush_interval_milliseconds>7500</flush_interval_milliseconds>\n        <collect_interval_milliseconds>1000</collect_interval_milliseconds>\n    </metric_log>\n\n    <!-- Parameters for embedded dictionaries, used in Yandex.Metrica.\n         See https://clickhouse.yandex/docs/en/dicts/internal_dicts/\n    -->\n\n    <!-- Path to file with region hierarchy. -->\n    <!-- <path_to_regions_hierarchy_file>/opt/geo/regions_hierarchy.txt</path_to_regions_hierarchy_file> -->\n\n    <!-- Path to directory with files containing names of regions -->\n    <!-- <path_to_regions_names_files>/opt/geo/</path_to_regions_names_files> -->\n\n\n    <!-- Configuration of external dictionaries. See:\n         https://clickhouse.yandex/docs/en/dicts/external_dicts/\n    -->\n    <dictionaries_config>*_dictionary.xml</dictionaries_config>\n\n    <!-- Uncomment if you want data to be compressed 30-100% better.\n         Don't do that if you just started using ClickHouse.\n      -->\n    <compression incl=\"clickhouse_compression\">\n    <!--\n        <!- - Set of variants. Checked in order. Last matching case wins. If nothing matches, lz4 will be used. - ->\n        <case>\n\n            <!- - Conditions. All must be satisfied. Some conditions may be omitted. - ->\n            <min_part_size>10000000000</min_part_size>        <!- - Min part size in bytes. - ->\n            <min_part_size_ratio>0.01</min_part_size_ratio>   <!- - Min size of part relative to whole table size. - ->\n\n            <!- - What compression method to use. - ->\n            <method>zstd</method>\n        </case>\n    -->\n    </compression>\n\n    <!-- Allow to execute distributed DDL queries (CREATE, DROP, ALTER, RENAME) on cluster.\n         Works only if ZooKeeper is enabled. Comment it if such functionality isn't required. -->\n    <distributed_ddl>\n        <!-- Path in ZooKeeper to queue with DDL queries -->\n        <path>/clickhouse/task_queue/ddl</path>\n\n        <!-- Settings from this profile will be used to execute DDL queries -->\n        <!-- <profile>default</profile> -->\n    </distributed_ddl>\n\n    <!-- Settings to fine tune MergeTree tables. See documentation in source code, in MergeTreeSettings.h -->\n    <!--\n    <merge_tree>\n        <max_suspicious_broken_parts>5</max_suspicious_broken_parts>\n    </merge_tree>\n    -->\n\n    <!-- Protection from accidental DROP.\n         If size of a MergeTree table is greater than max_table_size_to_drop (in bytes) than table could not be dropped with any DROP query.\n         If you want do delete one table and don't want to change clickhouse-server config, you could create special file <clickhouse-path>/flags/force_drop_table and make DROP once.\n         By default max_table_size_to_drop is 50GB; max_table_size_to_drop=0 allows to DROP any tables.\n         The same for max_partition_size_to_drop.\n         Uncomment to disable protection.\n    -->\n    <max_table_size_to_drop>0</max_table_size_to_drop>\n    <max_partition_size_to_drop>0</max_partition_size_to_drop>\n\n    <!-- Example of parameters for GraphiteMergeTree table engine -->\n    <graphite_rollup_example>\n        <pattern>\n            <regexp>click_cost</regexp>\n            <function>any</function>\n            <retention>\n                <age>0</age>\n                <precision>3600</precision>\n            </retention>\n            <retention>\n                <age>86400</age>\n                <precision>60</precision>\n            </retention>\n        </pattern>\n        <default>\n            <function>max</function>\n            <retention>\n                <age>0</age>\n                <precision>60</precision>\n            </retention>\n            <retention>\n                <age>3600</age>\n                <precision>300</precision>\n            </retention>\n            <retention>\n                <age>86400</age>\n                <precision>3600</precision>\n            </retention>\n        </default>\n    </graphite_rollup_example>\n\n    <!-- Directory in <clickhouse-path> containing schema files for various input formats.\n         The directory will be created if it doesn't exist.\n      -->\n    <format_schema_path>/data/clickhouse/format_schemas/</format_schema_path>\n\n   \n\n    <!-- Uncomment to use query masking rules.\n        name - name for the rule (optional)\n        regexp - RE2 compatible regular expression (mandatory)\n        replace - substitution string for sensitive data (optional, by default - six asterisks)\n    <query_masking_rules>\n        <rule>\n            <name>hide SSN</name>\n            <regexp>\\b\\d{3}-\\d{2}-\\d{4}\\b</regexp>\n            <replace>000-00-0000</replace>\n        </rule>\n    </query_masking_rules>\n    -->\n\n    <!-- Uncomment to disable ClickHouse internal DNS caching. -->\n    <!-- <disable_internal_dns_cache>1</disable_internal_dns_cache> -->\n</yandex>\n\n```\n\n### 基础配置 /data/clickhouse/conf/config.d/config.base.xml\n\n会覆盖`/data/clickhouse/conf/config.xml`, 每个节点都一样\n\n```\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<yandex>\n\n    <http_port>8123</http_port>\n    <tcp_port>9000</tcp_port>\n    <listen_host>10.64.138.24</listen_host>\n    <interserver_http_port>9009</interserver_http_port>\n    <interserver_http_host>10.64.138.24</interserver_http_host>\n    <path>/data1/clickhouse</path>\n    <tmp_path>/data1/clickhouse/tmp/</tmp_path>\n    <max_concurrent_queries>500</max_concurrent_queries>\n    <max_table_size_to_drop>0</max_table_size_to_drop>\n    <max_partition_size_to_drop>0</max_partition_size_to_drop>\n    <zookeeper replace=\"replace\">\n        <node index=\"0\">\n            <host>10.64.148.133</host>\n            <port>2181</port>\n        </node>\n        <node index=\"1\">\n            <host>10.64.148.134</host>\n            <port>2181</port>\n        </node>\n        <node index=\"1\">\n            <host>10.64.148.135</host>\n            <port>2181</port>\n        </node>\n    </zookeeper>\n</yandex>\n```\n\n### 集群分片配置 /data/clickhouse/conf/config.d/config.disks.xml\n\n每个节点都一样\n\n```\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<yandex>\n <storage_configuration>\n        <disks>\n            <fast>\n                <path>/dev/shm/clickhouse/</path>\n                <!-- 10G -->\n             <keep_free_space_bytes>10737418240</keep_free_space_bytes>\n            </fast>\n            <default>\n             <keep_free_space_bytes>572159652</keep_free_space_bytes>\n            </default>\n            <data3>\n                <path>/data3/clickhouse/</path>\n                <keep_free_space_bytes>572159652</keep_free_space_bytes>\n            </data3>\n            <data4>\n                <path>/data4/clickhouse/</path>\n                <keep_free_space_bytes>572159652</keep_free_space_bytes>\n            </data4>\n            <data5>\n                <path>/data5/clickhouse/</path>\n                <keep_free_space_bytes>572159652</keep_free_space_bytes>\n            </data5>\n           \n            <data7>\n                <path>/data7/clickhouse/</path>\n                <keep_free_space_bytes>572159652</keep_free_space_bytes>\n            </data7>\n            <data8>\n                <path>/data8/clickhouse/</path>\n                <keep_free_space_bytes>572159652</keep_free_space_bytes>\n            </data8>\n         \n        </disks>\n        <policies>\n            <hdd_in_order>\n                <volumes>\n                    <hot>\n                       \t<disk>default</disk>\n                        <disk>data3</disk>\n\t\t\t\t\t\t<max_data_part_size_bytes>1073741824</max_data_part_size_bytes>\n                    </hot>\n                     <cold>\n                        <disk>data4</disk>\n                        <disk>data5</disk>\n\t\t\t\t\t\t<max_data_part_size_bytes>1073741824</max_data_part_size_bytes>\n                    </cold>\n                    <archive>\n                        <disk>data7</disk>\n                        <disk>data8</disk>\n                    </archive>\n                </volumes>\n                <move_factor>0.2</move_factor>\n            </hdd_in_order>\n            <memory_cache>\n                <volumes>\n                    <memory>\n                        <disk>fast</disk>\n                    </memory>\n                </volumes>\n            </memory_cache>\n        </policies>\n    </storage_configuration>\n</yandex>\n```\n\n###   宏定义 /data/clickhouse/conf/config.d/config.macros.xml\n\n用于执行建表语句时，可以替换成具体的值，不同机器节点不一样:\n\n由于ck的同个节点只能存一个分片的一个副本，所以4台机器可以实现2分片2副本\n\n对于节点1：10.64.148.133   存储分片01 副本 01， shard=01  replica=c1-01-01(表示集群c1, 01分片, 01副本)\n\n```\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<yandex>\n    <macros>\n        <shard>01</shard>\n        <replica>c1-01-01</replica>\n    </macros>\n</yandex>\n```\n\n对于节点2：10.64.148.134   存储分片01 副本 02， shard=01  replica=c1-01-02(表示集群c1, 01分片, 02副本)\n\n```\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<yandex>\n    <macros>\n        <shard>01</shard>\n        <replica>c1-01-02</replica>\n    </macros>\n</yandex>\n```\n\n对于节点3：10.64.148.135   存储分片02 副本 01， shard=02  replica=c1-02-01(表示集群c1, 02分片, 01副本)\n\n```\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<yandex>\n    <macros>\n        <shard>02</shard>\n        <replica>c1-02-01</replica>\n    </macros>\n</yandex>\n```\n\n对于节点4：10.64.138.24   存储分片02 副本 02， shard=02 replica=c1-02-02(表示集群c1, 02分片, 02副本)\n\n```\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<yandex>\n    <macros>\n        <shard>02</shard>\n        <replica>c1-02-02</replica>\n    </macros>\n</yandex>\n```\n\n由上面配置可以看到replica的分布规律，其中shard表示分片编号；replica是副本标识，这里使用了c1-{shard}-{replica}的表示方式，比如c1-02-1表示c1集群的02分片下的1号副本，这样既非常直观的表示又唯一确定副本. \n\n### 集群配置 /data/clickhouse/conf/config.d/config.remote_servers.xml\n\n这里指定了两个分片，每个分片两个副本。\n\n```\n<?xml version=\"1.0\"?>\n<yandex>\n    <remote_servers replace=\"replace\">\n        <base>\n            <shard>\n                <weight>1</weight>\n                <internal_replication>true</internal_replication>\n\n                <replica>\n                    <host>10.64.148.133</host>\n                    <port>9000</port>\n                    <user>default</user>\n                    <password>x</password>\n                </replica>\n                <replica>\n                    <host>10.64.148.134</host>\n                    <port>9000</port>\n                    <user>default</user>\n                    <password>x</password>\n                </replica>\n\n            </shard>\n            <shard>\n                <weight>1</weight>\n                <internal_replication>true</internal_replication>\n                <replica>\n                    <host>10.64.148.135</host>\n                    <port>9000</port>\n                    <user>default</user>\n                    <password>x</password>\n                </replica>\n                <replica>\n                    <host>10.68.138.24</host>\n                    <port>9000</port>\n                    <user>default</user>\n                    <password>x</password>\n                </replica>\n\n            </shard>\n        </base>\n    </remote_servers>\n</yandex>\n```\n\n## 启动clickhouse-server进程\n\n执行bash start_ch.sh start\n\n## 测试\n\n### 建表\n\n```\ncreate table t_sample3 on cluster base (id UInt64, its DateTime default now()) Engine=ReplicatedMergeTree('/clickhouse/tables/{shard}/table_name','{replica}') order by (its,id);\n\nCREATE TABLE dis_sample3 on cluster base AS t_sample3  ENGINE = Distributed(base, default, t_sample3, rand())\n```\n\n插入数据：\n\n```\n在节点1执行\n\ninsert into dis_sample3 (id) select * from numbers(10000000);\n结果为：\nip-10-64-148-133.yygamedev.com :) select count() from dis_sample3\n\nSELECT count()\nFROM dis_sample3\n\n┌──count()─┐\n│ 10000000 │\n└──────────┘\n\n1 rows in set. Elapsed: 0.146 sec.\n```\n\n查看每个节点part_log\n\n节点1：\n\n```\nip-10-64-148-133.yygamedev.com :) SELECT event_type, path_on_disk FROM system.part_log where table='t_sample3'\n\nSELECT\n    event_type,\n    path_on_disk\nFROM system.part_log\nWHERE table = 't_sample3'\n\n┌─event_type─┬─path_on_disk────────────────────────────────────────┐\n│ NewPart    │ /data1/clickhouse/data/default/t_sample3/all_0_0_0/ │\n│ NewPart    │ /data1/clickhouse/data/default/t_sample3/all_1_1_0/ │\n│ NewPart    │ /data1/clickhouse/data/default/t_sample3/all_2_2_0/ │\n│ NewPart    │ /data1/clickhouse/data/default/t_sample3/all_3_3_0/ │\n│ NewPart    │ /data1/clickhouse/data/default/t_sample3/all_4_4_0/ │\n│ NewPart    │ /data1/clickhouse/data/default/t_sample3/all_5_5_0/ │\n│ NewPart    │ /data1/clickhouse/data/default/t_sample3/all_6_6_0/ │\n│ NewPart    │ /data1/clickhouse/data/default/t_sample3/all_7_7_0/ │\n│ NewPart    │ /data1/clickhouse/data/default/t_sample3/all_8_8_0/ │\n│ NewPart    │ /data1/clickhouse/data/default/t_sample3/all_9_9_0/ │\n│ MergeParts │ /data1/clickhouse/data/default/t_sample3/all_0_5_1/ │\n└────────────┴─────────────────────────────────────────────────────┘\n\n11 rows in set. Elapsed: 0.019 sec.\n```\n\n节点2：\n\n```\nip-10-64-148-134.yygamedev.com :) SELECT event_type, path_on_disk FROM system.part_log where table='t_sample3'\n\nSELECT\n    event_type,\n    path_on_disk\nFROM system.part_log\nWHERE table = 't_sample3'\n\n┌─event_type───┬─path_on_disk────────────────────────────────────────┐\n│ DownloadPart │ /data1/clickhouse/data/default/t_sample3/all_0_0_0/ │\n│ DownloadPart │ /data1/clickhouse/data/default/t_sample3/all_1_1_0/ │\n│ DownloadPart │ /data1/clickhouse/data/default/t_sample3/all_2_2_0/ │\n│ DownloadPart │ /data1/clickhouse/data/default/t_sample3/all_3_3_0/ │\n│ DownloadPart │ /data1/clickhouse/data/default/t_sample3/all_4_4_0/ │\n│ DownloadPart │ /data1/clickhouse/data/default/t_sample3/all_5_5_0/ │\n│ DownloadPart │ /data1/clickhouse/data/default/t_sample3/all_6_6_0/ │\n│ DownloadPart │ /data1/clickhouse/data/default/t_sample3/all_7_7_0/ │\n│ DownloadPart │ /data1/clickhouse/data/default/t_sample3/all_8_8_0/ │\n│ MergeParts   │ /data1/clickhouse/data/default/t_sample3/all_0_5_1/ │\n│ DownloadPart │ /data1/clickhouse/data/default/t_sample3/all_9_9_0/ │\n└──────────────┴─────────────────────────────────────────────────────┘\n\n11 rows in set. Elapsed: 0.003 sec.\n```\n\n节点3：\n\n```\nip-10-64-148-135.yygamedev.com :) SELECT event_type, path_on_disk FROM system.part_log where table='t_sample3'\n\nSELECT\n    event_type,\n    path_on_disk\nFROM system.part_log\nWHERE table = 't_sample3'\n\n┌─event_type─┬─path_on_disk────────────────────────────────────────┐\n│ NewPart    │ /data1/clickhouse/data/default/t_sample3/all_0_0_0/ │\n│ NewPart    │ /data1/clickhouse/data/default/t_sample3/all_1_1_0/ │\n└────────────┴─────────────────────────────────────────────────────┘\n┌─event_type─┬─path_on_disk────────────────────────────────────────┐\n│ NewPart    │ /data1/clickhouse/data/default/t_sample3/all_2_2_0/ │\n│ NewPart    │ /data1/clickhouse/data/default/t_sample3/all_3_3_0/ │\n│ NewPart    │ /data1/clickhouse/data/default/t_sample3/all_4_4_0/ │\n│ NewPart    │ /data1/clickhouse/data/default/t_sample3/all_5_5_0/ │\n│ NewPart    │ /data1/clickhouse/data/default/t_sample3/all_6_6_0/ │\n│ NewPart    │ /data1/clickhouse/data/default/t_sample3/all_7_7_0/ │\n│ NewPart    │ /data1/clickhouse/data/default/t_sample3/all_8_8_0/ │\n│ NewPart    │ /data1/clickhouse/data/default/t_sample3/all_9_9_0/ │\n│ MergeParts │ /data1/clickhouse/data/default/t_sample3/all_0_6_1/ │\n└────────────┴─────────────────────────────────────────────────────┘\n```\n\n节点4\n\n```\nip-10-64-138-24.yygamedev.com :) SELECT event_type, path_on_disk FROM system.part_log where table='t_sample3'\n\nSELECT\n    event_type,\n    path_on_disk\nFROM system.part_log\nWHERE table = 't_sample3'\n\n┌─event_type───┬─path_on_disk────────────────────────────────────────┐\n│ DownloadPart │ /data1/clickhouse/data/default/t_sample3/all_0_0_0/ │\n│ DownloadPart │ /data1/clickhouse/data/default/t_sample3/all_1_1_0/ │\n│ DownloadPart │ /data1/clickhouse/data/default/t_sample3/all_2_2_0/ │\n│ DownloadPart │ /data1/clickhouse/data/default/t_sample3/all_3_3_0/ │\n│ DownloadPart │ /data1/clickhouse/data/default/t_sample3/all_4_4_0/ │\n│ DownloadPart │ /data1/clickhouse/data/default/t_sample3/all_5_5_0/ │\n│ DownloadPart │ /data1/clickhouse/data/default/t_sample3/all_6_6_0/ │\n│ DownloadPart │ /data1/clickhouse/data/default/t_sample3/all_7_7_0/ │\n│ DownloadPart │ /data1/clickhouse/data/default/t_sample3/all_8_8_0/ │\n│ DownloadPart │ /data1/clickhouse/data/default/t_sample3/all_9_9_0/ │\n│ MergeParts   │ /data1/clickhouse/data/default/t_sample3/all_0_6_1/ │\n└──────────────┴─────────────────────────────────────────────────────┘\n\n11 rows in set. Elapsed: 0.003 sec.\n```\n\n可以看到，节点2和节点4都是DownloadPart\n\n\n\n## 停掉一个节点，对查询没有影响","tags":["运维"],"categories":["clickhouse"]},{"title":"clickhouse集群迁移实践","url":"/clickhouse/qianyi/","content":"\n# 集群迁移实践\n\n# 背景\n\n\n现有的ck集群没有副本，磁盘是12块盘的stat盘，存在磁盘故障导致数据丢失的风险，而依赖zk的双副本策略又由于zk性能存在瓶颈影响集群的可用性，故而使用带三副本的高效云盘替代stat盘，规避数据丢失的风险。\n\n当前ck的写入程序使用的是统一的域名，由域名查询到对应的ip节点来建立tcp连接。对于ck的查询，使用的是内部的一个代理，该代理配置了集群的ip，由代理去轮询ip进行查询。\n\n在数据迁移的过程中，需要保证集群写入和查询都不受影响，关键在于控制好查询和写入的节点。\n\n<!--more-->\n# 迁移方案\n\n## 1. 新节点安装ck，同步元数据，元数据管理覆盖新节点ip\n\n新节点安装时，配置文件的remote_servers中的集群配置和旧集群一致，新节点只是做一个查询转发。\n\n从旧节点中导出非system表的建表语句，由于一份表对应着一个本地表和一个分布式表，因此需要先创建完本地表。\n\n```\n导出本地表\necho \"select create_table_query||';'  from system.tables where database != 'system' and engine!='Distributed' order by name desc\" | /data/clickhouse/bin/clickhouse-client --password xxx --port 9000 > localtable.txt\n\n导出分布式表的ddl\necho \"select create_table_query||';'  from system.tables where database != 'system' and engine='Distributed' order by name desc\" | /data/clickhouse/bin/clickhouse-client --password xxx --port 9000 > distable.txt\n\n```\n\n将建表语句发送到新节点执行\n\n```\n执行本地表的ddl\n./sendfile.sh ckip.txt localtable.txt distable.txt\n./runcmd.sh ckip.txt \"/data/clickhouse/bin/clickhouse-client  --password xxx -mn < /home/jinyaqia/ck_tool/localtable.txt\"\n\n执行分布式表的ddl\n./runcmd.sh ckip.txt \"/data/clickhouse/bin/clickhouse-client  --password xxx -mn < /home/jinyaqia/ck_tool/distable.txt\"\n```\n\n其中\n\n```\n# sendfile.sh\n# 用于发送文件\n#!/usr/bin/env bash\n\nfile=''\narray=\"$@\"\ni=0\nfor el in $array\ndo\n    if [ ${i} -ne 0 ]\n\tthen\n\t\tfile=$file' '${el}\n    fi\n\tlet i++\ndone\n\nfor ip in $(cat $1|grep -v \"^#.*\\|^$\")\ndo\n    cmd=\"scp ${file} $ip:~/ck_tool/\"\n\t$cmd &\n\techo $ip,$cmd\ndone\n\nwait\necho 'done'\n```\n\n```\n# runcmd.sh\n# 用于执行命令\n#!/usr/bin/env bash\n\nfor ip in $(cat $1|grep -v \"^#.*\\|^$\")\ndo\n\techo $ip\n    ssh $ip \"${2}\" &\n    echo \"end ${ip}\"\ndone\n\nwait\n```\n\n## 2. 配置查询代理，从新节点查询数据\n## 3. 滚动迁移\n### 3.1 先停掉待迁移节点的写入\n域名dns管理去掉待迁移节点，这里需要写入端没有直接缓存ck节点ip，确保在数据复制的过程中，新的数据不会写入待迁移的节点\n### 3.2 ck节点一对一复制数据\n采用clickhouse copier的方式进行迁移，生成所有本地表的迁移配置，调用迁移脚本进行数据复制\n\n1. 导出需要进行迁移的表，可以从system.tables中查询并导出\n\n```\necho \"select database||'.'||name,engine_full  from system.tables where database != 'system' and engine not in ('Distributed','View','MaterializedView')  order by name desc\" | /data/clickhouse/bin/clickhouse-client --password xxx --port 9000 > dbtable.txt.all\n\n```\n\n导出的文件去掉.inner.的表，物化视图等普通本地表导完后再处理\n如果有转义的,如'\\，手工替换掉就可以了\n\n2. 将脚本和文件都上传到接口机，由接口机发送到新节点,脚本内容后文给出\n\n```\ndbtable.txt.all  需要迁移的表\ndbtable.txt.todo 需要执行迁移的表\ntable_copy_copier.py  迁移脚本\ntable_check.py  数据一致性检查脚本\nget_error.py  处理迁移异常的表\nipmap.txt     旧节点复制到新节点的ip对应关系\ncopier_template.xml 复制工具配置模板\nzk.xml  复制工具zk配置\n\n发送命令\n./sendfile.sh ckip.txt dbtable.txt.all dbtable.txt.todo table_copy_copier.py table_check.py get_error.py copier_template.xml zk.xml\n```\n\n3. 执行复制\n\n```\nnohup python3 table_copy_copier.py 2>&1 >copy.log &\n```\n\n4. 校对、检查和重跑\n\n```\n批量校对\npython3 table_check.py\npython3 get_error.py\n\n有异常的表会写入dbtable.txt.1\n其中新节点数据条数少的写入error.txt.less\n新节点数据条数多了的写入error.txt.more\n\n手动核对下dbtable.txt.1里的表迁移异常的原因，可以查clickhouse-copier的日志，如果要重跑，则生成新的dbtable.txt.todo, 删掉zk中对应表的节点，然后调用table_copy_copier.py重新复制\n\n```\n### 3.3 更新ck集群配置remote_servers，增加新节点，去掉旧节点，等待ck server自动加载更新配置，此时查询会落到新节点上\n\n### 3.4 配置域名，使数据写入新节点\n\n## 4. 退回机器\n\n# 注意点\n\n1. 该方案在数据复制的时候要求旧节点和新节点都不会写数据，这个需要写入的时候不写分布式表\n2. 复制任务重跑时，需要删掉zk节点的数据\n3. 由于复制任务会在zk上创建比较多的节点数，为了降低zk的延迟，不要用ck集群的zk，可以单独搭建一个zk集群\n4. table_copy_copier.py调用 clickhouse copier命令后，即使主进程关闭了，copier任务也会一直运行\n5. table_copy_copier.py配置了60个子线程用于调用copier任务，如果要降低带宽的使用，可以调低并行度\n\n\n# 附录：\n## table_copy_copier.py\n\n```python\nimport sys,json;\nimport socket;\nimport os;\nfrom concurrent.futures import ThreadPoolExecutor,as_completed\nimport queue,threading;\nimport time,functools\n\ndef get_time():\n    time_now=int(time.time())\n    time_local=time.localtime(time_now)\n    return time.strftime(\"%Y-%m-%d %H:%M:%S\",time_local)\n   \ndef exec_command(fo,db,table,command_template,ip,task_file):\n    try:\n        task_path='/copytask/{}/{}/{}'.format(ip,db,table)\n        base_dir=table\n        if not os.path.exists(base_dir):\n            os.makedirs(base_dir)\n        command=command_template.format(task_path=task_path,base_dir=base_dir,task_file=task_file)\n        print(\"start thread num={} command={} pid={}\".format(threading.get_ident(),command,os.getpid()))\n        f = os.popen(command)\n        print(\"done thread num={} command={} pid={}\".format(threading.get_ident(),command,os.getpid()))\n        res=\"start {}.{} time={}\\n\".format(db,table,get_time())\n        fo.write(res)\n        fo.flush()\n    except:\n        error=\"start {}.{} error\\n\".format(db,table)\n        fo.write(error)\n        fo.flush()\n    return f\n\ndef read_db_table(file_name):\n    try:\n        f = open(file_name)\n        lines = f.read().split('\\n')\n    finally:\n        f.close()\n    return lines\n\ndef read_file(file_name):\n    try:\n        f = open(file_name)\n        lines = f.read()\n    finally:\n        f.close()\n    return lines\n\ndef write_file(file_name,content):\n    try:\n        f = open(file_name,\"w+\")\n        f.write(content)\n    finally:\n        f.close()\n\ndef get_local_ip():\n    try:\n        s = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)\n        s.connect(('8.8.8.8', 80))\n        localIp = s.getsockname()[0]\n    finally:\n        s.close()\n    return localIp\n\ndef task_done_callback(future,dbtable_str):\n    try:\n        data = future.result()\n        res=\"done {} time {}\\n\".format(dbtable_str,get_time())\n    except CancelledError:\n        res=\"error {} time {}\\n\".format(dbtable_str,get_time())\n    finally:\n        fo = open(\"result.txt\",\"a+\")\n        fo.write(res)\n        fo.flush()\n        print('result',data.read())\n        fo.close()\n\n\nif __name__ == '__main__':\n\n    ipmap=json.loads(read_file(\"ipmap.txt\"))\n    print(ipmap)\n    localIp = get_local_ip()\n    print(localIp)\n    remoteIp = ipmap[localIp]\n    print(remoteIp)\n    # copier template\n    copier_template = read_file(\"copier_template.xml\")\n    print(copier_template)\n    # db.table needs to copy\n    lines = filter(None,read_db_table(\"dbtable.txt.todo\"))\n    print(lines)\n    command_template=\"/data/clickhouse/bin/clickhouse copier --config zk.xml --task-path {task_path} --task-file {task_file} --base-dir {base_dir}\"\n    result_file = open(\"task_log.txt\",\"a+\")\n    pool = ThreadPoolExecutor(60)\n    waitQueue = queue.Queue()\n    for line in lines:\n        waitQueue.put(line)\n    \n    while(waitQueue.qsize()>0):\n        line_arr = waitQueue.get().split('\\t')\n        com=line_arr[0]\n        task_file=\"task_{}.xml\".format(com)\n        dbtable=com.split(\".\")\n        content=copier_template.format(source_host=remoteIp,target_host=localIp,database=dbtable[0],table=dbtable[1],engine=line_arr[1])\n        write_file(task_file,content)\n        task = pool.submit(exec_command, result_file, dbtable[0],dbtable[1], command_template, remoteIp, task_file).add_done_callback(functools.partial(task_done_callback,dbtable_str=com))\n        \n```\n\n## table_check.py\n\n```\nimport sys,json;\nimport socket;\nimport os;\nfrom concurrent.futures import ThreadPoolExecutor,as_completed,CancelledError\nimport queue,threading;\nimport time,functools\n\ndef get_time():\n    time_now=int(time.time())\n    time_local=time.localtime(time_now)\n    return time.strftime(\"%Y-%m-%d %H:%M:%S\",time_local)\n   \ndef exec_command(fo, dbtable_str,sql):\n    \n    try:        \n        dbtable=dbtable_str.split(\".\")\n        command=sql.format(db=dbtable[0],table=dbtable[1])\n        print(\"start thread num={} command={} pid={}\".format(threading.get_ident(),command,os.getpid()))\n        f = os.popen(command)\n        res=\"start {} time={}\\n\".format(dbtable_str,get_time())\n        fo.write(res)\n        fo.flush()\n    except:\n        error=\"start {} error\\n\".format(dbtable_str)\n        fo.write(error)\n        fo.flush()\n    return f\n\ndef read_db_table(file_name):\n    try:\n        f = open(file_name)\n        lines = f.read().split('\\n')\n    finally:\n        f.close()\n    return lines\n\ndef read_file(file_name):\n    try:\n        f = open(file_name)\n        lines = f.read()\n    finally:\n        f.close()\n    return lines\n\ndef get_local_ip():\n    try:\n        s = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)\n        s.connect(('8.8.8.8', 80))\n        localIp = s.getsockname()[0]\n    finally:\n        s.close()\n    return localIp\n\ndef task_done_callback(future,fo, dbtable_str,engine):\n    res=\"\"\n    try:\n        data = future.result()\n        counts = data.read().split('\\n')\n        line1= counts[0].split('\\t')\n        line2=counts[1].split('\\t')\n        count1=count2=0\n        if(line1[0]=='a'):\n            count1=line1[1]\n            count2=line2[1]\n        else:\n            count1=line2[1]\n            count2=line1[1]\n        res=\"done|{}\\t{}|result@{}@{}@{}\\n\".format(dbtable_str,engine,count1,count2,int(count1)-int(count2))\n    except CancelledError:\n        res=\"error {} \\n\".format(dbtable_str)\n    finally:\n        fo.write(res)\n        fo.flush()\n        print('result',res)\n    \n\n\nif __name__ == '__main__':\n    ipmap=json.loads(read_file(\"ipmap.txt\"))\n    print(ipmap)\n    localIp = get_local_ip()\n    print(localIp)\n    remoteIp = ipmap[localIp]\n    print(remoteIp)\n    sql=\"echo \\\"select 'a',count() from remote('\"+remoteIp+\"','{db}','{table}','default','IARYxRcr') union all select 'b',count() from {db}.{table};\\\" |/data/clickhouse/bin/clickhouse-client  --password IARYxRcr\"\n    lines = filter(None,read_db_table(\"dbtable.txt.all\"))\n    print(lines)\n    fo = open(\"checkresult.txt\",\"w+\")\n    fo1 = open(\"checkresult1.txt\",\"w+\")\n    pool = ThreadPoolExecutor(60)\n    waitQueue = queue.Queue()\n    for line in lines:\n        waitQueue.put(line)\n    \n    while(waitQueue.qsize()>0):\n        line_arr = waitQueue.get().split('\\t')\n        com=line_arr[0]\n        engine=line_arr[1]\n        task = pool.submit(exec_command, fo, com, sql).add_done_callback(functools.partial(task_done_callback,dbtable_str=com,fo=fo1,engine=engine))\n        \n```\n\n## get_error.py\n\n```\nimport sys\nimport json\nimport socket\nimport os\nfrom concurrent.futures import ThreadPoolExecutor, as_completed\nimport queue\nimport threading\nimport time\nimport functools\n\n\ndef read_file(file_name):\n    try:\n        f = open(file_name)\n        lines = f.read().split('\\n')\n    finally:\n        f.close()\n    return lines\n\n\nif __name__ == '__main__':\n    fo = open(\"dbtable.txt.1\", \"w+\")\n    done = open('finish.txt', \"w+\")\n    lines = read_file(\"checkresult1.txt\")\n    # 比旧节点少了\n    err_less = open('error.txt.less', 'w+')\n    # 比旧节点多了\n    err_more = open('error.txt.more', 'w+')\n    todo = 0\n    to_delete = 0\n    finish = 0\n    for line in lines:\n        if(line != ''):\n            line_arr = line.split('|')\n            print(line_arr)\n            result = line_arr[2].split('@')\n            dbtable = line_arr[1].split('\\t')[0]\n            old=int(result[1])\n            new = int(result[2])\n            diff=int(result[3])\n    \n            if(diff != 0 and new == 0):\n                todo += 1\n                fo.write(line_arr[1]+'\\n')\n            elif(diff != 0 and new != 0):\n                todo += 1\n                to_delete += 1\n                fo.write(line_arr[1]+'\\n')\n            else:\n                finish += 1\n                done.write(dbtable+'\\n')\n\n            if(diff>0):\n                err_less.write(\"{} {}\\n\".format(dbtable,result))\n            elif(diff<0):\n                err_more.write(\"{} {}\\n\".format(dbtable,result))\n\n    print(\"finish={}, todo={}\".format(finish, to_delete, todo))\n    fo.close()\n    done.close()\n    err_less.close()\n    err_more.close()\n\n```\n\n## copier_template.xml\n\n```\n<yandex>\n    <remote_servers>\n        <source_cluster>\n            <shard>\n                <internal_replication>false</internal_replication>\n                    <replica>\n                        <host>{source_host}</host>\n                        <port>9000</port>\n                        <user>default</user>\n                        <password>IARYxRcr</password>\n                        <secure>0</secure>\n                    </replica>\n            </shard>\n        </source_cluster>\n\n        <destination_cluster>\n            <shard>\n                <internal_replication>false</internal_replication>\n                    <replica>\n                        <host>{target_host}</host>\n                        <port>9000</port>\n                        <user>default</user>\n                        <password>IARYxRcr</password>\n                        <secure>0</secure>\n                    </replica>\n            </shard>89\n        </destination_cluster>\n    </remote_servers>\n\n    <max_workers>32</max_workers>\n\n    <!-- Setting used to fetch (pull) data from source cluster tables -->\n    <settings_pull>\n        <readonly>1</readonly>\n    </settings_pull>\n\n    <settings_push>\n        <readonly>0</readonly>\n    </settings_push>\n\n     <settings>\n        <connect_timeout>3</connect_timeout>\n         <insert_distributed_sync>1</insert_distributed_sync>\n    </settings>\n\n    <tables>\n        <table_hits>\n            <!-- Source cluster name (from <remote_servers/> section) and tables in it that should be copied -->\n            <cluster_pull>source_cluster</cluster_pull>\n            <database_pull>{database}</database_pull>\n            <table_pull>{table}</table_pull>\n\n            <!-- Destination cluster name and tables in which the data should be inserted -->\n            <cluster_push>destination_cluster</cluster_push>\n            <database_push>{database}</database_push>\n            <table_push>{table}</table_push>\n\n            <engine>\n            ENGINE={engine}\n            </engine>\n            <sharding_key>rand()</sharding_key>\n\n        </table_hits>\n    </tables>\n</yandex>\n```\n\n## ipmap.txt\n\n```\n{\n    \"10.69.28.1\": \"10.69.29.11\",\n    \"10.69.29.2\": \"10.69.28.22\",\n    \"10.69.29.3\": \"10.69.29.33\",\n    \"10.69.29.4\": \"10.69.29.44\"\n}\n```\n\n## zk.txt\n```\n<yandex>\n    <logger>\n        <level>trace</level>\n        <size>100M</size>\n        <count>3</count>\n    </logger>\n    <zookeeper>\n        <node index=\"0\">\n            <host>zkhost</host>\n            <port>2181</port>\n        </node>\n    </zookeeper>\n</yandex>\n```","tags":["运维"],"categories":["clickhouse"]},{"title":"union all并行查询提速","url":"/clickhouse/optimize-unionall/","content":"# union all并行查询提速\n\n<!--more-->\n# 原查询是：\n\n```\nSELECT\n    a.count AS reqcount,\n    b.count AS tenseccount,\n    c.count AS thirtyseccount,\n    d.count AS onemincount,\n    e.count AS fivemincount,\n    f.count AS failcount,\n    g.count AS verifycount,\n    h.count AS verifysuccesscount,\n    i.count AS cost,\n    j.count AS onetofivemincount\nFROM\n(\n    SELECT count() AS count\n    FROM dis_sms_gateway AS g\n    WHERE (1 = 1) AND (g.its >= 1587312000) AND (g.its <= 1587484800)\n) AS a\n,\n(\n    SELECT count() AS count\n    FROM dis_sms_gateway AS g\n    WHERE (1 = 1) AND (g.receiptusetime < 10000) AND (g.its >= 1587312000) AND (g.its <= 1587484800)\n) AS b\n,\n(\n    SELECT count() AS count\n    FROM dis_sms_gateway AS g\n    WHERE (1 = 1) AND (g.receiptusetime >= 10000) AND (g.receiptusetime < 30000) AND (g.its >= 1587312000) AND (g.its <= 1587484800)\n) AS c\n,\n(\n    SELECT count() AS count\n    FROM dis_sms_gateway AS g\n    WHERE (1 = 1) AND (g.receiptusetime >= 30000) AND (g.receiptusetime < 60000) AND (g.receiptusetime >= 60000) AND (g.receiptusetime < 300000) AND (g.its >= 1587312000) AND (g.its <= 1587484800)\n) AS d\n,\n(\n    SELECT count() AS count\n    FROM dis_sms_gateway AS g\n    WHERE (1 = 1) AND (g.receiptusetime >= 300000) AND (g.its >= 1587312000) AND (g.its <= 1587484800)\n) AS e\n,\n(\n    SELECT count() AS count\n    FROM dis_sms_gateway AS g\n    WHERE (1 = 1) AND ((g.status = '0') OR (g.status = '2')) AND (g.its >= 1587312000) AND (g.its <= 1587484800)\n) AS f\n,\n(\n    SELECT count(0) AS count\n    FROM dis_sms_captcha AS c\n    WHERE (1 = 1) AND (c.appid = '5001') AND (c.its >= 1587312000) AND (c.its <= 1587484800)\n) AS g\n,\n(\n    SELECT count(0) AS count\n    FROM dis_sms_captcha AS c\n    WHERE (1 = 1) AND (c.appid = '5001') AND (c.mobileverifycount > '0') AND (c.its >= 1587312000) AND (c.its <= 1587484800)\n) AS h\n,\n(\n    SELECT sum(toDecimal128(notEmpty(price), 4)) AS count\n    FROM dis_sms_gateway AS g\n    WHERE (1 = 1) AND (g.appid = '5001') AND (g.its >= 1587312000) AND (g.its <= 1587484800)\n) AS i\n,\n(\n    SELECT count() AS count\n    FROM dis_sms_gateway AS g\n    WHERE (1 = 1) AND (g.receiptusetime >= 60000) AND (g.receiptusetime < 300000) AND (g.its >= 1587312000) AND (g.its <= 1587484800)\n) AS j\nWHERE 1 = 1\n```\n\n# 查询是串行的，执行结果为:\n\n```\n1 rows in set. Elapsed: 6.443 sec. Processed 8.20 million rows, 47.30 MB (1.27 million rows/s., 7.34 MB/s.)\n```\n\n# 使用union all是查询可以并行，sql变为\n```\nSELECT\n   name,count\nFROM (\n(\n    SELECT 'a' as name,count() AS count\n    FROM dis_sms_gateway AS g\n    WHERE (1 = 1) AND (g.its >= 1587312000) AND (g.its <= 1587484800)\n)\nunion all\n(\n    SELECT 'b',count() AS count\n    FROM dis_sms_gateway AS g\n    WHERE (1 = 1) AND (g.receiptusetime < 10000) AND (g.its >= 1587312000) AND (g.its <= 1587484800)\n)\nunion all\n(\n    SELECT 'c',count() AS count\n    FROM dis_sms_gateway AS g\n    WHERE (1 = 1) AND (g.receiptusetime >= 10000) AND (g.receiptusetime < 30000) AND (g.its >= 1587312000) AND (g.its <= 1587484800)\n) \nunion all\n(\n    SELECT 'd',count() AS count\n    FROM dis_sms_gateway AS g\n    WHERE (1 = 1) AND (g.receiptusetime >= 30000) AND (g.receiptusetime < 60000) AND (g.receiptusetime >= 60000) AND (g.receiptusetime < 300000) AND (g.its >= 1587312000) AND (g.its <= 1587484800)\n) \nunion all\n(\n    SELECT 'e',count() AS count\n    FROM dis_sms_gateway AS g\n    WHERE (1 = 1) AND (g.receiptusetime >= 300000) AND (g.its >= 1587312000) AND (g.its <= 1587484800)\n)\nunion all\n(\n    SELECT 'f',count() AS count\n    FROM dis_sms_gateway AS g\n    WHERE (1 = 1) AND ((g.status = '0') OR (g.status = '2')) AND (g.its >= 1587312000) AND (g.its <= 1587484800)\n)\nunion all\n(\n    SELECT 'g',count(0) AS count\n    FROM dis_sms_captcha AS c\n    WHERE (1 = 1) AND (c.appid = '5001') AND (c.its >= 1587312000) AND (c.its <= 1587484800)\n) \nunion all\n(\n    SELECT 'h',count(0) AS count\n    FROM dis_sms_captcha AS c\n    WHERE (1 = 1) AND (c.appid = '5001') AND (c.mobileverifycount > '0') AND (c.its >= 1587312000) AND (c.its <= 1587484800)\n)\nunion all\n(\n    SELECT 'i',sum(toDecimal128(notEmpty(price), 4)) AS count\n    FROM dis_sms_gateway AS g\n    WHERE (1 = 1) AND (g.appid = '5001') AND (g.its >= 1587312000) AND (g.its <= 1587484800)\n)\nunion all\n(\n    SELECT 'j',count() AS count\n    FROM dis_sms_gateway AS g\n    WHERE (1 = 1) AND (g.receiptusetime >= 60000) AND (g.receiptusetime < 300000) AND (g.its >= 1587312000) AND (g.its <= 1587484800)\n)\n)\n\n```\n\n# 查询结果为：\n```\n10 rows in set. Elapsed: 0.376 sec. Processed 8.20 million rows, 47.30 MB (21.83 million rows/s., 125.94 MB/s.)\n```","tags":["sql优化"],"categories":["clickhouse"]},{"title":"clickhouse+JuiceFS冷热数据分层方案","url":"/clickhouse/juicefs/","content":"\n# clickhouse+JuiceFS冷热数据分层存储方案\n\n## JuiceFS简介\n\njuiceFS的介绍可以参考[juiceFS github](https://github.com/juicedata/juicefs)\n\nJuiceFS 是在 GNU Affero General Public License v3.0 下发布的高性能 POSIX 文件系统。它专门针对云原生环境进行了优化。使用 JuiceFS 存储数据，数据本身会持久化到对象存储（如 S3、oss）中，数据对应的元数据可以根据需要持久化到 Redis、MySQL、SQLite 等各种数据库引擎中。\n\nJuiceFS 可以简单方便地将海量云存储直接连接到大数据、机器学习、人工智能以及已经投入生产环境的各种应用平台，无需修改代码，您可以像使用本地存储一样高效地使用海量云存储。\n\n<!--more-->\n\n## 为啥会考虑使用JuiceFS\n\n与Hadoop 生态组件通常依赖 HDFS 作为底层的数据存储不同，ClickHouse 使用本地盘来自己管理数据，[社区建议](https://clickhouse.tech/docs/en/operations/tips/#storage-subsystem)使用 SSD +raid盘的方式作为存储介质来提升性能。但受限于本地盘的容量上限以及 SSD 盘的价格，用户很难在容量、成本和性能这三者之间找到一个好的平衡。由于JuiceFS 是基于对象存储实现并完全兼容 POSIX 的开源分布式文件系统，同时 JuiceFS 的数据缓存特性可以智能管理查询热点数据，非常适合作为 ClickHouse 的存储系统，下面将详细介绍这个方案。\n\n## 方案细节\n\n由于JuiceFS完全兼容POSIX协议，因此可以将JuiceFS mount到本地磁盘，不同的节点可以都使用同一个JuiceFS进行mount，并使用不同的目录进行区别。\n\n为了演示，使用hdfs作为JuiceFS的存储，使用redis作为JuiceFS的元数据存储。\n\n### 初始化JuiceFS\n\n```shell\njuicefs  format --storage hdfs \\\n--bucket nn1.local.hadoop3.hy:8020,nn2.local.hadoop3.hy:8020 \\\n--access-key <user>@<token> \\\nredis://:<pwd>@<ip>:<port>/<db>  jfsck\n```\n\n### mount JuiceFS\n\n```shell\nsudo juicefs mount --cache-dir /data5/jfsCache -d redis://:<pwd>@<ip>:<port>/<db> /mnt/jfshdfs\n```\n\n### 配置clickhouse磁盘和存储策略\n\n```\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<clickhouse>\n    <storage_configuration>\n        <disks>            \n            <default>\n             <keep_free_space_bytes>1048576000</keep_free_space_bytes>\n            </default>\n            <data2>\n                <path>/data2/clickhouse/data/</path>\n                <keep_free_space_bytes>1048576000</keep_free_space_bytes>\n            </data2>   \n            <hdfs>\n                <path>/mnt/jfshdfs/68/</path>\n            </hdfs>\n        </disks>\n        <policies>\n            <default>\n                <volumes>\n                    <cold>\n                        <disk>default</disk>\n                        <disk>data2</disk>\n                    </cold>            \n                </volumes>\n                <move_factor>0.2</move_factor>\n            </default>\n            <cold>\n                <volumes>\n                    <backup>\n                        <disk>hdfs</disk>\n                    </backup>\n                </volumes>\n            </cold>\n            <hot_cold>\n                <volumes>\n                    <hot>\n                        <disk>default</disk>\n                        <disk>data2</disk>\n                        <max_data_part_size_bytes>104857600</max_data_part_size_bytes>\n                    </hot>\n                    <cold>\n                        <disk>hdfs</disk>\n                    </cold>                                    \n                </volumes>\n                <move_factor>0.2</move_factor>\n            </hot_cold>\n          </policies>\n    </storage_configuration>\n</clickhouse>\n```\n\n配置中定义了`hot_cold`策略，该策略中包含`hot`和`cold`两个磁盘卷，`hot`中指定的是两个本地磁盘，`cold`中指定的是JuiceFS远程共享文件系统，`max_data_part_size_bytes`表示可以存储在卷的任何磁盘上的部分的最大大小。如果合并部分的大小估计大于 max_data_part_size_bytes，则该部分将被写入下一个卷。基本上，此功能允许将新/小部件保留在热 (SSD) 卷上，并在它们达到大尺寸时将它们移至冷 (HDD) 卷。为了测试这里设置为100M`move_factor`配置表示当磁盘的容量超过 80% 时触发数据移动到 JuiceFS。\n\n### 建表测试\n\n#### 建表\n\n新建一张按天分区的表，默认的存储策略设置为`hot_cold`, 设置超过20天的数据`move`到`cold`磁盘卷中\n\n```\nCREATE TABLE default.t_report_yspwl_dm_transm_mk_info2_day\n(\n    `day` Date DEFAULT toDate(its),\n    `its` UInt32,\n    `appid` Int32,\n    `line` Int32,\n    `user_isp` LowCardinality(String),\n    `user_province` LowCardinality(String),\n    `cdnip` LowCardinality(String),\n    `networktype` LowCardinality(String),\n    `game_name` LowCardinality(String),\n    `p2p` Int32,\n    `p2p_origin_type` LowCardinality(String),\n    `harddecode` Int32,\n    `bad_cnt` Int64,\n    `log_cnt` Int64,\n    `tot_log_cnt` Int64,\n    `repeat_times` Int64,\n    `_cnt` UInt32 DEFAULT CAST(1, 'UInt32'),\n    `peak_flag` Int32\n)\nENGINE = MergeTree\nPARTITION BY toYYYYMMDD(day)\nORDER BY its\nTTL day + toIntervalDay(20) TO VOLUME 'cold'\nSETTINGS index_granularity = 8192, storage_policy = 'hot_cold'\n```\n\n#### 插入数据\n\n1. 当插入20天前的数据，parts会直接写入到`cold`中\n2. 当插入`2021-12-17`号的数据，查看parts分布\n\n![image-20220103153506496](../../images/clickhouse/juicefs-1.png)\n\n过一会等后台线程merge后再查看,可以看到17号的数据大于100MB的parts被存进了cold存储中\n\n![image-20220103154047920](../../images/clickhouse/juicefs-2.png)\n\n查看目录文件\n\n![image-20220103154700397](../../images/clickhouse/juicefs-3.png)\n\n","tags":["运维"],"categories":["clickhouse"]},{"title":"about","url":"/about/index.html","content":"\n关于"},{"title":"404","url":"//404.html","content":"\n```\n  ██╗  ██╗ ██████╗ ██╗  ██╗    ███╗   ██╗ ██████╗ ████████╗\n  ██║  ██║██╔═████╗██║  ██║    ████╗  ██║██╔═══██╗╚══██╔══╝\n  ███████║██║██╔██║███████║    ██╔██╗ ██║██║   ██║   ██║\n  ╚════██║████╔╝██║╚════██║    ██║╚██╗██║██║   ██║   ██║\n       ██║╚██████╔╝     ██║    ██║ ╚████║╚██████╔╝   ██║\n       ╚═╝ ╚═════╝      ╚═╝    ╚═╝  ╚═══╝ ╚═════╝    ╚═╝\n\n      ███████╗ ██████╗ ██╗   ██╗███╗   ██╗██████╗\n      ██╔════╝██╔═══██╗██║   ██║████╗  ██║██╔══██╗\n      █████╗  ██║   ██║██║   ██║██╔██╗ ██║██║  ██║\n      ██╔══╝  ██║   ██║██║   ██║██║╚██╗██║██║  ██║\n      ██║     ╚██████╔╝╚██████╔╝██║ ╚████║██████╔╝\n      ╚═╝      ╚═════╝  ╚═════╝ ╚═╝  ╚═══╝╚═════╝\n```\n"},{"title":"Documentation","url":"/docs/index.html","content":"\n### Elegant and Powerful Theme for Hexo\n\nTheme NexT has the following features:\n\n* No jQuery.\n* Support [native dark mode](https://caniuse.com/prefers-color-scheme).\n* Support Pjax to deliver a fast browsing experience.\n* Integrated KaTeX and MathJax mathematical formula rendering.\n* Integrated PDF.js and mermaid diagram.\n* Support Disqus, Changyan, LiveRe, Gitalk, Utterances and Isso comment systems.\n* Support a large number of third-party statistics and content sharing services.\n* Easy to customize content or modify style.\n\n### Four Schemes in One\n\nBy using different Schemes in NexT, you can simply change the style of your blog, and nearly all options can be used in all schemes.\n\n{% darkmode_preview %}\n\n### Multilingual Support\n\nThanks to the contribution of our users and developers, [NexT now supports over 20 languages](/docs/theme-settings/internationalization.html#Choosing-Language).\n\n{% gp 3-1 %}\n![English translation](/images/en.png)\n![Chinese translation](/images/cn.png)\n![Russian translation](/images/ru.png)\n{% endgp %}\n\n### Code Highlighting Themes\n\nNexT uses code highlighting themes from the [Highlight.js](https://highlightjs.org) and [Prism](https://prismjs.com) package, and makes [more than 120 themes](/docs/theme-settings/miscellaneous.html#Codeblock-Style) available to you.\n\n<!-- Inspired by https://github.com/sindresorhus/css-in-readme-like-wat -->\n| Tomorrow                  | Tomorrow Night                  | Tomorrow Night Eighties                             |\n| :-----------------------: | :-----------------------------: | :-------------------------------------------------: |\n| ![Tomorrow][Tomorrow]     | ![Tomorrow Night][]             | ![Tomorrow Night Eighties][Tomorrow Night Eighties] |\n\n| Tomorrow Night Blue                         | Tomorrow Night Bright                           | Default                  |\n| :-----------------------------------------: | :---------------------------------------------: | :----------------------: |\n| ![Tomorrow Night Blue][Tomorrow Night Blue] | ![Tomorrow Night Bright][Tomorrow Night Bright] | ![Default][Default]      |\n\n### Supported Browsers\n\nWe design NexT to support the latest web browsers. We support the current versions of Chrome, Firefox, Safari, and Microsoft Edge. Many CSS3 and ES6 features are used in theme NexT, including CSS Variables, Destructuring assignment, Arrow functions and Spread operator.\n\n| Browser | Supported versions | Release date | Limitation\n| - | - | - | - |\n<i class=\"fab fa-internet-explorer fa-2x\"></i> IE | N/A | Oct 17, 2013 | N/A |\n<i class=\"fab fa-edge fa-2x\"></i> Edge | 79+ | Jan 15, 2020 | [Destructuring rest parameters](https://caniuse.com/mdn-javascript_functions_rest_parameters_destructuring) |\n<i class=\"fab fa-firefox-browser fa-2x\"></i> Firefox | 52+ | Mar 7, 2017 | Destructuring rest parameters |\n<i class=\"fab fa-chrome fa-2x\"></i> Chrome | 49+ | Mar 3, 2016 | [CSS Variables](https://caniuse.com/css-variables) |\n<i class=\"fab fa-safari fa-2x\"></i> Safari | 10+ | Sep 20, 2016 | [Arrow functions](https://caniuse.com/arrow-functions) |\n<i class=\"fab fa-opera fa-2x\"></i> Opera | 37+ | May 4, 2016 | [Spread in array literals](https://caniuse.com/mdn-javascript_operators_spread_spread_in_arrays) |\n\nSome other new Web APIs, such as [IntersectionObserver](https://caniuse.com/intersectionobserver) and [Fetch API](https://caniuse.com/fetch), are used by NexT plugins. They are not core functions of NexT, so we have no plans to make them compatible with legacy browsers.\n\nIn addition, [CSS position: sticky](https://caniuse.com/css-sticky) is used for sidebar positioning. On browsers that do not support this property, its fallback style `position: static` will be used.\n\n### Customize Your NexT\n\nNexT have flexible but simple options, and you can make your own blog with built-in third-party support. Now let's [get started](/docs/getting-started/).\n\n[Tomorrow]: /images/tomorrow.svg\n[Tomorrow Night]: /images/tomorrow-night.svg\n[Tomorrow Night Eighties]: /images/tomorrow-night-eighties.svg\n[Tomorrow Night Blue]: /images/tomorrow-night-blue.svg\n[Tomorrow Night Bright]: /images/tomorrow-night-bright.svg\n[Default]: /images/default.svg\n"},{"title":"Troubleshooting","url":"/docs/troubleshooting.html","content":"\n### Quick Debug Instructions\n\n**Before submitting an Issue on GitHub, you can follow the steps below to debug:**\n\nIf you get an error message from Hexo or your browser:\n\n* If the error comes from a Hexo plugin, such as hexo-word-counter, please submit an Issue to its GitHub repository.\n* If the error comes from a third-party service, such as the Gitalk comment system, please submit an Issue to its GitHub repository.\n* Otherise, please search in Google / Stackoverflow / GitHub Issues, or report it to us when submitting a new Issue.\n\nThe following steps will help you determine the cause of the problem:\n\n* Execute `hexo clean`, clear the browser cache and purge CDN cache (or disable all CDN services) - This may take some time to take effect.\n* Disable browser plug-ins or use other devices and browsers to test, because bugs may only occur in specific browsers.\n* Switch to another theme and check if the bug still exists (e.g. default theme landscape). In other words, prove that this is a bug of NexT, not Hexo.\n* Upgrade theme NexT to the latest version.\n* Upgrade Hexo and all Hexo plugins to the latest version.\n* Upgrade or downgrade Node.js to the latest LTS version.\n* Uninstall all non-essential Hexo plugins, or delete `node_modules` and then reinstall all plugins using `npm install --force`.\n\nIf you decide to submit an Issue, please answer the following questions based on the Issue template:\n\n* Can you reproduce the problem? Can you reliably reproduce the issue? If not, provide details about how often the problem happens and under which conditions it normally happens.\n* Did the problem start happening recently or was this always a problem?\n* If the problem started happening recently, can you reproduce the problem in an older version of NexT? What's the most recent version in which the problem doesn't happen? You can download older versions of NexT from [the releases page](https://github.com/next-theme/hexo-theme-next/releases).\n* Which version of Node, Hexo and NexT are you using? You can get the exact version by running `node -v`, `hexo version` in your terminal.\n* Which packages do you have installed? You can get that list by copying the output from `npm ls --depth 0` in Hexo root directory.\n\n### Keep Up Indentation\n\nWhen you edit any YAML configs, always need to keep up indents.\nCurrently, in all Hexo and NexT configuration files parameters uses **2 spaces indents** from parent option.\n\nFor example, we want to change NexT scheme from `Muse` to `Gemini` with [Alternate Theme Config](/docs/getting-started/configuration.html#theme-config):\n\n{% tabs keep-up-indentation %}\n<!-- tab NexT Config → -->\nWe open {% label primary@theme config file %} and under the «Scheme Settings» section copy the following parameters:\n\n```yml next/_config.yml\n# ---------------------------------------------------------------\n# Scheme Settings\n# ---------------------------------------------------------------\n\nscheme: Muse\n#scheme: Mist\n#scheme: Pisces\n#scheme: Gemini\n```\n<!-- endtab -->\n\n<!-- tab Hexo Config -->\nThen we open {% label info@site config file %} and paste these parameters under `theme_config` section:\n\n{% subtabs 2-spaces-indents %}\n<!-- tab {% label danger@Nothing Happen %}-->\n```yml hexo/_config.yml\ntheme_config:\n\n#scheme: Muse\n#scheme: Mist\n#scheme: Pisces\nscheme: Gemini\n```\n\nNothing will happen here because indentation not keeped up. Hexo just can't read these parameters because subparameters (children parameters of `theme_config` parameter) does not exist. Let's see [same configuration with indents](#2-spaces-indents-2).\n<!-- endtab -->\n\n<!-- tab {% label success@Working Normally %}-->\n```yml hexo/_config.yml\ntheme_config:\n\n  #scheme: Muse\n  #scheme: Mist\n  #scheme: Pisces\n  scheme: Gemini\n```\n\nAnd here Hexo can read these parameters as `theme_config.scheme: Gemini` in same way, as NexT can read `scheme: Gemini` parameter. So, with 2 spaces indents from parent option(s) Hexo will load all NexT parameters and work as expected.\n<!-- endtab -->\n{% endsubtabs %}\n\n<!-- endtab -->\n{% endtabs %}\n\n### TOC Issues\n\nDo not write a skip-level heading in the post. For example, a third-tier heading `###` followed by a `#####` is not recommended.\nSee: https://github.com/theme-next/hexo-theme-next/issues/882\n\nIf you are using `hexo-renderer-markdown-it`, it's recommended to install `markdown-it-named-headings` to make the TOC work correctly.\n\n```bash\nnpm install markdown-it-named-headings\n```\n\nSee: https://github.com/theme-next/hexo-theme-next/issues/1168\nHere is the [Pull Request with bugfix for default config](https://github.com/hexojs/hexo-renderer-markdown-it/pull/90) of `hexo-renderer-markdown-it` plugin.\n\n### Favicon Set but Doesn't Work\n\nPut your `favicon` under {% label info@site's %} `source` dir. If you find that your Favicon doesn't work, please clean your browser's cache first and then visit your Favicon's URL directly, which should be `http(s)://your-domain.com/favicon.ico`.\n\n{% note warning %}\nIf your site is in a subdirectory please set it to `favicon: favicon.ico`.\n{% endnote %}\n"},{"title":"Plugins","url":"/plugins/index.html","content":"\n### Hexo Plugins\n\n* [hexo-generator-searchdb](https://github.com/next-theme/hexo-generator-searchdb)\n* [hexo-filter-emoji](https://github.com/next-theme/hexo-filter-emoji)\n* [hexo-pangu](https://github.com/next-theme/hexo-pangu)\n* [hexo-filter-mathjax](https://github.com/next-theme/hexo-filter-mathjax)\n* [hexo-word-counter](https://github.com/next-theme/hexo-word-counter)\n\n### NexT Plugins\n\n* [hexo-next-three](https://github.com/next-theme/hexo-next-three)\n* [hexo-next-fireworks](https://github.com/next-theme/hexo-next-fireworks)\n* [hexo-next-exif](https://github.com/next-theme/hexo-next-exif)\n\n---\n\n* Visit the [Awesome NexT](https://github.com/next-theme/awesome-next) list for more plugins.\n"},{"title":"文章分类","url":"/tags/index.html","content":"\nclickhouse"},{"title":"Front Matter","url":"/docs/advanced-settings/front-matter.html","content":"\n> Front-matter is a block of YAML or JSON at the beginning of the file that is used to configure settings for your writings. Front-matter is terminated by three dashes when written in YAML or three semicolons when written in JSON.  \n— from [Hexo site](https://hexo.io/docs/front-matter).\n\n**YAML**\n\n```yml\n---\ntitle: Hello World\ndate: 2013/7/13 20:46:25\n---\n```\n\n**JSON**\n\n```json\n\"title\": \"Hello World\",\n\"date\": \"2013/7/13 20:46:25\"\n;;;\n```\n\nNext extends and provide more variables. It allows users to configure a single page.\n\n### Settings & Their Default Values\n\nSetting | Type | Description | Default\n--- | --- | --- | ---\n`author` | `string` | Author name for post copyright | `author` in Hexo `_config.yml`\n`post_link` | `string` | Post link | None\n`description` | `string` | Docs [here](/docs/theme-settings/posts.html#Preamble-Text) | None\n`direction` | `string` | Available value: `rtl` | None\n`header` | `boolean` | Whether to display the post header in index page | `true`\n`mathjax` | `boolean` | MathJax support | `math.every_page` in `_config.yml`\n`sidebar` | `boolean` | Whether the sidebar will be shown | Depends on `sidebar.display` in `_config.yml`\n`copyright` | `boolean` | Whether to display copyright notices below the post with `theme.creative_commons.license` and `theme.creative_commons.post` enabled | `true`\n`sticky` | `number` | Pin the post to the top of the index page. [hexo-generator-index](https://github.com/hexojs/hexo-generator-index) plugin required | 0\n`quicklink` | `object` (1) | Quicklink support | From `_config.yml`\n`reward_settings` | `object` (1) | Reward settings | From `_config.yml`\n`toc` | `object` (1) | Table of Contents in the sidebar | From `_config.yml`\n\n(1): They have the same structure as the options in {% label primary@theme config file %}.\n\n**Example**\n\n```yml\ntoc:\n  enable: true\n  number: false\n  max_depth: 3\nreward_settings:\n  enable: true\n  comment: Buy me a coffee\nquicklink:\n  enable: true\n  delay: true\n  timeout: 3000\n  priority: true\n```\n\n### Undocumented Front-matter Variables\n\nThe following variables are not mentioned in the Hexo documentation, but are required by [hexo-theme-unit-test](https://github.com/hexojs/hexo-theme-unit-test).\n\nSetting | Type | Example\n--- | --- | ---\n`link` | `string` | [link-post](https://github.com/hexojs/hexo-theme-unit-test/blob/master/source/_posts/link-post.md)\n`photos` | `array` | [gallery-post](https://github.com/hexojs/hexo-theme-unit-test/blob/master/source/_posts/gallery-post.md)\n"},{"title":"Advanced Settings","url":"/docs/advanced-settings/index.html","content":"\nBesides common [Theme Settings](/docs/theme-settings/) and [Third-party Services](/docs/third-party-services/), NexT supports some advanced settings which makes NexT customizable.\nPlease note that those settings may lead to abnormal behavior if they are wrong. Change them only when you know for what they are.\n\n* [Vendors](/docs/advanced-settings/vendors.html)\n* [Custom Files](/docs/advanced-settings/custom-files.html)\n* [Injects](/docs/advanced-settings/injects.html)\n* [Front-matter](/docs/advanced-settings/front-matter.html)\n"},{"title":"Custom Files","url":"/docs/advanced-settings/custom-files.html","content":"\n### Custom File Support\n\n[Pull Request #868](https://github.com/theme-next/hexo-theme-next/pull/868) has adjusted the way of customizing the layout or style, canceling the custom files (such as `_custom/custom.styl`) in the original theme directory, and only retaining the way of specifying the custom file in the {% label primary@theme config file %}.\n\nIt is a good practice to separate the custom files from the theme files, so that you can add custom content without modifying the original source code of the theme, and avoid conflicts due to `git merge`.\n\nAs with [Data Files](https://hexo.io/docs/data-files), you can place all custom layouts or styles in a specific location (for example: `hexo/source/_data`). Add the custom file to `hexo/source/_data` and uncomment the content under the `custom_file_path` section in the {% label primary@theme config file %}.\n\n{% note warning %}\nThe file name and path must be the same in `custom_file_path`.\n{% endnote %}\n\n```yml next/_config.yml\ncustom_file_path:\n  #head: source/_data/head.njk\n  #header: source/_data/header.njk\n  #sidebar: source/_data/sidebar.njk\n  #postMeta: source/_data/post-meta.njk\n  #postBodyEnd: source/_data/post-body-end.njk\n  #footer: source/_data/footer.njk\n  #bodyEnd: source/_data/body-end.njk\n  #variable: source/_data/variables.styl\n  #mixin: source/_data/mixins.styl\n  #style: source/_data/styles.styl\n```\n\nIn addition to `custom_file_path`, we also provide a more flexible way to customize, you can read the [Theme Inject](/docs/advanced-settings/injects.html) in documentation.\n\n### Examples of Modifying Layout\n\n#### Live2d Widget\n\nEdit `source/_data/head.njk` in {% label info@site root directory %} and add the following content:\n\n```html hexo/source/_data/head.njk\n<script src=\"https://cdn.jsdelivr.net/gh/stevenjoezhang/live2d-widget@latest/autoload.js\"></script>\n```\n\nThen uncomment `head` under the `custom_file_path` section in {% label primary@theme config file %}.\n\n```yml next/_config.yml\ncustom_file_path:\n  head: source/_data/head.njk\n```\n\n#### Netlify Logo in Sidebar\n\nEdit `source/_data/sidebar.njk` in {% label info@site root directory %} and add the following content:\n\n```html hexo/source/_data/sidebar.njk\n<div class=\"cc-license animated\" itemprop=\"sponsor\">\n  <a href=\"https://www.netlify.com\" class=\"cc-opacity\" title=\"Deploy with Netlify → https://www.netlify.com\" target=\"_blank\"><img width=\"80\" src=\"https://www.netlify.com/img/global/badges/netlify-dark.svg\" alt=\"Netlify\"></a>\n</div>\n```\n\nThen uncomment `sidebar` under the `custom_file_path` section in {% label primary@theme config file %}.\n\n```yml next/_config.yml\ncustom_file_path:\n  sidebar: source/_data/sidebar.njk\n```\n\n### Examples of Modifying Style\n\n#### How to Change Content Width\n\nBy default NexT has following setting of content width:\n\n* 700px → when screen width < 1200px.\n* 800px → when screen width >= 1200px.\n* 900px → when screen width >= 1600px.\n* In mobile / tablet devices it will use responsive width.\n\nYou can override the default content width by editing `source/_data/variables.styl` in {% label info@site root directory %} and add varibles:\n\n{% tabs change-content-width %}\n<!-- tab Muse / Mist schemes -->\nDefault variables for both Muse and Mist schemes are located in `source/css/_variables/base.styl` and defined as:\n\n```styl next/source/css/_variables/base.styl\n$content-desktop         = 700px\n$content-desktop-large   = 800px\n$content-desktop-largest = 900px\n```\n\nFor example, you want wider content width. You may redefine this variables with percentage width:\n\n```styl hexo/source/_data/variables.styl\n$content-desktop         = 90%\n$content-desktop-large   = 90%\n$content-desktop-largest = 90%\n```\n\n{% note warning %}\nIf values will in percents, during opening sidebar will dynamically decrease content width to defined by you percent.\nBut in standard behaviour, sidebar must displace content from yourself.\nTo around it, you can specify content width in `em`:\n\n```styl hexo/source/_data/variables.styl\n$content-desktop         = 50em\n$content-desktop-large   = 55em\n$content-desktop-largest = 60em\n```\n\n{% endnote %}\n<!-- endtab -->\n\n<!-- tab Pisces / Gemini schemes -->\nDefault variables for Pisces (and Gemini) scheme are located in `source/css/_variables/Pisces.styl` and defined as:\n\n```styl next/source/css/_variables/Pisces.styl\n$content-desktop         = 'calc(100% - %s)' % unit($content-desktop-padding / 2, 'px')\n$content-desktop-large   = 1160px\n$content-desktop-largest = 73%\n```\n\n{% note warning %}\n`$content-desktop` value in this schemes is auto-responsive by default. It can be changed to any value too, but for better content visibility recommended to stay it as is.\n{% endnote %}\n\nIn this schemes content width was defined on maximum and already balanced: if desktop width will be wider – content width will more narrowed for easier reading. But if you want to make more narrow content width in wider desktops, here is example:\n\n```styl hexo/source/_data/variables.styl\n$content-desktop-large   = 65em\n$content-desktop-largest = 65%\n```\n\n{% note info %}\nIn fact, Gemini scheme is just fork of Pisces scheme with some style improvements.\nTherefore, almost all part of variables from Pisces scheme are imported to Gemini scheme too.\nSo, if you want to add any variables or styles to both Pisces and Gemini schemes, need to edit values just in Pisces scheme.\n{% endnote %}\n<!-- endtab -->\n{% endtabs %}\n\nThen uncomment `variable` under the `custom_file_path` section in {% label primary@theme config file %}.\n\n```yml next/_config.yml\ncustom_file_path:\n  variable: source/_data/variables.styl\n```\n\n#### Hide Sidebar on Mobile\n\nEdit `source/_data/styles.styl` in {% label info@site root directory %} and add styles:\n\n```css hexo/source/_data/styles.styl\n+tablet-mobile() {\n  .sidebar-toggle, .sidebar {\n    display: none;\n  }\n}\n```\n\nThen uncomment `style` under the `custom_file_path` section in {% label primary@theme config file %}.\n\n```yml next/_config.yml\ncustom_file_path:\n  style: source/_data/styles.styl\n```\n\n#### Hide \"Keep on posting\" in Archive Page\n\nEdit `source/_data/styles.styl` in {% label info@site root directory %} and add styles:\n\n```css hexo/source/_data/styles.styl\n.archive .collection-title {\n  display: none !important;\n}\n```\n\nThen uncomment `style` under the `custom_file_path` section in {% label primary@theme config file %}.\n\n```yml next/_config.yml\ncustom_file_path:\n  style: source/_data/styles.styl\n```\n"},{"title":"Injects","url":"/docs/advanced-settings/injects.html","content":"\n### Injects\n\nWe extended the Hexo filter and added `theme_inject`, so user can add the desired custom content to any injection point.\n\n#### Synopsis\n\n```js\nhexo.extend.filter.register('theme_inject', function(injects) {\n  // ...\n});\n```\n\nA injects argument will get passed into the function, so we can use it add custom code in `injectPoint` as following.\n\nFor inject view:\n\n```js\n// The name of same `injectPoint` suggest be unique. If same, it will override low priority configurations.\n// `locals` and `options` is the same as partial https://hexo.io/docs/helpers#partial.\n// `order` defines the order of injection, which by default depends on the priority of injection.\nhexo.extend.filter.register('theme_inject', function(injects) {\n  // it will put code from this filePath into injectPoint.\n  injects.[injectPoint].file(name, filePath, [locals, options, order]);\n  // it will put raw string as code into injectPoint.\n  injects.[injectPoint].raw(name, raw, [locals, options, order]);\n});\n```\n\n{% note warning %}\nYou have to note `filePath`, it must be absolute path or relative to `hexo_dir`.\n{% endnote %}\n\nFor inject style:\n\n```js\nhexo.extend.filter.register('theme_inject', function(injects) {\n  // it will put styleFile into injectPoint.\n  injects.[injectPoint].push(styleFile);\n});\n```\n\nThese are many `injectPoint`, defined in [`injects-point.js`](https://github.com/next-theme/hexo-theme-next/blob/master/scripts/events/lib/injects-point.js)\n\n```js\nmodule.exports = {\n  views: ['head', 'header', 'sidebar', 'postMeta', 'postBodyEnd', ..., 'footer', 'bodyEnd'],\n  styles: ['variable', 'mixin', 'style']\n};\n```\n\n`custom_file_path` also uses this API, see [`default-injects.js`](https://github.com/next-theme/hexo-theme-next/blob/master/scripts/filters/default-injects.js). It will consume `custom` name in view inject points. So if you use `custom_file_path`, please not use `custom`.\n\n#### Examples\n\n**One:** load a custom script. We can add it in `bodyEnd`.\n\n```js\nhexo.extend.filter.register('theme_inject', function(injects) {\n  injects.bodyEnd.raw('load-custom-js', '<script src=\"js-path-or-cdn.js\"></script>', {}, {cache: true});\n});\n```\n\n**Two:** add a custom `my-favourite-food.njk` to sidebar.\n\nStep1: you should create `my-favourite-food.njk` in any path(e.g. `source/_data/`) as below. You can get variable from `hexo` or `local` defined in filter.\n\n```jinja\n{% for food in foods %}\n  <div>{{ food }}</div>\n{% endfor %}\n```\n\nStep2: add filter to load it.\n\n```js\nhexo.extend.filter.register('theme_inject', function(injects) {\n  injects.sidebar.file('my-favourite-food', 'source/_data/my-favourite-food.njk', {\n    foods: ['apple', 'orange']\n  });\n});\n```\n\n**Three:** want to have big header, put `big-header.styl` to NexT.\n\nOf course, you need to create this file first(e.g. `source/_data/big-header.styl`).\n\n```css\nh1 {\n  font-size: 2rem;\n}\n```\n\nAnd then add it in filter.\n\n```js\nhexo.extend.filter.register('theme_inject', function(injects) {\n  injects.style.push('source/_data/big-header.styl');\n});\n```\n\n#### Plugin\n\nWe also support hexo's plugin system, which makes it easy to extend functions without modifying the source code of the core module. You can see <https://hexo.io/docs/plugins.html#Plugin> to learn how to create a plugin.\n"},{"title":"Vendors","url":"/docs/advanced-settings/vendors.html","content":"\n### CDN Settings\n\nYou can specify a proper CDN provider in the `vendors` section in {% label primary@theme config file %}, which can make the static assets of plugins load faster.\n\n```yml next/_config.yml\nvendors:\n  # The CDN provider of NexT internal scripts.\n  # Available values: local | jsdelivr | unpkg | cdnjs\n  # Warning: If you are using the latest master branch of NexT, please set `internal: local`\n  internal: local\n  # The default CDN provider of third-party plugins.\n  # Available values: local | jsdelivr | unpkg | cdnjs\n  # Dependencies for `plugins: local`: https://github.com/next-theme/plugins\n  plugins: jsdelivr\n```\n\n#### Core Plugins\n\n`internal: local` is used to set how to load the core plugins, e.g. `source/js/utils.js`. These plugins are loaded from your site by default, they are required by the basic functions of NexT. Set `internal` to `jsdelivr`, `unpkg` or `cdnjs` to load them from the corresponding CDN.\n\n{% note info %}\nIf your site is deployed to any free hosting service (Github, Gitlab, etc.), CDN links are recommended for core plugins. CDN usually has faster speeds and no traffic restrictions.\n{% endnote %}\n\n{% note danger %}\nIf you are using the latest master branch of NexT, please set `internal: local`.\n{% endnote %}\n\n#### Third-party Plugins\n\n`plugins: jsdelivr` is used to set how to load the third-party plugins, e.g. `anime.js`. Third-party plugins are loaded from [jsDelivr](https://www.jsdelivr.com/) CDN by default, because jsDelivr has the valid ICP license issued by the Chinese government, it can be accessed in China pretty well.\n\nAnd we also provide other optional CDNs, including the famous [UNPKG](https://unpkg.com) and [CDNJS](https://cdnjs.com). These CDN providers are chosen to deliver our third-party plugins because they are fast and reliable. Set `plugins` to `unpkg` or `cdnjs` to load them from different CDN provider.\n\n{% note warning %}\nParticularly, if you are a Chinese blogger or most of your visits come from China, please note that **the CDNJS is blocked in some parts of China**, don't use it as your CDN provider.\n{% endnote %}\n\n{% note info %}\nIf your would like to load all third-party plugins from your site, please set `plugins` to `local` and install the `@next-theme/plugins` package: https://github.com/next-theme/plugins\nIf your website is deployed in the local area network, then this will have a faster loading speed than CDN services.\n{% endnote %}\n\n#### Custom CDN URLs\n\nSometimes you may need to use other CDNs not included in the available values of `vendors.plugins` option. In the `vendors` section, you can configure the CDN URL of each library individually.\n\nThe config is in format of `libname: CDN URL`. The `libname` is the same as in the `_vendors.yml` file. The `CDN URL` will override the default one.\n\nFor example, if you want to set the CDN URL for `anime`, go to {% label primary@theme config file %} and add a key named `anime` in the `vendors` section, and set its value to the CDN URL of anime.js:\n\n```yml next/_config.yml\nvendors:\n  # ...\n  # Some contents...\n  # ...\n  anime: //cdn.jsdelivr.net/gh/juliangarnier/anime@latest/lib/anime.min.js\n```\n\nIt's recommended to use the same version of the library as in `_vendors.yml` to avoid potential problems. And if you need other versions you need to test them first.\n\nRemember to use the HTTPS protocol of CDN links when you enable HTTPS on your site.\n\n{% note info %}\njsDelivr does not only provide mirrors for the files from npm packages, but also fetch from the GitHub releases! We could use the following link to reference the js files, just as other CDNs.\n\n```\n//cdn.jsdelivr.net/gh/user/repo@version/file\n```\n\nAnd it could automatically minify the JS and CSS files, even if you don't have the minified version. Just use the `filename.min.js` or the `filename.min.css` to replace the file above. For more information: https://www.jsdelivr.com/features\n{% endnote %}\n"},{"title":"Configuration","url":"/docs/getting-started/configuration.html","content":"\nHow to configure Hexo and NexT? The traditional approach is to store some options in {% label info@site config file %} and other options in {% label primary@theme config file %}. This approach is applicable, but it is not smooth to update NexT theme from pulling or downloading new releases.\n\nAt present, NexT encourages users to use the Alternate Theme Config. It's a feature of Hexo and the documentation is here: [Hexo Configuration](https://hexo.io/docs/configuration.html#Using-an-Alternate-Config).\n\nThis tutorial shows you how to configure NexT using Alternate Theme Config. Please choose only one of the following solutions and resume next steps.\n\n### `_config.[name].yml`\n\nWith this way, all your configurations locate in config file `/_config.[name].yml`. Replace `[name]` with the value of `theme` option in {% label info@site config file %}, e.g. `next`.\n\n#### Usage\n\n1. Please ensure you are using Hexo 5.0 (or later).\n2. Create a config file in site's root directory, e.g. `_config.next.yml`.\n3. Copy needed NexT theme options from {% label primary@theme config file %} into this config file. If it is the first time to install NexT, then copy the whole {% label primary@theme config file %} by the following command:\n\n    ```bash\n    # Installed through npm\n    cp node_modules/hexo-theme-next/_config.yml _config.next.yml\n    # Installed through Git\n    cp themes/next/_config.yml _config.next.yml\n    ```\n\n### `theme_config`\n\nWith this way, all your configurations locate in main {% label info@site config file %}. You don't need to edit {% label primary@theme config file %} or create any new files. But you need to **[keep up indentation](/docs/troubleshooting.html#Keep-Up-Indentation)** within `theme_config` option.\n\n#### Usage\n\n1. Please confirm that the `/source/_data/next.yml` file does not exist (backup and delete it if exists).\n2. Copy needed NexT theme options from {% label primary@theme config file %} into {% label info@site config file %}, then\n    2.1. Move all this settings to the right with two spaces (in Visual Studio Code: select all strings, <kbd>CTRL</kbd> + <kbd>]</kbd>).\n    2.2. Add `theme_config:` parameter above all this settings.\n\n### `next.yml` (Deprecated)\n\nOlder versions of NexT theme also provide another configuration method, which is to place the theme configuration in the `/source/_data/next.yml` file. This method is deprecated, please use `_config.next.yml` instead. If the `/source/_data/next.yml` file exists, move it to the Hexo root directory and rename it to `_config.next.yml`.\n"},{"title":"Deployment","url":"/docs/getting-started/deployment.html","content":"\n### Local Deployment\n\n1. Modify files locally.\n2. Localization testing: `hexo clean && hexo s`.\n3. Deployment: `hexo g -d`.\n\n{% note warning %}\nFor NexT version prior to 8.0.0, the core plugins are placed in the `lib` directory. If you are using macOS with `hexo-deployer-git`, make sure that `lib/` directory is not ignored by git (e.g. check `~/.gitignore_global`). Otherwise some necessary files may be missing after the deployment.\n{% endnote %}\n\n### Continuous Integration\n\n* Edit the file directly online, effective immediately\n* Automatic deployment, simultaneous deployment to multiple locations\n\n#### Netlify\n\nNetlify is an all-in-one platform for automating modern web projects. Replace your hosting infrastructure, continuous integration, and deployment pipeline with a single workflow. Integrate dynamic functionality like serverless functions, user authentication, and form handling as your projects grow.\n\nPerhaps you have already found that this website is deployed on Netlify. Checkout `deploy.sh` and `netlify.toml` in [theme-next-docs](https://github.com/next-theme/theme-next-docs) repository for more information.\n\n#### GitHub Actions\n\nThis Github Action automating Hexo deployment workflow, to allow you to leverage GitHub Actions to publish your Hexo site on Github Pages: [hexo-action](https://github.com/sma11black/hexo-action).\n\n#### Travis CI\n\nTravis CI enables your team to test and ship your apps with confidence. It's built for everyone and for projects and teams of all sizes, supporting over 20 different languages out of the box, including Javascript and Node.js, Ruby, PHP, Python, Mac/iOS, as well as Docker, while giving you full control over the build environment to customize it to your own needs.\n\n{% tabs Travis CI %}\n<!-- tab Get permissions → -->\nThere are two ways to obtain the necessary permissions for Travis CI. Deploy Key has the advantage of high security, while Access Token has the advantage of being more flexible.\n\n{% subtabs Get permissions %}\n<!-- tab Access Token -->\nThis method applies to a warehouse with a private Submodule\n\n* Create an empty branch of `source` in the repository where the blog source is hosted.\n* Get the Access Token: Settings → Developer settings → Personal access token → Generate new token. Set access rights according to the actual situation. It should be noted that the access token is only displayed once on this page, and it should be copied, otherwise it can only be regenerated.\n* Use github account to log in to [Travis CI website](https://travis-ci.com/). You can find the warehouses in the current github account, select the warehouses to be deployed, and then click setting. Fill in the personal access token generated by github and select the branch that the warehouse needs to be monitored by Travis.\n\n<!-- endtab -->\n\n<!-- tab Deploy Key -->\nDeploy key is a SSH key set in your repo to grant client read-only (as well as r/w, if you want) access to your repo. This method is suitable for most public blog repositories and there are no private sub-modules in the repositories.\n\n* Create an empty branch of `source` in the repository where the blog source is hosted.\n* Generate a ssh key\n\n    ```git\n    $ ssh-keygen -t rsa -b 4096 -C \"{email}\" -f ~/.ssh/deploy_key\n    ```\n\n* Add the deployment public key in your repo, and delete it\n\n    ```git\n    $ rm -f deploy_key.pub\n    ```\n\n* Use the Travis command to encrypt private key, and add it to git\n\n    ```git\n    $ gem install travis\n    $ travis login\n    $ travis encrypt deploy_key\n    $ rm -f deploy_key\n    $ git add deploy_key.enc\n    ```\n\n<!-- endtab -->\n{% endsubtabs %}\n\n<!-- endtab -->\n<!-- tab Configure <code>.travis.yml</code> -->\n\n```yml hexo/.travis.yml\ndist: trusty\nsudo: required\n\naddons:\n ssh_known_hosts:\n   - github.com\n   - git.coding.net\n apt:\n   packages:\n     - nasm\n\nenv:\n global:\n   - TZ=Asia/Tokyo\n\nlanguage: node_js\nnode_js: node\n\nbranches:\n only:\n   - source\n\ngit:\n depth: false\n submodules: false\n\ncache:\n apt: true\n npm: true\n\nbefore_install:\n # Git Config\n - sed -i 's/git@github.com:/https:\\/\\/github.com\\//' .gitmodules\n - git config --global user.name \"YOUR-GITHUB-NAME\"\n - git config --global user.email \"YOUR-EMAIL\"\n\n # Restore last modified time\n - \"git ls-files -z | while read -d '' path; do touch -d \\\"$(git log -1 --format=\\\"@%ct\\\" \\\"$path\\\")\\\" \\\"$path\\\"; done\"\n\n # Submodules\n - git submodule update --recursive --remote --init\n\n # Deploy history\n - git clone --branch=master --single-branch YOUR-BLOG-REPO .deploy_git\n\n # SSH Setup\n - openssl aes-256-cbc -K $encrypted_693585a97b8c_key -iv $encrypted_693585a97b8c_iv -in deploy_key.enc -out deploy_key -d\n - eval \"$(ssh-agent -s)\"\n - chmod 600 ./deploy_key\n - ssh-add ./deploy_key\n\ninstall: npm install\n\nbefore_script:\n\nscript:\n - hexo clean\n - hexo g -d\n```\n\n<!-- endtab -->\n{% endtabs %}\n\n#### Gitlab CI\n\nGitLab offers a continuous integration service and pages service. If you add a `.gitlab-ci.yml` file to the root directory of your repository, and configure your GitLab project to use a Runner, then each commit or push, triggers your CI pipeline. The `.gitlab-ci.yml` file tells the GitLab runner what to do. By default it runs a pipeline with three stages: build, test, and deploy. You don't need to use all three stages; stages with no jobs are simply ignored. And at the end, your websites will be published on GitLab Host automatically.\n\n1. Add `.gitlab-ci.yml` to the root directory of your repository, and configure it.\n\n    ```yml hexo/.gitlab-ci.yml\n    image: node:lts\n\n    before_script:\n      # Set TimeZone, eg: Asia/Shanghai\n      # - export TZ='Asia/Shanghai'\n      # Restore last modified time\n      - \"git ls-files -z | while read -d '' path; do touch -d \\\"$(git log -1 --format=\\\"@%ct\\\" \\\"$path\\\")\\\" \\\"$path\\\"; done\"\n\n    pages:\n      stage: build\n      cache:\n        paths:\n        - node_modules/\n      script:\n      - npm install\n      - npx hexo deploy\n      artifacts:\n        paths:\n        - public\n      only:\n      - master\n    ```\n\n2. Upload `scaffolds`, `source`, `themes`, `.gitignore`, `.gitlab-ci.yml`, `_config.yml`, and `package.json` to [your Gitlab repository](https://gitlab.com/).\n\n    ```git\n    $ git init\n    $ ssh -T git@gitlab.com\n    $ git remote add origin YOUR-GITLAB-REPO-SSH-LINK\n    $ git add .\n    $ git commit -m \"COMMIT MESSAGE\"\n    $ git push -u origin master\n    ```\n\nNow, your static website is available at `https://yourname.gitlab.io/project` that is similar to GitHub. [More GitLab Pages config in here](https://gitlab.com/help/user/project/pages/index.md).\n\nOf course, you can also pulish static website on GitHub Pages or others pages service. There are two ways to configure `.gitlab-ci.yml`:\n\n{% tabs Gitlab CI %}\n<!-- tab <code>HTTPS</code> -->\n\n* Get the Access Token: `Settings` → `Developer settings` → `Personal access token` → `Generate new token`. Set access rights according to the actual situation. It should be noted that the access token is only displayed once on this page, and it should be copied, otherwise it can only be regenerated.\n* Click `SETTINGS-CI/CD → Variables` in Gitlab, and defined access token as custom variable `GITHUB_ACCESS_TOKEN`. Or set `USERNAME` `PASSWORD` variable for coding repo.\n* Configure `.gitlab-ci.yml`: **only add deploy stage at the end of this file**\n\n    ```yml hexo/.gitlab-ci.yml\n    github:\n      stage: deploy\n      script:\n      - cd ./public\n      - git init\n      - git config --global user.name \"YOUR-USER-NAME\"\n      - git config --global user.email \"YOUR-EMAIL\"\n      - git add .\n      - git commit -m \"gitlab-auto-deploy\"\n      - git push --force --quiet --set-upstream https://$GITHUB_ACCESS_TOKEN@github.com/username/username.github.io.git master # replace github_access_token\n      # - git config http.postBuffer 524288000\n      # - git push --force --quiet --set-upstream https://$USERNAME:$PASSWORD@git.coding.net/username/reponame.git master # replace username & password, please escape the password\n      only:\n      - master\n    ```\n<!-- endtab -->\n<!-- tab <code>SSH</code> -->\nDeploy key is a SSH key set in your repo to grant client read-only (as well as r/w, if you want) access to your repo. This method is suitable for most public blog repositories and there are no private sub-modules in the repositories.\n\n* Generate a deploy key\n\n    ```git\n    $ ssh-keygen -t rsa -b 4096 -C \"{email}\" -f ~/.ssh/deploy_key\n    ```\n\n* Click `SETTINGS-CI/CD → Variables` in Gitlab, copy the content of private key and defined it as custom variable `DEPLOY_PRIVATE_KEY`.\n* Configure `.gitlab-ci.yml`: **only update script in `before_script`**\n\n    ```yml hexo/.gitlab-ci.yml\n    before_script:\n      # Set TimeZone, eg: Asia/Shanghai\n      # - export TZ='Asia/Shanghai'\n\n      - git config --global user.name \"YOUR-USER-NAME\"\n      - git config --global user.email \"YOUR-EMAIL\"\n\n      # Restore last modified time\n      - \"git ls-files -z | while read -d '' path; do touch -d \\\"$(git log -1 --format=\\\"@%ct\\\" \\\"$path\\\")\\\" \\\"$path\\\"; done\"\n      # Install ssh-agent if not already installed, it is required by Docker.\n      # (change apt-get to yum if you use a CentOS-based image)\n      - 'which ssh-agent || ( apt-get update -y && apt-get install openssh-client -y )'\n      # Run ssh-agent (inside the build environment)\n      - eval $(ssh-agent -s)\n      # Add the SSH key stored in SSH_PRIVATE_KEY variable to the agent store\n      - ssh-add <(echo \"$DEPLOY_PRIVATE_KEY\")\n      # For Docker builds disable host key checking. Be aware that by adding that\n      # you are suspectible to man-in-the-middle attacks.\n      # WARNING: Use this only with the Docker executor, if you use it with shell\n      # you will overwrite your user's SSH config.\n      - mkdir -p ~/.ssh\n      - '[[ -f /.dockerenv ]] && echo -e \"Host *\\n\\tStrictHostKeyChecking no\\n\\n\" > ~/.ssh/config'\n      # In order to properly check the server's host key, assuming you created the\n      # SSH_SERVER_HOSTKEYS variable previously, uncomment the following two lines\n      # instead.\n      # - mkdir -p ~/.ssh\n      # - '[[ -f /.dockerenv ]] && echo \"$SSH_SERVER_HOSTKEYS\" > ~/.ssh/known_hosts'\n\n      # Install pandoc, eg: v1.19.2.1\n      # - wget https://github.com/jgm/pandoc/releases/download/1.19.2.1/pandoc-1.19.2.1-1-amd64.deb\n      # - dpkg -i ./pandoc-1.19.2.1-1-amd64.deb\n\n    image: node:lts\n\n    pages:\n      cache:\n        paths:\n        - node_modules/\n      script:\n      - npm install\n      - npx hexo deploy\n\n      artifacts:\n        paths:\n          - public\n      only:\n        - master\n    ```\n<!-- endtab -->\n{% endtabs %}\n\n{% note danger %}\nVariables are not masked, and their values can be shown in the job logs if explicitly asked to do so. So make sure gitlab pipelines can only be viewed by yourself.\n{% endnote %}\n"},{"title":"Installation","url":"/docs/getting-started/installation.html","content":"\n### Select Version\n\nA new version of NexT will be released every month. You can choose to install the latest version or choose a stable old version.\n\n{% tabs download-next %}\n<!-- tab {% label success@Latest Master Branch %} -->\n**Option 1: Download the [Latest Master Branch](https://github.com/next-theme/hexo-theme-next/archive/master.zip)**\n\nMay be **unstable**, but includes **latest features**. At most cases useful and recommended for advanced users and for developers.\n<!-- endtab -->\n\n<!-- tab Latest Release Version -->\n**Option 2: Download the [Latest Release Version](https://github.com/next-theme/hexo-theme-next/releases/latest)**\n\nAt most cases **stable**. Recommended for beginners.\n<!-- endtab -->\n\n<!-- tab Specific Release Version -->\n**Option 3: Download the [Specific Release Version](https://github.com/next-theme/hexo-theme-next/releases)**\n\nIn rare cases useful, but not recommended.\nYou must define version. Let's take `v8.0.0` as an example. Replace it with any version from [tags list](https://github.com/next-theme/hexo-theme-next/tags).\n<!-- endtab -->\n{% endtabs %}\n\n### Get NexT\n\nThere are **2 recommended ways** to download NexT: `npm` and `git`. You need to **choose only one** of them. Other installation methods, such as downloading and decompressing the theme source code in zip format from GitHub, are no longer recommended, because the installed theme is difficult to manage and upgrade.\n\nChange dir to {% label info@site root directory %} in the command line first, and then continue with the following steps.\n\n#### Using `npm`\n\nIf you're using Hexo 5.0 or later, you can install `hexo-theme-next` through npm.\n\n{% tabs using-npm %}\n<!-- tab Latest Release Version -->\n```bash\n$ npm install hexo-theme-next@latest\n```\n\nThis variant will install the **latest release version**.\n<!-- endtab -->\n\n<!-- tab Specific Release Version -->\n```bash\n$ npm install hexo-theme-next@8.0.0\n```\n\nThis variant will install the **specific release version**.\n<!-- endtab -->\n{% endtabs %}\n\n#### Using `git`\n\n{% tabs using-git %}\n<!-- tab Latest Master Branch -->\n```bash\n$ git clone https://github.com/next-theme/hexo-theme-next themes/next\n```\n\nOr download via mirror on GitLab:\n\n```bash\n$ git clone https://gitlab.com/hexo-theme-next/hexo-theme-next themes/next\n```\n\nThis variant will install the **whole repository** (with `.git` directory inside).\nAnd in any time you can update current version with git (instructions below) and switch to any tagged release or on latest master or any other branch.\n\nGet tags list:\n\n```bash\n$ cd themes/next\n$ git tag -l\n...\nv8.0.0-rc.1\nv8.0.0-rc.2\nv8.0.0-rc.3\n...\n```\n\nFor example, you want to switch on `v8.0.0` tagged release version. Input the following command:\n\n```bash\n$ git checkout tags/v8.0.0\nNote: switching to 'tags/v8.0.0'.\n...\nHEAD is now at f27e45b Release v8.0.0\n```\n\nIf you want to switch on latest release version without defining tag (optional)\n\n```bash\n$ git checkout $(git describe --tags $(git rev-list --tags --max-count=1))\n```\n\nAnd if you want to switch back on master branch, input this command:\n\n```bash\n$ git checkout master\n```\n<!-- endtab -->\n\n<!-- tab Specific Release Version -->\n```bash\n$ git clone --branch v8.0.0 https://github.com/next-theme/hexo-theme-next themes/next\n```\n\nOr download via mirror on GitLab:\n\n```bash\n$ git clone --branch v8.0.0 https://gitlab.com/hexo-theme-next/hexo-theme-next themes/next\n```\n\nThis variant will install the **specific release version** (with `.git` directory inside).\nAnd in any time you can switch to any tagged release, but with limit to specific version.\n<!-- endtab -->\n{% endtabs %}\n\nAnd if you see any error message during update (something like **«Commit your changes or stash them before you can merge»**), recommended to learn [Alternate Theme Config](/docs/getting-started/configuration.html) feature. Howbeit, you can bypass update errors by `Commit`, `Stash` or `Discard` local changes. See [here](https://stackoverflow.com/a/15745424/5861495) how to do it.\n\n### Set It Up\n\nWhen NexT download will complete, we must go back to previous guide and follow [Enabling NexT](/docs/getting-started/#Enabling-NexT) instructions.\n"},{"title":"Upgrade","url":"/docs/getting-started/upgrade.html","content":"\n### NexT Compatibility with Hexo Version\n\n| Version                  | Hexo 3.0.0-beta.4 or earlier  | Hexo 3.0.0-rc.1 ~ 3.9 | Hexo 4.0 ~ 4.2.1     | Hexo 5.0 or later     |\n| ------------------------ | ----------------------------- | --------------------- | -------------------- | --------------------- |\n| NexT v0.4.5.1 or earlier | ✅                            | ✅                    | ❌ Icon (2)           | ❌ Icon (2)           |\n| NexT v0.4.5.2 ~ v7.4.1   | ⚠️ Data Files (1)              | ✅                    | ❌ Icon (2)           | ❌ Icon (2)           |\n| NexT v7.4.2 ~ v8.1.0     | ⚠️ Data Files (1)              | ✅                    | ✅                    | ✅                    |\n| NexT v8.2.0 or later     | ⚠️ Nunjucks (3)                | ⚠️ Nunjucks (3)        | ⚠️ Nunjucks (3)       | ✅                    |\n\n(1): Hexo 3.0.0-beta.4 or earlier does not support Data Files.\n(2): Icons may not be displayed normally.\n(3): Nunjucks renderer plugin required.\n\n### NexT Repositories\n\nDue to historical reasons, NexT has three different repositories.\n\n| Years       | Version | Repository                                    |\n| ----------- | ------- | --------------------------------------------- |\n| 2014 ~ 2017 | v5      | https://github.com/iissnan/hexo-theme-next    |\n| 2018 ~ 2019 | v6 ~ v7 | https://github.com/theme-next/hexo-theme-next |\n| 2020        | v8      | https://github.com/next-theme/hexo-theme-next |\n\n### Upgrade from Legacy Version\n\nIt's recommended to upgrade NexT to version 8 to get the latest features and supports in the new [Theme-Next](https://github.com/next-theme/hexo-theme-next) repository.\n\n#### Breaking Changes\n\nThere are some breaking changes that need attention when upgrading across versions.\n\n1. Update language configuration (for Simplified Chinese)\n    Since v6.0.3, `zh-Hans` has been renamed to `zh-CN`: https://github.com/theme-next/hexo-theme-next/releases/tag/v6.0.3\n\n    Users upgrading to v6.0.3 and later need to explicitly modify the `language` configuration in {% label info@site config file %}, otherwise the language display is incorrect.\n2. Since v8.0.0, all libraries under the `next/source/lib` directory was moved out to [@next-theme/plugins](https://github.com/next-theme/plugins). Please see this article for the new 3rd-party libraries installation method: [Adding Plugins](/docs/third-party-services/#Adding-Plugins).\n\n#### Upgrade\n\nSo, NexT suggest to upgrade from version 5 or 7 to version 8 in this way:\n\n1. You need to do some copies of old NexT files:\n    1.1. `_config.yml` or `next.yml` (if you used [Alternate Theme Config](/docs/getting-started/configuration.html)).\n    1.2. Custom CSS files placed in `next/source/css/_custom/*` and `next/source/css/_variables/*` directories.\n    1.3. Custom layout files placed in `next/layout/_custom/*`.\n    1.4. Any another possible custom additions which can be finded by compare tools between repositories.\n2. Then rename the old NexT folder, for example, rename `next` to `next-old`.\n3. Install the new version according to the method provided in this article: [installation instructions](/docs/getting-started/installation.html). Run `hexo clean` and `hexo s` to check whether the site works correctly.\n4. Update Hexo and Hexo plugin\n    If after completing the above steps, an error occurs when executing `hexo s` or `hexo g`, it means that there may be a conflict between the old version of Hexo / Hexo plugin and the new version of the theme NexT. We recommend upgrading Hexo to versions 5.0 or later and upgrading Hexo plugins to the latest version. You can run `npm outdated` to see all the upgradeable plugins.\n5. If you see any bugs or you simply does not like this version, you can switch back to the old version at any time.\n"},{"title":"Getting Started","url":"/docs/getting-started/index.html","content":"\n### Hexo Installation\n\nIf this is your first time using Hexo, you can take some time to review the Hexo Docs to see [how to install Hexo](https://hexo.io/docs/) and [initialize a site](https://hexo.io/docs/setup). After the installation is successful, you should be able to execute `hexo` (or `npx hexo`) on the command line, and there must be `package.json`, `source`, `themes` and other directories in your {% label info@site root directory %}:\n\n```bash\n$ cd hexo-site\n$ ls\n_config.yml  node_modules  package-lock.json  package.json  scaffolds  source  themes\n```\n\n{% note info %}\nIf you are new to Node.js or Hexo, you can also modify the source code of an existing Hexo website instead of creating a new one, to help you understand how Hexo works. In fact, the document you are reading is generated by Hexo with NexT, and you can install it with the following command:\n\n```bash\n$ git clone https://github.com/next-theme/theme-next-docs\n$ cd theme-next-docs\n$ npm install\n```\n\n{% endnote %}\n\nMake sure that you have installed Hexo and created a site with it successfully, because the following documents require you to operate in the {% label info@site root directory %}.\n\n### Configuration\n\nThere are two main configuration files using by Hexo and both called `_config.yml`:\n\n1. The first one is under {% label info@site root directory %}, which contains Hexo's config.\n2. The second one is under {% label primary@theme root directory %}, which is provided by NexT and contains theme's config.\n\nLet's call the first one – {% label info@site config file %}, and the second one – {% label primary@theme config file %}.\nHowever, we do not recommend directly modifying the {% label primary@theme config file %}. It is quite often running into conflict status when updating NexT theme via `git pull`, or need to merge configurations manually when upgrading to new releases. For Hexo 5.0 or later, the theme can be installed through npm and it is also difficult to modify the {% label primary@theme config file %} in `node_modules`.\n\nIn order to resolve this issue, we recommend using the [Alternate Theme Config](/docs/getting-started/configuration.html) feature to configure theme NexT.\n\n### NexT Installation\n\nThe detailed steps to install or upgrade the theme are as follows.\n\n#### Downloading NexT\n\nIt's easy to install Hexo theme: you can choose to install the theme through npm, or download the source code of the theme in the `themes` directory under {% label info@site root directory %}.\n\n{% tabs downloading-next %}\n<!-- tab Using <code>npm</code> -->\nIf you're using Hexo 5.0 or later, the simplest way to install is through npm.\n\nOpen your Terminal, change to Hexo {% label info@site root directory %} and install NexT theme:\n\n```bash\n$ cd hexo-site\n$ npm install hexo-theme-next\n```\n<!-- endtab -->\n\n<!-- tab Using <code>git</code> -->\nIf you know about [Git](https://git-scm.com), you can clone the whole repository and update it in any time with `git pull` command instead of downloading archive manually.\n\nOpen your terminal, change to Hexo {% label info@site root directory %} and clone the latest master branch of NexT theme:\n\n```bash\n$ cd hexo-site\n$ git clone https://github.com/next-theme/hexo-theme-next themes/next\n```\n<!-- endtab -->\n{% endtabs %}\n\n{% note primary %}\nYou can also read [detailed installation instructions](/docs/getting-started/installation.html) if you want any other installation variant.\n{% endnote %}\n\n#### Upgrading NexT\n\nA new version of NexT will be released every month. Please read the [release notes](https://github.com/next-theme/hexo-theme-next/releases) before updating the theme. You can update NexT by the following command.\n\n{% tabs upgrading-next %}\n<!-- tab Using <code>npm</code> -->\nInstall the latest version throuth npm:\n\n```bash\n$ cd hexo-site\n$ npm install hexo-theme-next@latest\n```\n<!-- endtab -->\n\n<!-- tab Using <code>git</code> -->\nOr update to the latest master branch:\n\n```sh\n$ cd hexo-site\n$ cd themes/next\n$ git pull origin master\n```\n<!-- endtab -->\n{% endtabs %}\n\n{% note warning %}\nIf you are still using NexT version 5 or 7, you can read [instructions for upgrading from legacy version](/docs/getting-started/upgrade.html).\n{% endnote %}\n\n#### Enabling NexT\n\nLike all Hexo themes, after you download it, open {% label info@site config file %}, find `theme` section, and change its value to `next` (or another theme directory name).\n\n```yml hexo/_config.yml\ntheme: next\n```\n\nNow you have installed NexT theme and enabled it. The following steps will help you verify whether NexT is enabled correctly.\n\n#### Checking NexT\n\nIt's recommended to use `hexo clean` to clean Hexo's cache first.\nThen start Hexo local server with debug parameter (by adding `--debug`), the whole command is `hexo s --debug`. You can see the output while running, and if you find problem, you can use the output to help others locate error better. When it prints:\n\n```\nINFO  Hexo is running at http://localhost:4000/. Press Ctrl+C to stop.\n```\n\nNow you can open `http://localhost:4000` in your browser, and check whether the site works correctly.\n\n{% note success %}\nIf you find your site looks like this picture, you have installed it correctly. That's default NexT scheme – Muse.\n![Default Scheme – Muse](/images/next-default-scheme.png)\n{% endnote %}\n\n### Hexo Configuration\n\nThe following settings in {% label info@site config file %} are very helpful for optimizing your website.\n\n#### Configuring Author\n\nEdit {% label info@site config file %} and set the value of `author` to your nickname.\n\n```yml hexo/_config.yml\n# Site\nauthor:\n```\n\n#### Configuring Description\n\nEdit {% label info@site config file %} and set the value of `description` to your description, which can be a sentence you like.\n\n```yml hexo/_config.yml\n# Site\ndescription:\n```\n\nAfter that we can [configure deployment](/docs/getting-started/deployment.html).\n\nIf everything is OK, in next steps we will change some settings including [personalization](/docs/theme-settings/) and [third-party services integration](/docs/third-party-services/).\n"},{"title":"Chat Services","url":"/docs/third-party-services/chat-services.html","content":"\n### Chatra\n\n[Chatra](https://chatra.com) is a live chat messenger app for your website.\n\n{% tabs Chatra %}\n<!-- tab Enable Chatra → -->\nVisit [Dashboard](https://app.chatra.io/settings/general) to get your ChatraID.\n\n```yml next/_config.yml\n# Chatra Support\n# See: https://chatra.com\n# Dashboard: https://app.chatra.io/settings/general\nchatra:\n  enable: true\n  async: true\n  id: <ChatraID>\n```\n\n<!-- endtab -->\n\n<!-- tab Activate sidebar button -->\nAfter Chatra enabled, you can set `chat.enable` to `true` in {% label primary@theme config file %}.\n\n```yml next/_config.yml\n# A button to open designated chat widget in sidebar.\n# Firstly, you need enable the chat service you want to activate its sidebar button.\nchat:\n  enable: true\n  icon: fa fa-comment\n  text: Chat\n```\n<!-- endtab -->\n{% endtabs %}\n\n### Tidio\n\n[Tidio](https://www.tidio.com/) is a live chat messenger app for your website.\n\n{% tabs Tidio %}\n<!-- tab Enable Tidio → -->\nVisit [Dashboard](https://www.tidio.com/panel/dashboard) to get your Public Key.\n\n```yml next/_config.yml\n# Tidio Support\n# See: https://www.tidio.com\n# Dashboard: https://www.tidio.com/panel/dashboard\ntidio:\n  enable: true\n  key: <Publick Key>\n```\n\n<!-- endtab -->\n\n<!-- tab Activate sidebar button -->\nAfter Tidio enabled, you can set `chat.enable` to `true` in {% label primary@theme config file %}.\n\n```yml next/_config.yml\n# A button to open designated chat widget in sidebar.\n# Firstly, you need enable the chat service you want to activate its sidebar button.\nchat:\n  enable: true\n  icon: fa fa-comment\n  text: Chat\n```\n<!-- endtab -->\n{% endtabs %}\n\n### Gitter\n\n[Gitter](https://gitter.im) is a chat and networking platform that helps to manage, grow and connect communities through messaging, content and discovery.\n\n{% tabs Gitter %}\n<!-- tab Enable Gitter → -->\nYou need to create a community, then create a webapp room under that community.\n\n```yml next/_config.yml\n# Gitter Support\n# For more information: https://gitter.im\ngitter:\n  enable: true\n  room: <Community>/<Room Name>\n```\n\n<!-- endtab -->\n\n<!-- tab Activate sidebar button -->\nAfter Gitter enabled, you can set `chat.enable` to `true` in {% label primary@theme config file %}.\n\n```yml next/_config.yml\n# A button to open designated chat widget in sidebar.\n# Firstly, you need enable the chat service you want to activate its sidebar button.\nchat:\n  enable: true\n  icon: fa fa-comment\n  text: Chat\n```\n<!-- endtab -->\n{% endtabs %}\n"},{"title":"External Libraries","url":"/docs/third-party-services/external-libraries.html","content":"\n### PJAX\n\n[Pjax](https://github.com/MoOx/pjax) is a standalone JavaScript module that uses AJAX (XmlHttpRequest) and `pushState()` to deliver a fast browsing experience.\n\nIt allows you to completely transform the user experience of standard websites (server-side generated or static ones) to make users feel like they are browsing an app, especially for those with low bandwidth connections.\n\n{% note warning %}\nPlease use the absolute path of the image or [Hexo asset_img tag](https://hexo.io/docs/tag-plugins#Include-Assets) in your posts, otherwise the images may fail to load during Pjax refresh.\n{% endnote %}\n\nYou can enable it by setting value `pjax` to `true` in {% label primary@theme config file %}.\n\n```yml next/_config.yml\n# Easily enable fast Ajax navigation on your website.\n# For more information: https://github.com/next-theme/pjax\npjax: true\n```\n\n### Fancybox\n\nNexT supports the fancybox plugin, which is a jQuery lightbox script for displaying images, videos and more. Touch enabled, responsive and fully customizable.\n\nYou can enable it by setting value `fancybox` to `true` in {% label primary@theme config file %}.\n\n```yml next/_config.yml\nfancybox: true\n```\n\n### Medium Zoom\n\n[Medium Zoom](https://github.com/francoischalifour/medium-zoom) is a JavaScript library for zooming images like Medium.\n\nYou can enable it by setting value `mediumzoom` to `true` in {% label primary@theme config file %}.\n\n```yml next/_config.yml\n# A JavaScript library for zooming images like Medium.\nmediumzoom: true\n```\n\n{% note warning %}\nDo not enable both `fancybox` and `mediumzoom`.\n{% endnote %}\n\n### Lazyload\n\n[Lozad.js](https://github.com/ApoorvSaxena/lozad.js) is a lazy loader plugin in modern vanilla JavaScript. It delays loading of images in long web pages. Images outside of viewport will not be loaded before user scrolls to them. This is opposite of image preloading.\n\nYou can enable it by setting value `lazyload` to `true` in {% label primary@theme config file %}.\n\n```yml next/_config.yml\n# Vanilla JavaScript plugin for lazyloading images.\nlazyload: true\n```\n\nThen run the following command in {% label info@site root dir %} to ensure that `lazyload` can be enabled or disabled correctly:\n\n```bash\n$ hexo clean\n```\n\n### Pangu Autospace\n\n[pangu.js](https://github.com/vinta/pangu.js) will automatically insert a blank space between all the Chinese characters and the hexagonal English numeric symbols on the page.\n\nYou can enable it by setting value `pangu` to `true` in {% label primary@theme config file %}.\n\n```yml next/_config.yml\n# Pangu Support\npangu: true\n```\n\n### Quicklink\n\n[Quicklink](https://github.com/GoogleChromeLabs/quicklink) is a JavaScript plugin that faster subsequent page-loads by prefetching in-viewport links during idle time. Chrome, Firefox, Edge are supported without polyfills.\n\nYou can enable it by setting value `quicklink.enable` to `true` in {% label primary@theme config file %}.\n\n```yml next/_config.yml\n...\nquicklink:\n  enable: true\n  home: true\n  archive: true\n  delay: true\n  timeout: 3000\n  priority: true\n...\n```\n\n### Animation Effect\n\nNexT enables animation effect by default which is supported by Anime.js and Animate.css, so it will wait for JavaScript loaded to show content.\nIf you need speed you can set the value of `motion.enable` to `false` to disable it.\n\nEdit {% label primary@theme config file %} and set the needed values under the `motion` to fit your demand. You can preview all Transition variants here: [NexT Animation Effect Preview](https://theme-next.js.org/animate/).\n\n```yml next/_config.yml\n# Use Animate.css to animate everything.\n# For more information: https://animate.style\nmotion:\n  enable: true\n  async: false\n  transition:\n    # All available Transition variants: https://theme-next.js.org/animate/\n    post_block: fadeIn\n    post_header: fadeInDown\n    post_body: fadeInDown\n    coll_header: fadeInLeft\n    # Only for Pisces | Gemini.\n    sidebar: fadeInUp\n```\n\n### Progress Bar\n\nPace will automatically monitor your Ajax requests, event loop lag, document ready state and elements on your page to decide on the progress.\n\n{% tabs pace %}\n<!-- tab <code>pace</code> -->\nYou can enable it by setting value `pace.enable` to `true` in {% label primary@theme config file %}.\n\n```yml next/_config.yml\npace:\n  enable: true\n```\n<!-- endtab -->\n<!-- tab <code>color</code> -->\nYou can change the color of progress bar by setting value `pace.color` in {% label primary@theme config file %}.\n\n```yml next/_config.yml\npace:\n  color: orange\n```\n<!-- endtab -->\n<!-- tab <code>theme</code> -->\nPace includes a bunch of [themes](https://codebyzach.github.io/pace/) to get you started. By default NexT uses `minimal` theme (pace-theme-minimal). You can configure it by editing values in `pace.theme` section in {% label primary@theme config file %}.\n\n```yml next/_config.yml\npace:\n  theme: minimal\n```\n\n<!-- endtab -->\n{% endtabs %}\n\n### Canvas Ribbon\n\n[canvas-ribbon.js](https://github.com/hustcc/ribbon.js) is a ribbon backgroud of website draw on canvas.\n\nYou can enable it by setting value `canvas_ribbon` to `true` in {% label primary@theme config file %}. You can also configure the ribbon setting by editing values in `canvas_ribbon` section:\n\n* size: The width of the ribbon.\n* alpha: The transparency of the ribbon.\n* zIndex: The display level of the ribbon.\n\n```yml next/_config.yml\ncanvas_ribbon:\n  enable: true\n  size: 300\n  alpha: 0.6\n  zIndex: -1\n```\n"},{"title":"Math Equations","url":"/docs/third-party-services/math-equations.html","content":"\n### Settings\n\n```yml next/_config.yml\n# Math Formulas Render Support\nmath:\n  # Default (false) will load mathjax / katex script on demand.\n  # That is it only render those page which has `mathjax: true` in front-matter.\n  # If you set it to true, it will load mathjax / katex script EVERY PAGE.\n  every_page: false\n\n  mathjax:\n    enable: true\n    # Available values: none | ams | all\n    tags: none\n\n  katex:\n    enable: false\n    # See: https://github.com/KaTeX/KaTeX/tree/master/contrib/copy-tex\n    copy_tex: false\n```\n\nThe `every_page` option controls whether to render Math Equations every page.\n\n- **`false`** → Equations will be processed on demand. It will only render those posts which have `mathjax: true` in their front-matter.\n- `true` → Equations will be processed on every page. Even if they not exists on one or another page.\n\n{% note default **Examples with `every_page: false` option** %}\n\n- This post will render the Math Equations\n\n    ```md\n    ---\n    title: Will Render Math\n    mathjax: true\n    ---\n    ```\n\n- This post will NOT render the Math Equations\n\n    ```md\n    ---\n    title: Not Render Math\n    mathjax: false\n    ---\n    ```\n\n- This post will NOT render the Math Equations either\n\n    ```md\n    ---\n    title: Not Render Math Either\n    ---\n    ```\n\n{% endnote %}\n\nThe `mathjax` and `katex` options are used to set the rendering engine. Please read the detailed document below.\n\n### Render Engines\n\nFor now, NexT provides two rendering engines for displaying Math Equations: [MathJax](https://www.mathjax.org) and [KaTeX](https://katex.org).\n\n- MathJax is a JavaScript display engine for mathematics that works in all browsers. It is highly modular on input and output. Use MathML, TeX, and ASCIImath as input and produce HTML+CSS, SVG, or MathML as output.\n- [KaTeX is a faster](https://www.intmath.com/cg5/katex-mathjax-comparison.php) math rendering engine compared to MathJax 3. And it could survive without JavaScript. But, for now [KaTeX supports less features](https://github.com/KaTeX/KaTeX/wiki/Things-that-KaTeX-does-not-(yet)-support) than MathJax. Here is a list of [TeX functions supported by KaTeX](https://katex.org/docs/supported.html).\n\nFirstly, you need to choose a rendering engine and turn on `enable` for it in {% label primary@theme config file %}. Then you need to install the **corresponding Hexo Renderer** to fully support the display of Math Equations - Only turn on `enable` **may not let you see the displayed equations correctly**.\n\n{% tabs render-engines %}\n<!-- tab MathJax -->\n**Renderer Choosing**\n\nIf you use MathJax to render Math Equations, you can choose one of the Markdown renderers below:\n\n- [hexo-renderer-pandoc](https://github.com/wzpan/hexo-renderer-pandoc)\n\nhexo-renderer-pandoc is recommended because it can handle mathematical formulas in markdown documents perfectly.\n\n{% note warning %}\nIf you are using other renderers, such as [hexo-renderer-marked](https://github.com/hexojs/hexo-renderer-marked), you need to be aware of the conflict between LaTeX and Markdown syntax. For example, an underscore (`_`) may be interpreted as the start of italic text in Markdown, or subscripted mark in TeX. To avoid syntax errors, please use escape characters (`\\_`) instead:\n\n```diff\n-$\\epsilon_0$\n+$\\epsilon\\_0$\n-\\begin{eqnarray*}\n+\\begin{eqnarray\\*}\n-\\\\\n+\\\\\\\\\n```\n\n{% endnote %}\n\n**Installation**\n\n1. Firstly, set `mathjax` as rendering engine in {% label primary@theme config file %}.\n\n    ```yml next/_config.yml\n    math:\n      ...\n      mathjax:\n        enable: true\n    ```\n\n2. Then you need to uninstall the original renderer `hexo-renderer-marked`, and install `hexo-renderer-pandoc`:\n\n    ```bash\n    $ npm un hexo-renderer-marked\n    $ npm i hexo-renderer-pandoc\n    ```\n\n3. [pandoc](https://github.com/jgm/pandoc) is required for hexo-renderer-pandoc, here's [how to install pandoc](https://github.com/jgm/pandoc/blob/master/INSTALL.md).\n\n**Plugins**\n\nAll extensions of MathJax are loaded automatically. For example, `mhchem` is a tool for writing beautiful chemical equations easily. It implements the `\\ce` and `\\pu` chemical equation macros of the LaTeX mhchem package. More information: [MathJax/mhchem Manual](https://mhchem.github.io/MathJax-mhchem/).\n<!-- endtab -->\n\n<!-- tab KaTeX -->\n**Renderer Choosing**\n\nIf you use KaTeX to render Math Equations, you can choose one of the Markdown renderers below:\n\n- [hexo-renderer-markdown-it-plus](https://github.com/CHENXCHEN/hexo-renderer-markdown-it-plus)\n- [hexo-renderer-markdown-it](https://github.com/hexojs/hexo-renderer-markdown-it)\n\n**Installation**\n\n1. Firstly, set `katex` as rendering engine in {% label primary@theme config file %}.\n\n    ```yml next/_config.yml\n    math:\n      ...\n      katex:\n        enable: true\n    ```\n\n2. Then you need to uninstall the original renderer `hexo-renderer-marked` and install one of the renderer plugins:\n\n{% subtabs katex-renderer %}\n<!-- tab hexo-renderer-markdown-it-plus -->\n\n```bash\n$ npm un hexo-renderer-marked\n$ npm i hexo-renderer-markdown-it-plus\n```\n<!-- endtab -->\n\n<!-- tab hexo-renderer-markdown-it -->\n\n```bash\n$ npm un hexo-renderer-marked\n$ npm i hexo-renderer-markdown-it\n```\n\nIf you use `hexo-renderer-markdown-it`, you also need to install `markdown-it-katex`:\n\n```bash\n$ npm i markdown-it-katex\n```\n\nAnd then in {% label info@site config file %} you need to add `markdown-it-katex` as a plugin for `hexo-renderer-markdown-it`:\n\n```yml hexo/_config.yml\n# config of hexo-renderer-markdown-it\nmarkdown:\n  render:\n    html: true\n    xhtmlOut: false\n    breaks: true\n    linkify: true\n    typographer: true\n    quotes: '“”‘’'\n  plugins:\n    - markdown-it-katex\n```\n<!-- endtab -->\n{% endsubtabs %}\n\n**Plugins**\n\nCopy-tex extension for KaTeX modifes the copy/paste behavior in any browser supporting the Clipboard API so that, when selecting and copying whole KaTeX-rendered elements, the text content of the resulting clipboard renders KaTeX elements as their LaTeX source surrounded by specified delimiters. More information: [Copy-tex extension](https://github.com/KaTeX/KaTeX/tree/master/contrib/copy-tex).\n\n```yml next/_config.yml\nmath:\n  ...\n  katex:\n    # See: https://github.com/KaTeX/KaTeX/tree/master/contrib/copy-tex\n    copy_tex: true\n```\n\n{% note danger %}\n**Known Issues**\n\n1. Firstly, please check [Common Issues](https://katex.org/docs/issues.html) of KaTeX.\n2. Displayed Math (i.e. ` $$...$$ `) needs to started with new clear line.\n    In other words: you must not have any characters (except of whitespaces) **before the opening ` $$ ` and after the ending ` $$ `** ([comment #32](https://github.com/theme-next/hexo-theme-next/pull/32#issuecomment-357489509)).\n3. Don't support Unicode ([comment #32](https://github.com/theme-next/hexo-theme-next/pull/32#issuecomment-357489509)).\n4. Inline Math (..` $...$ `) must not have white spaces **after the opening ` $ ` and before the ending ` $ `** ([comment #32](https://github.com/theme-next/hexo-theme-next/pull/32#issuecomment-357489509)).\n5. If you use math in Heading (i.e. `## Heading`).\n    Then in corresponding TOC item it will show the related LaTeX code 3 times ([comment #32](https://github.com/theme-next/hexo-theme-next/pull/32#issuecomment-359018694)).\n6. If you use math in your post's title, it will not be rendered ([comment #32](https://github.com/theme-next/hexo-theme-next/pull/32#issuecomment-359142879)).\n{% endnote %}\n<!-- endtab -->\n{% endtabs %}\n\n{% note warning %}\nAfter setting up the math rendering engine or installing / uninstalling the Markdown renderer, please execute `hexo clean`. Run standard Hexo generate, deploy process or start the server to test whether the plugin is working properly:\n\n```bash\n$ hexo clean && hexo g -d\n# or hexo clean && hexo s\n```\n\n{% endnote %}\n\n{% note warning %}\nExcept for the required renderer, any other Hexo math plugins are unnecessary and there is no need to manually import any JS or CSS files. If you have installed plugins such as `hexo-math` or `hexo-katex`, they may conflict with the built-in rendering engine of NexT.\n{% endnote %}\n\n### Examples\n\n{% note info %}\nThe following examples are rendered by `mathjax` engine.\n{% endnote %}\n\n#### Numbering and Referring Equations in MathJax\n\nIn NexT v6.3.0, we have added feature to [automatic equation numbering](https://docs.mathjax.org/en/latest/input/tex/eqnumbers.html) with opportunity to make reference to that equations.\n\nTo enable this feature, you need to set `mathjax.tags` to `ams` in {% label primary@theme config file %}.\n\n```yml\nmath:\n  mathjax:\n    enable: true\n    # Available values: none | ams | all\n    tags: ams\n```\n\nAnd to make the automatic equation numbering work, you have to wrap your LaTeX equations in `equation` environment. Using the plain old style (i.e., wrap an equation with two dollar signs in each side) will not work. How to refer to an equation? Just give a `\\label{}` tag and then in your later text, use `\\ref{}` or `\\eqref{}` to refer it. Using `\\eqref{}` is preferred since if you use `\\ref{}`, there are no parentheses around the equation number. Below are some of the common scenarios for equation numbering.\n\n#### Simple Equations\n\nFor simple equations, use the following form to give a tag,\n\n```latex\n$$\\begin{equation} \\label{eq1}\ne=mc^2\n\\end{equation}$$\n```\n\n$$\\begin{equation} \\label{eq1}\ne=mc^2\n\\end{equation}$$\n\nThen, you can refer to this equation in your text easily by using something like:\n\n```latex\nThe famous matter-energy equation $\\eqref{eq1}$ proposed by Einstein...\n```\n\nThe famous matter-energy equation $\\eqref{eq1}$ proposed by Einstein...\n\n#### Multi-line Equations\n\nFor multi-line equations, inside the `equation` environment, you can use the `aligned` environment to split it into multiple lines:\n\n```latex\n$$\\begin{equation} \\label{eq2}\n\\begin{aligned}\na &= b + c \\\\\n  &= d + e + f + g \\\\\n  &= h + i\n\\end{aligned}\n\\end{equation}$$\n```\n\n$$\\begin{equation} \\label{eq2}\n\\begin{aligned}\na &= b + c \\\\\\\\\n  &= d + e + f + g \\\\\\\\\n  &= h + i\n\\end{aligned}\n\\end{equation}$$\n\n```latex\nEquation $\\eqref{eq2}$ is a multi-line equation.\n```\n\nEquation $\\eqref{eq2}$ is a multi-line equation.\n\n#### Multiple Aligned Equations\n\nWe can use `align` environment to align multiple equations. Each of these equations will get its own numbers.\n\n```latex\n$$\\begin{align}\na &= b + c \\label{eq3} \\\\\nx &= yz \\label{eq4} \\\\\nl &= m - n \\label{eq5}\n\\end{align}$$\n```\n\n$$\\begin{align}\na &= b + c \\label{eq3} \\\\\\\\\nx &= yz \\label{eq4} \\\\\\\\\nl &= m - n \\label{eq5}\n\\end{align}$$\n\n```latex\nThere are three aligned equations: equation $\\eqref{eq3}$, equation $\\eqref{eq4}$ and equation $\\eqref{eq5}$.\n```\n\nThere are three aligned equations: equation $\\eqref{eq3}$, equation $\\eqref{eq4}$ and equation $\\eqref{eq5}$.\n\nSince `align` in and of itself is a complete equation environment (read [here](https://tex.stackexchange.com/questions/95402/what-is-the-difference-between-aligned-in-displayed-mode-and-starred-align) about the difference between `aligned` and `align` in LaTeX). You do not need to wrap it with `equation` environment.\n\n#### Exclude Equations from Numbering\n\nIn the `align` environment, if you do not want to number one or some equations, just use `\\nonumber` right behind these equations. Like the following:\n\n```latex\n$$\\begin{align}\n-4 + 5x &= 2 + y \\nonumber \\\\\nw + 2 &= -1 + w \\\\\nab &= cb\n\\end{align}$$\n```\n\n$$\\begin{align}\n-4 + 5x &= 2 + y \\nonumber \\\\\\\\\nw + 2 &= -1 + w \\\\\\\\\nab &= cb\n\\end{align}$$\n\n#### Use `\\tag` to Tag Equations\n\nSometimes, you want to use more «exotic» style to refer your equation. You can use `\\tag{}` to achieve this. For example:\n\n```latex\n$$x+1\\over\\sqrt{1-x^2} \\tag{i}\\label{eq_tag}$$\n```\n\n$$x+1\\over\\sqrt{1-x^2} \\tag{i}\\label{eq_tag}$$\n\n```latex\nEquation $\\eqref{eq_tag}$ use `\\tag{}` instead of automatic numbering.\n```\n\nEquation $\\eqref{eq_tag}$ use `\\tag{}` instead of automatic numbering.\n"},{"title":"Post Widgets","url":"/docs/third-party-services/post-widgets.html","content":"\n### Widgetpack Rating\n\nRating service with login through any social networks like Facebook, Twitter, Google+, LinkedIn, Instagram and others.\n\n{% tabs rating %}\n<!-- tab Get ID → -->\nLogin to [widgetpack](https://widgetpack.com/admin#signin) and add new site, you will get your site ID:\n\n```js\nwpac_init.push({widget: 'Rating', id: ID});\n```\n<!-- endtab -->\n\n<!-- tab NexT Config -->\n\nYou can enable it by setting value `rating.enable` to `true`, and copy `ID` value of `id` in {% label primary@theme config file %}. You can also configure the rating color by editing the value of `rating.color`.\n\n```yml next/_config.yml\nrating:\n  enable: false\n  id:     ID #<app_id>\n  color:  \"#fc6423\"\n```\n<!-- endtab -->\n{% endtabs %}\n\n### AddThis\n\n{% tabs addthis %}\n<!-- tab Sign Up → -->\nSign up in [AddThis](https://www.addthis.com). You can use Google / Facebook / Twitter to login.\n<!-- endtab -->\n\n<!-- tab AddThis ID → -->\nGet AddThis ID in this menu: `Profile Settings` → `General` → `ID`. See example on the picture below:\n![AddThis ID](/images/add-this-id.png)\n<!-- endtab -->\n\n<!-- tab NexT Config -->\nEdit the value of `add_this_id` in the {% label primary@theme config file %} as following:\n\n```yml next/_config.yml\nadd_this_id: your_add_this_id\n```\n<!-- endtab -->\n{% endtabs %}\n"},{"title":"Third-party Services","url":"/docs/third-party-services/index.html","content":"\nStatic website is limited in some functions, so we need third-party services to extend our site.\nIn any time you can extend needed functions by using third-party services supported by NexT.\n\n### Adding Plugins\n\nPlugins extend and expand the functionality of NexT. There are two types of plugins: core plugins and third-party plugins. The core plugins are loaded from your site by default, they are required by the basic functions of NexT. Third-party plugins provide a large number of optional features. They are loaded from jsDelivr CDN by default, because it is fast in everywhere.\n\nConfiguring these plugins is very easy. For example, if you want to use `pjax` in your site, just set `pjax` to `true` in {% label primary@theme config file %}:\n\n```yml next/_config.yml\n# Easily enable fast Ajax navigation on your website.\n# For more information: https://github.com/next-theme/pjax\npjax: true\n```\n\nIf you want to specify the CDN provider for any plugins, you need to set / update the CDN URL. See [Advanced Settings](/docs/advanced-settings/vendors.html) for more information.\n\nDetailed documentation about these plugins is listed below.\n\n### Math Equations\n\n* [Math Equations](/docs/third-party-services/math-equations.html)\n\n### Comment Systems\n\n* [Overview](/docs/third-party-services/comments.html#Overview)\n* [Disqus](/docs/third-party-services/comments.html#Disqus)\n* [DisqusJS](/docs/third-party-services/comments.html#DisqusJS)\n* [Changyan (China)](/docs/third-party-services/comments.html#Changyan)\n* [LiveRe](/docs/third-party-services/comments.html#LiveRe)\n* [Gitalk](/docs/third-party-services/comments.html#Gitalk)\n* [Utterances](/docs/third-party-services/comments.html#Utterances)\n* [Isso](/docs/third-party-services/comments.html#Isso)\n\n### Statistics and Analytics\n\n#### Analytics\n\n* [Google Analytics](/docs/third-party-services/statistics-and-analytics.html#Google-Analytics)\n* [Baidu Analytics (China)](/docs/third-party-services/statistics-and-analytics.html#Baidu-Analytics-China)\n* [Growingio Analytics](/docs/third-party-services/statistics-and-analytics.html#Growingio-Analytics)\n* [Cloudflare Web Analytics](/docs/third-party-services/statistics-and-analytics.html#Cloudflare-Web-Analytics)\n\n#### Statistics\n\n* [LeanCloud (China)](/docs/third-party-services/statistics-and-analytics.html#LeanCloud-China)\n* [Firebase](/docs/third-party-services/statistics-and-analytics.html#Firebase)\n* [Busuanzi Counting](/docs/third-party-services/statistics-and-analytics.html#Busuanzi-Counting-China)\n\n### Post Widgets\n\n* [Widgetpack Rating](/docs/third-party-services/post-widgets.html#Widgetpack-Rating)\n* [AddThis](/docs/third-party-services/post-widgets.html#AddThis)\n\n### Search Services\n\n* [Algolia Search](/docs/third-party-services/search-services.html#Algolia-Search)\n* [Local Search](/docs/third-party-services/search-services.html#Local-Search)\n\n### Chat Services\n\n* [Chatra](/docs/third-party-services/chat-services.html#Chatra)\n* [Tidio](/docs/third-party-services/chat-services.html#Tidio)\n\n### External Libraries\n\n* [PJAX](/docs/third-party-services/external-libraries.html#PJAX)\n* [Fancybox](/docs/third-party-services/external-libraries.html#Fancybox)\n* [MediumZoom](/docs/third-party-services/external-libraries.html#Medium-Zoom)\n* [Lazyload](/docs/third-party-services/external-libraries.html#Lazyload)\n* [Pangu Autospace](/docs/third-party-services/external-libraries.html#Pangu-Autospace)\n* [Quicklink](/docs/third-party-services/external-libraries.html#Quicklink)\n* [Motion](/docs/third-party-services/external-libraries.html#Animation-Effect)\n* [Progress bar](/docs/third-party-services/external-libraries.html#Progress-Bar)\n* [Canvas Ribbon](/docs/third-party-services/external-libraries.html#Canvas-Ribbon)\n"},{"title":"Comment Systems","url":"/docs/third-party-services/comments.html","content":"\n### Overview\n\n#### Multiple Comment System Support\n\nNexT allows you to enable multiple commenting systems at the same time. You can modify the following configuration to adjust the style or behavior of multiple commenting systems.\n\n```yml next/_config.yml\n# Multiple Comment System Support\ncomments:\n  # Available values: tabs | buttons\n  style: tabs\n  # Choose a comment system to be displayed by default\n  # Available values: disqus | disqusjs | changyan | livere | gitalk | utterances | isso\n  active:\n  # Setting `true` means remembering the comment system selected by the visitor\n  storage: true\n  # Lazyload all comment systems.\n  lazyload: false\n  # Modify icons and texts for any style, here are some examples\n  nav:\n    #disqus:\n    #  text: Load Disqus\n    #  order: -1\n    #gitalk:\n    #  order: -2\n```\n\nYou can enable lazyload by setting value `comments.lazyload` to `true` in {% label primary@theme config file %}. NexT uses IntersectionObserver to lazyload the comments, which is not supported by IE and most browsers released before 2017.\n\n{% caniuse intersectionobserver @ current,past_1,past_2,past_3,past_4,past_5 %}\n\nIf your blog readers are mostly using legacy browsers, please consider using [Intersection Observer polyfill](https://github.com/w3c/IntersectionObserver/tree/master/polyfill).\n\n#### How to Disable Comments on Page\n\nWhen you enabled comment service like Disqus, all new page will have comment service automatically. If you want to disable it in one page, just add `comments` key to [front-matter](https://hexo.io/docs/front-matter) and set its value to `false`. Like following:\n\n```md your-post.md\ntitle: All tags\ntype: \"tags\"\ncomments: false\n---\n```\n\n#### Rename Comment Count Text\n\nYou can rename the post meta text of comment count using `languages.yml`: [Override Default Translations](/docs/theme-settings/internationalization.html#Override-Default-Translations).\n\n### Disqus\n\nDisqus is a global comment system that improves discussion on websites and connects conversations across the web.\n\n1. Create an account and log into [Disqus](https://disqus.com/). Once logged in, click the `GET STARTED` button on the homepage, then select `I want to install Disqus on my site` option and you will see the `Create a new site` interface.\n2. Enter your `Website Name`, which will serve as your Disqus shortname, and select a Category from the drop-down menu. Then click `Create Site` button.\n3. Choose `I don't see my platform listed, install manually with Universal Code`, configure Disqus for your site, and click `Complete Setup` button.\n4. Set the value `enable` to `true`, add the obtained Disqus shortname (`shortname`), and edit other configurations in `disqus` section in the {% label primary@theme config file %} as following:\n\n    ```yml next/_config.yml\n    disqus:\n      enable: false\n      shortname: your-short-disqus-name\n      count: true\n    ```\n\n### DisqusJS\n\nRender Disqus comment component using Disqus API.\n\n1. Get your Disqus API Key from [Disqus API Application](https://disqus.com/api/applications/).\n2. Go to the settings page of your Disqus Application, enter your domain in Settings → Domains.\n3. Get your Disqus Shortname from [General Settings - Disqus Admin](https://disqus.com/admin/settings/general/).\n4. Set the value `enable` to `true`, add the obtained Disqus API Key (`apikey`) and Shortname (`shortname`), and edit other configurations in `disqusjs` section in the {% label primary@theme config file %} as following:\n\n    ```yml next/_config.yml\n    # DisqusJS\n    # Demo: https://disqusjs.skk.moe\n    disqusjs:\n      enable: false\n      # API Endpoint of Disqus API (https://disqus.com/api/docs/)\n      # leave api empty if you are able to connect to Disqus API\n      # otherwise you need a reverse proxy for Disqus API\n      # For example:\n      # api: https://disqus.skk.moe/disqus/\n      api:\n      apikey: # register new application from https://disqus.com/api/applications/\n      shortname: # See: https://disqus.com/admin/settings/general/\n    ```\n\n### Changyan (China)\n\nChangyan is the industry's leading social commenting system, supporting both PC and mobile access methods, providing a new way of commenting on websites. Changyan has a variety of common account login, triple filtering mechanism, real-time data statistics, fast data export, comprehensive support for mobile and other leading functions. It fully satisfies the needs of major websites for user login, comment, sharing, and review.\n\n1. Create an account or log into [Changyan](https://changyan.kuaizhan.com/), then add your site to get APP ID and APP KEY.\n2. Set the value `enable` to `true`, and add the obtained APP ID (`appid`) and APP KEY (`appkey`) to the `changyan` section in the {% label primary@theme config file %} as following:\n\n    ```yml next/_config.yml\n    # changyan\n    changyan:\n      enable: false\n      appid:\n      appkey:\n    ```\n\n### LiveRe\n\nLiveRe is a content platform based on social networking site reviews to help users communicate freely.\n\n1. Create an account or log into [LiveRe](https://livere.com), click on the `installation` button and select the free city version, then click on the `install now` button.\n2. Copy the `data-uid` field in the installation code to get your LiveRe UID.\n3. Add the obtained LiveRe UID to the `livere_uid` section in the {% label primary@theme config file %} as following:\n\n    ```yml next/_config.yml\n    # Support for LiveRe comments system.\n    # You can get your uid from https://livere.com/insight/myCode (General web site)\n    livere_uid: your_uid\n    ```\n\n### Gitalk\n\nGitalk is a modern comment component based on Github Issue and Preact.\n\n1. Click here to sign up for a [new OAuth Application](https://github.com/settings/applications/new). Other content can be filled in at will, but be sure to fill in the correct callback URL (usually the domain name corresponding to the comment page). Then you will get a Client ID and a Client secret.\n2. Create a repository you want to store Gitalk comments in your GitHub.\n3. Set the value `enable` to `true`, add Client ID (`client_id`) and Client secret (`client_secret`) in step 1, add your Github username (`github_id` and `admin_user`) and the created repository name (`repo`) in step 2, and edit other configurations in `gitalk` section in the {% label primary@theme config file %} as following:\n\n    ```yml next/_config.yml\n    # Gitalk\n    # For more information: https://gitalk.github.io\n    gitalk:\n      enable: false\n      github_id: # GitHub repo owner\n      repo: # Repository name to store issues\n      client_id: # GitHub Application Client ID\n      client_secret: # GitHub Application Client Secret\n      admin_user: # GitHub repo owner and collaborators, only these guys can initialize gitHub issues\n      distraction_free_mode: true # Facebook-like distraction free mode\n      # When the official proxy is not available, you can change it to your own proxy address\n      proxy: https://cors-anywhere.azm.workers.dev/https://github.com/login/oauth/access_token # This is official proxy address\n      # Gitalk's display language depends on user's browser or system environment\n      # If you want everyone visiting your site to see a uniform language, you can set a force language value\n      # Available values: en | es-ES | fr | ru | zh-CN | zh-TW\n      language:\n    ```\n\n{% note warning %}\nHexo has encode URLs by default since version 4.0: [Pull Request #3708](https://github.com/hexojs/hexo/pull/3708).\nGitalk relies on the md5 value of the page path for tagging, and this may cause issues. It's recommended to upgrade Hexo to 4.0 (or later), NexT to 7.7.0 (or later) to use Gitalk.\n{% endnote %}\n\n### Utterances\n\nA lightweight comments widget built on GitHub issues. Use GitHub issues for blog comments, wiki pages and more!\n\n```yml next/_config.yml\n# Utterances\n# For more information: https://utteranc.es\nutterances:\n  enable: false\n  repo: # Github repository name\n  # Available values: pathname | url | title | og:title\n  issue_term: pathname\n  # Available values: github-light | github-dark | preferred-color-scheme | github-dark-orange | icy-dark | dark-blue | photon-dark | boxy-light\n  theme: github-light\n```\n\n### Isso\n\nIsso – *Ich schrei sonst* – is a lightweight commenting server written in Python and JavaScript. It aims to be a drop-in replacement for Disqus.\n\n1. You need to [install and configure Isso](https://posativ.org/isso/docs/install/) on your server first.\n2. Set the value `isso` in the {% label primary@theme config file %} as the value `data-isso` in Isso script. An exemplary script tag is given in the `Integration` section of the [Isso quickstart document](https://posativ.org/isso/docs/quickstart/#integration), you need to modify it according to the URL of your server.\n\n    ```yml next/_config.yml\n    # Isso\n    # For more information: https://posativ.org/isso/\n    isso: # <data_isso>\n    ```\n"},{"title":"Search Services","url":"/docs/third-party-services/search-services.html","content":"\n### Algolia Search\n\nNexT provides Algolia search plugin to search your Hexo website content. It should be noted that only turn on `enable` of `algolia_search` in {% label primary@theme config file %} does not allow you to use the Algolia search correctly. You need to install the corresponding Hexo plugin to index your website on Algolia: [Hexo Algolia](https://github.com/oncletom/hexo-algolia) or [Hexo Algoliasearch](https://github.com/LouisBarranqueiro/hexo-algoliasearch).\n\n{% note danger %}\n**Known Issues**\n\n1. The latest version of the [Hexo Algolia](https://github.com/oncletom/hexo-algolia) plugin removes the content indexing feature, given Algolia's free account limitation.\n2. The [Hexo Algoliasearch](https://github.com/LouisBarranqueiro/hexo-algoliasearch) plugin provides content indexing functionality. The same problem exists with `Record Too Big` for Algolia's free account.\n{% endnote %}\n\nFollow the steps described below to complete the installation of Algolia search.\n\n{% tabs algolia-search %}\n<!-- tab Registration → -->\nRegister at [Algolia](https://www.algolia.com), you can log in directly using GitHub or Google Account. Upon Customer's initial sign-up for an Account, Customer will have a free, fourteen (14) day evaluation period (the «Evaluation Period») for the Algolia Services commencing on the Effective Date, subject to the limitations on Algolia's website. After that, Algolia offers a free, branded version for up to 10k records and 100k operations per month.\n\nIf a tutorial pops up, you can skip it. Go straight to create an `Index` which will be used later.\n![Algolia Create Index](/images/algolia-1.png)\n<!-- endtab -->\n\n<!-- tab Algolia Config → -->\n1. Go to the `API Keys` page and find your credentials. You will need the `Application ID` and the `Search-only API key` in the following sections. The `Admin API key` need to keep confidential. Never store your Admin API Key as `apiKey` in {% label info@site config file %}: it would give full control of your Algolia index to others and you don't want to face the consequences.\n![Algolia API Keys](/images/algolia-2.png)\n\n2. In the `API Keys` page, click the `All API Keys` button to switch to the corresponding tab. Then click the `New API Key` button to activate a pop-up box where you can setup authorizations and restrictions with a great level of precision. Enter `addObject`, `deleteObject`, `listIndexes`, `deleteIndex` features in ACL permissions that will be allowed for the given API key. And then click the `Create` button. Copy this newly created key to the clipboard, we call it a `High-privilege API key`.\n![Algolia API Keys 2](/images/algolia-3.png)\n![Algolia Configuring Records](/images/algolia-4.png)\n<!-- endtab -->\n\n<!-- tab Algolia Plugin → -->\nAlgolia requires users to upload their search index data either manually or via provided APIs. You need to choose one of the following two plugins to install. Both plugins will index your site and upload selected data to Algolia.\n\n{% subtabs algolia-plugin %}\n<!-- tab Hexo Algolia -->\nInstall and configure [Hexo Algolia](https://github.com/oncletom/hexo-algolia) in your Hexo directory.\n\n```bash\n$ cd hexo-site\n$ npm install hexo-algolia\n```\n\nIn your {% label info@site config file %}, add the following configuration and replace the `Application ID`, `Search-only API key` and `indexName` with corresponding fields obtained at Algolia.\n\n```yml hexo/_config.yml\nalgolia:\n  applicationID: \"Application ID\"\n  apiKey: \"Search-only API key\"\n  indexName: \"indexName\"\n```\n\nRun the following command to upload index data, keep a weather eye out the output of the command.\n\n```bash\n$ export HEXO_ALGOLIA_INDEXING_KEY=High-privilege API key # Use Git Bash\n# set HEXO_ALGOLIA_INDEXING_KEY=High-privilege API key # Use Windows command line\n$ hexo clean\n$ hexo algolia\n```\n\n![Reload Index](/images/algolia-5.png)\n<!-- endtab -->\n<!-- tab Hexo Algoliasearch -->\nInstall and configure [Hexo Algoliasearch](https://github.com/LouisBarranqueiro/hexo-algoliasearch) in your Hexo directory.\n\n```bash\n$ cd hexo-site\n$ npm install hexo-algoliasearch\n```\n\nIn your {% label info@site config file %}, add the following configuration and replace the `Application ID`, `Search-only API key`, `High-privilege API key` and `indexName` with corresponding fields obtained at Algolia.\n\n```yml hexo/_config.yml\nalgolia:\n  appId: \"Application ID\"\n  apiKey: \"Search-only API key\"\n  adminApiKey: \"High-privilege API key\"\n  indexName: \"indexName\"\n  chunkSize: 5000\n  fields:\n    - content:strip:truncate,0,500\n    - excerpt:strip\n    - gallery\n    - permalink\n    - photos\n    - slug\n    - tags\n    - title\n```\n\nRun the following command to upload index data, keep a weather eye out the output of the command.\n\n```bash\n$ hexo clean\n$ hexo algolia\n```\n<!-- endtab -->\n{% endsubtabs %}\n\n<!-- endtab -->\n\n<!-- tab NexT Config -->\nIn {% label primary@theme config file %}, turn on `enable` of `algolia_search`. At the same time, you need to **turn off other search plugins** like Local Search. You can also adjust the text in `labels` according to your needs.\n\n```yml next/_config.yml\n# Algolia Search\nalgolia_search:\n  enable: true\n  hits:\n    per_page: 10\n```\n<!-- endtab -->\n{% endtabs %}\n\n### Local Search\n\nLocal search does not require any external 3rd-party services and can be extra indexed by search engines. This search method is recommended for most users.\n\n{% tabs local-search %}\n<!-- tab Installation → -->\nInstall `hexo-generator-searchdb` by executing the following command in {% label info@site root dir %}:\n\n```bash\n$ npm install hexo-generator-searchdb\n```\n<!-- endtab -->\n\n<!-- tab Hexo Config → -->\nEdit {% label info@site config file %} and add following content:\n\n```yml hexo/_config.yml\nsearch:\n  path: search.xml\n  field: post\n  content: true\n  format: html\n```\n<!-- endtab -->\n\n<!-- tab NexT Config -->\nEdit {% label primary@theme config file %} to enable Local Search:\n\n```yml next/_config.yml\n# Local search\n# Dependencies: https://github.com/next-theme/hexo-generator-searchdb\nlocal_search:\n  enable: true\n  # If auto, trigger search by changing input.\n  # If manual, trigger search by pressing enter key or search button.\n  trigger: auto\n  # Show top n results per article, show all results by setting to -1\n  top_n_per_article: 1\n  # Unescape html strings to the readable one.\n  unescape: false\n  # Preload the search data when the page loads.\n  preload: false\n```\n<!-- endtab -->\n{% endtabs %}\n"},{"title":"Statistics and Analytics","url":"/docs/third-party-services/statistics-and-analytics.html","content":"\n{% note warning %}\nNexT will not send record to analytics service provider as long as the page's host name does not match `url` option set in {% label info@site config file %}. This will prevent local debugging from polluting analytics. Make sure you have configured `url` correctly, otherwise these statistics tools may not work as expected.\n{% endnote %}\n\n### Analytics Tools\n\n#### Google Analytics\n\n1. Create an account and log into [Google Analytics](https://analytics.google.com). [More detailed documentation](https://support.google.com/analytics/?hl=en#topic=3544906)\n2. Edit {% label primary@theme config file %} and fill `tracking_id` under section `google_analytics` with your Google track ID. Google track ID always starts with `UA-`.\n\n    ```yml next/_config.yml\n    # Google Analytics\n    google_analytics:\n      tracking_id: UA-XXXXXXXX-X\n      only_pageview: false\n    ```\n\n3. When field `only_pageview` is set to true, NexT will only send `pageview` event to Google Analytics.\nThe benefit of using this instead of `only_pageview: false` is reduce a external script on your site, which will give you better performance but no complete analytics function.\n\n#### Baidu Analytics (China)\n\n{% tabs baidu-analytics %}\n<!-- tab Login → -->\nLogin to [Baidu Analytics](https://tongji.baidu.com) and locate to site code getting page.\n<!-- endtab -->\n\n<!-- tab Script ID → -->\nCopy the script ID after `hm.js?`, like the following picture:\n![NexT Baidu Analytics](/images/analytics-baidu-id.png)\n<!-- endtab -->\n\n<!-- tab NexT Config -->\nEdit {% label primary@theme config file %} and change the value of `baidu_analytics` to your script ID.\n\n```yml next/_config.yml\n# Baidu Analytics ID\nbaidu_analytics: your_id\n```\n<!-- endtab -->\n{% endtabs %}\n\n#### Growingio Analytics\n\nOfficial documentation: https://docs.growingio.com/v3/developer-manual/sdkintegrated/web-js-sdk/latest-jssdk\n\nEdit {% label primary@theme config file %} and change the value of `growingio_analytics` to your project ID.\n\n```yml next/_config.yml\n# Growingio Analytics\ngrowingio_analytics: # <project_id>\n```\n\n#### Cloudflare Web Analytics\n\nEdit {% label primary@theme config file %} and change the value of `cloudflare_analytics` to your project ID.\n\n```yml next/_config.yml\n# Cloudflare Web Analytics\ncloudflare_analytics:\n```\n\n### Counting Tools\n\n#### LeanCloud (China)\n\nAdding article reading times counting to NexT theme. Documentation how to set the counter up and running safely aviable in [hexo-leancloud-counter-security](https://github.com/theme-next/hexo-leancloud-counter-security).\n\n{% tabs leanCloud-counter %}\n<!-- tab Get App Keys → -->\n1. Create an account or log in to [LeanCloud](https://console.leancloud.app/login), and then click the button to create an application in [dashboard](https://console.leancloud.app/apps).\n    ![LeanCloud](/images/valine-1.png)\n2. Go to the application you just created, select `Settings → App Keys` in the lower left corner, and you will see your APP ID and APP Key.\n    ![LeanCloud](/images/valine-2.png)\n<!-- endtab -->\n\n<!-- tab Installation → -->\nInstall `hexo-leancloud-counter-security` by executing the following command in {% label info@site root dir %}:\n\n```bash\n$ npm install hexo-leancloud-counter-security\n```\n<!-- endtab -->\n\n<!-- tab Hexo Config → -->\nEdit {% label info@site config file %} and add following content:\n\n```yml hexo/_config.yml\nleancloud_counter_security:\n  enable_sync: true\n  app_id: <your app id>\n  app_key: <your app key>\n  username: <your username> # Will be asked while deploying if is left blank\n  password: <your password> # Recommmended to be left blank. Will be asked while deploying if is left blank\n```\n<!-- endtab -->\n\n<!-- tab NexT Config -->\nEdit {% label primary@theme config file %} and fill options under `leancloud_visitors` section.\n\n```yml next/_config.yml\n# Show number of visitors to each article.\n# You can visit https://www.leancloud.cn get AppID and AppKey.\nleancloud_visitors:\n  enable: true\n  app_id: #<app_id>\n  app_key: #<app_key>\n  # Required for apps from CN region\n  server_url: # <your server url>\n  # Dependencies: https://github.com/theme-next/hexo-leancloud-counter-security\n  # If you don't care about security in lc counter and just want to use it directly\n  # (without hexo-leancloud-counter-security plugin), set the `security` to `false`.\n  security: true\n```\n<!-- endtab -->\n{% endtabs %}\n\n#### Firebase\n\nFirebase Analytics provides the functionality of visitor statistics.\n\n{% tabs firestore %}\n<!-- tab Get apiKey & projectId → -->\nLogin to [Firebase](https://console.firebase.google.com/u/0/) to get apiKey and projectId. The Web API Key gets generated once you go into the \"Authentication\" section for the first time.\n\n![Firebase](/images/firebase.png)\n\n[More detailed documentation](https://firebase.google.com/docs/firestore/)\n<!-- endtab -->\n\n<!-- tab NexT Config -->\nEdit {% label primary@theme config file %} and add or change `firestore` section:\n\n```yml next/_config.yml\nfirestore:\n  enable: true\n  collection: articles #required, a string collection name to access firestore database\n  apiKey: #required\n  projectId: #required\n```\n<!-- endtab -->\n{% endtabs %}\n\n#### Busuanzi Counting (China)\n\n{% tabs busuanzi-counting %}\n\n<!-- tab Global Settings → -->\nEdit `busuanzi_count` option in {% label primary@theme config file %}.\nWhen `enable: true`, global setting is enabled. If `total_visitors`, `total_views`, `post_views` are all `false`, Busuanzi only counts but never shows.\n<!-- endtab -->\n\n<!-- tab Site UV Settings → -->\nWhen `total_visitors: true`, it will show site UV in footer. You can also use font-awesome by setting `total_visitors_icon` to the name of the icon.\n\n```yml next/_config.yml\nbusuanzi_count:\n  total_visitors: true\n  total_visitors_icon: fa fa-user\n```\n<!-- endtab -->\n\n<!-- tab Site PV Settings → -->\nWhen `total_views: true`, it will show site UV in footer. You can also use font-awesome by setting `total_views_icon` to the name of the icon.\n\n```yml next/_config.yml\nbusuanzi_count:\n  total_views: true\n  total_views_icon: fa fa-eye\n```\n<!-- endtab -->\n\n<!-- tab Per-page PV Settings -->\nWhen `post_views: true`, it will show page PV in post meta. You can also use font-awesome by setting `post_views_icon` to the name of the icon.\n\n```yml next/_config.yml\nbusuanzi_count:\n  post_views: true\n  post_views_icon: far fa-eye\n```\n<!-- endtab -->\n{% endtabs %}\n"},{"title":"Button","url":"/docs/tag-plugins/button.html","content":"\n### Usage\n\n```jinja\n{% button url, text, icon [class], [title] %}\n<!-- Tag Alias -->\n{% btn url, text, icon [class], [title] %}\n```\n\n- `url`     : Absolute or relative path to URL.\n- `text`    : Button text. Required if no icon specified.\n- `icon`    : Font Awesome icon name. Required if no text specified.\n- `[class]` : *Optional parameter.* Font Awesome class(es): `fa-fw` | `fa-lg` | `fa-2x` | `fa-3x` | `fa-4x` | `fa-5x`\n- `[title]` : *Optional parameter.* Tooltip at mouseover.\n\n### Examples\n\n```jinja\n{% button #, Text %}\n```\n\n{% button #, Text %}\n\n#### Button with text & title\n\n```jinja\n{% btn #, Text %}{% btn #, Text & Title,, Title %}\n```\n\n{% btn #, Text %}{% btn #, Text & Title,, Title %}\n\n```jinja\n{% btn #, Text %} {% btn #, Text & Title,, Title %}\n```\n\n{% btn #, Text %} {% btn #, Text & Title,, Title %}\n\n```jinja\n{% btn #, Text %}\n{% btn #, Text & Title,, Title %}\n```\n\n{% btn #, Text %}\n{% btn #, Text & Title,, Title %}\n\n#### Button with icon\n\n```jinja\n{% btn #,, home fa-5x %}\n{% btn #,, home fa-4x %}\n{% btn #,, home fa-3x %}\n{% btn #,, home fa-2x %}\n{% btn #,, home fa-lg %}\n{% btn #,, home %}\n```\n\n{% btn #,, home fa-5x %}\n{% btn #,, home fa-4x %}\n{% btn #,, home fa-3x %}\n{% btn #,, home fa-2x %}\n{% btn #,, home fa-lg %}\n{% btn #,, home %}\n\n#### Button with text & icon\n\n```jinja\n{% btn #, Text & Icon (buggy), home %}\n{% btn #, Text & Icon (fixed width), home fa-fw %}\n```\n\n{% btn #, Text & Icon (buggy), home %}\n{% btn #, Text & Icon (fixed width), home fa-fw %}\n\n```jinja\n{% btn #, Text & Large Icon, home fa-fw fa-lg %}\n{% btn #, Text & Large Icon & Title, home fa-fw fa-lg, Title %}\n```\n\n{% btn #, Text & Large Icon, home fa-fw fa-lg %}\n{% btn #, Text & Large Icon & Title, home fa-fw fa-lg, Title %}\n\n#### Button inside text\n\n```jinja\nLorem {% btn #, Lorem, home fa-fw fa-lg %} ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.\n\nLorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident {% btn #, Ipsum, home fa-fw fa-lg %}, sunt in culpa qui officia deserunt mollit anim id est laborum.\n```\n\nLorem {% btn #, ipsum, home fa-fw fa-lg %} dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.\nLorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure {% btn #, dolor, home fa-fw fa-lg %} in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.\nLorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non {% btn #, proident, home fa-fw fa-lg %}, sunt in culpa qui officia deserunt mollit anim id est laborum.\n\n#### Button inside other tag\n\n```jinja\n{% note info %}\n{% btn #, Text & Icon, home fa-fw %}\n\n{% btn #,, home, Title %}{% btn #, Text %}\n\n[Link](#)\n{% endnote %}\n```\n\n{% note info %}\n{% btn #, Text & Icon, home fa-fw fa-lg %}\n\n{% btn #,, home fa-lg, Title %}{% btn #, Text %}\n\n[Link](#)\n{% endnote %}\n\n#### Button margin\n\n```jinja\n<div class=\"text-center\"><div>{% btn #,, heading %}{% btn #,, fab fa-edge %}{% btn #,, times %}{% btn #,, circle-notch %}</div>\n<div>{% btn #,, italic %}{% btn #,, fab fa-scribd %}</div>\n<div>{% btn #,, fab fa-google %}{% btn #,, fab fa-chrome %}{% btn #,, fab fa-opera %}{% btn #,, gem fa-rotate-270 %}</div></div>\n```\n\n<div class=\"text-center\"><div>{% btn #,, heading %}{% btn #,, fab fa-edge %}{% btn #,, times %}{% btn #,, circle-notch %}</div>\n<div>{% btn #,, italic %}{% btn #,, fab fa-scribd %}</div>\n<div>{% btn #,, fab fa-google %}{% btn #,, fab fa-chrome %}{% btn #,, fab fa-opera %}{% btn #,, gem fa-rotate-270 %}</div></div>\n\n#### Button with relative URL\n\n```jinja\n<div class=\"text-center\">{% btn #, Previous Chapter, arrow-left fa-fw fa-lg, Previous Chapter (Full Image) %} {% btn #, Next Chapter, arrow-right fa-fw fa-lg, Next Chapter (Label) %}</div>\n```\n\n<div class=\"text-center\">{% btn /docs/tag-plugins/full-image, Previous Chapter, arrow-left fa-fw fa-lg, Previous Chapter (Full Image) %} {% btn /docs/tag-plugins/label, Next Chapter, arrow-right fa-fw fa-lg, Next Chapter (Label) %}</div>\n\n#### Button with absolute URL\n\n```jinja\n<div class=\"text-center\">{% btn https://github.com, GitHub, fab fa-github fa-fw fa-lg, GitHub %}</div>\n```\n\n<div class=\"text-center\">{% btn https://github.com, GitHub, fab fa-github fa-fw fa-lg, GitHub %}</div>\n"},{"title":"Caniuse","url":"/docs/tag-plugins/caniuse.html","content":"\n### Usage\n\n```jinja\n{% caniuse feature @ [periods] %}\n<!-- Tag Alias -->\n{% can feature @ [periods] %}\n```\n\n- `feature`   : Search for the feature you want on https://caniuse.com, then click on the hash sign to the left of the search result heading and you will get the unique name of this feature.\n- `[periods]` : *Optional parameter.* Select the browser versions to display. Supported values: `past_1`, `past_2`, `past_3`, `past_4`, `past_5`, `current`, `future_3`, `future_2`, `future_1`. If this value is empty, the default value `current` will be used.\n\n### Examples\n\n#### Caniuse without periods\n\n```jinja\n{% caniuse fetch %}\n```\n\n{% caniuse fetch %}\n\n#### Caniuse with current period\n\n```jinja\n{% caniuse sharedarraybuffer @ current %}\n```\n\n{% caniuse sharedarraybuffer @ current %}\n\n#### Caniuse with future periods\n\n```jinja\n{% caniuse loading-lazy-attr @ future_3,future_2,future_1 %}\n```\n\n{% caniuse loading-lazy-attr @ future_3,future_2,future_1 %}\n\n#### Caniuse with past periods\n\n```jinja\n{% caniuse link-rel-modulepreload @ past_1,past_2,past_3,past_4,past_5 %}\n```\n\n{% caniuse link-rel-modulepreload @ past_1,past_2,past_3,past_4,past_5 %}\n"},{"title":"Group Pictures","url":"/docs/tag-plugins/group-pictures.html","content":"\n### Usage\n\n```jinja\n{% grouppicture [number]-[layout] %}{% endgrouppicture %}\n<!-- Tag Alias -->\n{% gp [number]-[layout] %}{% endgp %}\n```\n\n- `[number]` : *Optional parameter.* Total number of pictures to add in the group pictures.\n- `[layout]` : *Optional parameter.* The index of the layout, which can be obtained according to the figure below. For example, if you want to apply the second layout to 4 pictures, then use\n\n    ```jinja\n    {% grouppicture 4-2 %}{% endgrouppicture %}\n    ```\n\n![Group Picture Layout](/images/group-picture-1.png)\n![Group Picture Layout](/images/group-picture-2.png)\n\n### Examples\n\n```jinja\n{% grouppicture 3-3 %}\n![](/images/next.svg)\n![](/images/next.svg)\n![](/images/next.svg)\n{% endgrouppicture %}\n```\n\n{% grouppicture 3-3 %}\n![](/images/next.svg)\n![](/images/next.svg)\n![](/images/next.svg)\n{% endgrouppicture %}\n\n```jinja\n{% gp 5-2 %}\n![](/images/next.svg)\n![](/images/next.svg)\n![](/images/next.svg)\n![](/images/next.svg)\n![](/images/next.svg)\n{% endgp %}\n```\n\n{% gp 5-2 %}\n![](/images/next.svg)\n![](/images/next.svg)\n![](/images/next.svg)\n![](/images/next.svg)\n![](/images/next.svg)\n{% endgp %}\n"},{"title":"Tag Plugins","url":"/docs/tag-plugins/index.html","content":"\nTag Plugin is a way to make special style contents supported by Hexo. For example, we cannot show a image with custom size in standard Markdown. And then we can use tag plugins to solve it. [Hexo has a lot of tags](https://hexo.io/docs/tag-plugins) which can help user. And Hexo also have interfaces to themes which make themes able to create their own tags. Following tags are provided by NexT:\n\n* [Button](/docs/tag-plugins/button.html)\n* [Caniuse](/docs/tag-plugins/caniuse.html)\n* [Centered Quote](#Centered-Quote)\n* [Group Pictures](/docs/tag-plugins/group-pictures.html)\n* [Label](/docs/tag-plugins/label.html)\n* [Link Grid](/docs/tag-plugins/link-grid.html)\n* [Mermaid](/docs/tag-plugins/mermaid.html)\n* [Note](/docs/tag-plugins/note.html)\n* [PDF](/docs/tag-plugins/pdf.html)\n* [Tabs](/docs/tag-plugins/tabs.html)\n* [Video](#Video)\n\nThese tag plugins are only available in the theme NexT. If you switch to other Hexo themes, they may cause rendering errors.\n\n### Centered Quote\n\nThis tag will make a quote with two lines before and after it, and text quoted will be centered. When using centered quote, if we have multi-line text, and each line has a different length, the quote won't be symmetrical, so it's recommended to use when only have single line text. For example before article all after article to make a summary.\n\n#### Usage\n\n```jinja\n{% centerquote %}Something{% endcenterquote %}\n<!-- Tag Alias -->\n{% cq %}Something{% endcq %}\n```\n\n#### Examples\n\n```jinja\n{% cq %}Elegant in code, simple in core{% endcq %}\n```\n\n{% cq %}Elegant in code, simple in core{% endcq %}\n\n### Video\n\n#### Usage\n\n```jinja\n{% video url %}\n```\n\n#### Examples\n\n```jinja\n{% video https://example.com/sample.mp4 %}\n```\n\n```jinja\n{% video /path/to/your/video.mp4 %}\n```\n"},{"title":"Label","url":"/docs/tag-plugins/label.html","content":"\n### Usage\n\n```jinja\n{% label [class]@text %}\n```\n\n- `[class]` : *Optional parameter.* Supported values: `default` | `primary` | `success` | `info` | `warning` | `danger`.\n  If not specified, the default style of the browser will be used, which may be different in different browsers.\n- `text`    : `@text` can be specified with or without space\n  E.g. `success @text` is the same as `success@text`.\n\n### Examples\n\n```jinja\nLorem {% label @ipsum %} {% label primary@dolor sit %} amet, consectetur {% label success@adipiscing elit, %} sed {% label info@do eiusmod %} tempor incididunt ut labore et dolore magna aliqua.\n\nUt enim *{% label warning @ad %}* minim veniam, quis **{% label danger@nostrud %}** exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.\n\nDuis aute irure dolor in reprehenderit in voluptate ~~{% label default @velit %}~~ <mark>esse</mark> cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.\n```\n\nLorem {% label @ipsum %} {% label primary@dolor sit %} amet, consectetur {% label success@adipiscing elit, %} sed {% label info@do eiusmod %} tempor incididunt ut labore et dolore magna aliqua.\n\nUt enim *{% label warning @ad %}* minim veniam, quis **{% label danger@nostrud %}** exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.\n\nDuis aute irure dolor in reprehenderit in voluptate ~~{% label default @velit %}~~ <mark>esse</mark> cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.\n"},{"title":"Link Grid","url":"/docs/tag-plugins/link-grid.html","content":"\n### Usage\n\n```jinja\n{% linkgrid [image] [delimiter] [comment] %}{% endlinkgrid %}\n<!-- Tag Alias -->\n{% lg [image] [delimiter] [comment] %}{% endlg %}\n```\n\n- `[image]`     : *Optional parameter.* Default image URL.\n- `[delimiter]` : *Optional parameter.* If the optional delimiter parameter is given, it is interpreted as the delimiter of items in each line.\n- `[comment]`   : *Optional parameter.* If the optional comment parameter is given, it is interpreted as the symbol to comment out a line.\n\n### Examples\n\n```jinja\n{% linkgrid %}\nTheme NexT | https://theme-next.js.org/ | Stay Simple. Stay NexT. | /images/apple-touch-icon-next.png\nTheme NexT | https://theme-next.js.org/ | Stay Simple. Stay NexT. | /images/apple-touch-icon-next.png\nTheme NexT | https://theme-next.js.org/ | Stay Simple. Stay NexT. | /images/apple-touch-icon-next.png\nTheme NexT | https://theme-next.js.org/ | Stay Simple. Stay NexT. | /images/apple-touch-icon-next.png\n% Theme NexT | https://theme-next.js.org/ | Stay Simple. Stay NexT. | /images/apple-touch-icon-next.png\n{% endlinkgrid %}\n```\n\n{% linkgrid %}\nTheme NexT | https://theme-next.js.org/ | Stay Simple. Stay NexT. | /images/apple-touch-icon-next.png\nTheme NexT | https://theme-next.js.org/ | Stay Simple. Stay NexT. | /images/apple-touch-icon-next.png\nTheme NexT | https://theme-next.js.org/ | Stay Simple. Stay NexT. | /images/apple-touch-icon-next.png\nTheme NexT | https://theme-next.js.org/ | Stay Simple. Stay NexT. | /images/apple-touch-icon-next.png\n% Theme NexT | https://theme-next.js.org/ | Stay Simple. Stay NexT. | /images/apple-touch-icon-next.png\n{% endlinkgrid %}\n\n```jinja\n{% lg /images/apple-touch-icon-next.png , %}\nTheme NexT , https://theme-next.js.org/ , Stay Simple. Stay NexT. , /images/apple-touch-icon-next.png\nTheme NexT , https://theme-next.js.org/ , Stay Simple. Stay NexT. , /images/apple-touch-icon-next.png\nTheme NexT , https://theme-next.js.org/ , Stay Simple. Stay NexT. , /images/apple-touch-icon-next.png\n% Theme NexT , https://theme-next.js.org/ , Stay Simple. Stay NexT. , /images/apple-touch-icon-next.png\n{% endlg %}\n```\n\n{% lg /images/apple-touch-icon-next.png , %}\nTheme NexT , https://theme-next.js.org/ , Stay Simple. Stay NexT. , /images/apple-touch-icon-next.png\nTheme NexT , https://theme-next.js.org/ , Stay Simple. Stay NexT. , /images/apple-touch-icon-next.png\nTheme NexT , https://theme-next.js.org/ , Stay Simple. Stay NexT. , /images/apple-touch-icon-next.png\n% Theme NexT , https://theme-next.js.org/ , Stay Simple. Stay NexT. , /images/apple-touch-icon-next.png\n{% endlg %}\n"},{"title":"Mermaid","url":"/docs/tag-plugins/mermaid.html","content":"\n### Settings\n\n```yml next/_config.yml\n# Mermaid tag\nmermaid:\n  enable: true\n  # Available themes: default | dark | forest | neutral\n  theme:\n    light: default\n    dark: dark\n```\n\n### Usage\n\n```jinja\n{% mermaid type %}\n{% endmermaid %}\n```\n\n- `type` : type of the mermaid chart, visit https://github.com/mermaid-js/mermaid for more information.\n\n### Examples\n\n```jinja\n{% mermaid graph TD %}\nA[Hard] -->|Text| B(Round)\nB --> C{Decision}\nC -->|One| D[Result 1]\nC -->|Two| E[Result 2]\n{% endmermaid %}\n```\n\n{% mermaid graph TD %}\nA[Hard] -->|Text| B(Round)\nB --> C{Decision}\nC -->|One| D[Result 1]\nC -->|Two| E[Result 2]\n{% endmermaid %}\n\n```jinja\n{% mermaid sequenceDiagram %}\nAlice->>John: Hello John, how are you?\nloop Healthcheck\n    John->>John: Fight against hypochondria\nend\nNote right of John: Rational thoughts!\nJohn-->>Alice: Great!\nJohn->>Bob: How about you?\nBob-->>John: Jolly good!\n{% endmermaid %}\n```\n\n{% mermaid sequenceDiagram %}\nAlice->>John: Hello John, how are you?\nloop Healthcheck\n    John->>John: Fight against hypochondria\nend\nNote right of John: Rational thoughts!\nJohn-->>Alice: Great!\nJohn->>Bob: How about you?\nBob-->>John: Jolly good!\n{% endmermaid %}\n\n```jinja\n{% mermaid gantt %}\ndateFormat  YYYY-MM-DD\nsection Section\nCompleted :done,    des1, 2014-01-06,2014-01-08\nActive        :active,  des2, 2014-01-07, 3d\nParallel 1   :         des3, after des1, 1d\nParallel 2   :         des4, after des1, 1d\nParallel 3   :         des5, after des3, 1d\nParallel 4   :         des6, after des4, 1d\n{% endmermaid %}\n```\n\n{% mermaid gantt %}\ndateFormat  YYYY-MM-DD\nsection Section\nCompleted :done,    des1, 2014-01-06,2014-01-08\nActive        :active,  des2, 2014-01-07, 3d\nParallel 1   :         des3, after des1, 1d\nParallel 2   :         des4, after des1, 1d\nParallel 3   :         des5, after des3, 1d\nParallel 4   :         des6, after des4, 1d\n{% endmermaid %}\n\n```jinja\n{% mermaid classDiagram %}\nClass01 <|-- AveryLongClass : Cool\n<<interface>> Class01\nClass09 --> C2 : Where am i?\nClass09 --* C3\nClass09 --|> Class07\nClass07 : equals()\nClass07 : Object[] elementData\nClass01 : size()\nClass01 : int chimp\nClass01 : int gorilla\nclass Class10 {\n  <<service>>\n  int id\n  size()\n}\n{% endmermaid %}\n```\n\n{% mermaid classDiagram %}\nClass01 <|-- AveryLongClass : Cool\n<<interface>> Class01\nClass09 --> C2 : Where am i?\nClass09 --* C3\nClass09 --|> Class07\nClass07 : equals()\nClass07 : Object[] elementData\nClass01 : size()\nClass01 : int chimp\nClass01 : int gorilla\nclass Class10 {\n  <<service>>\n  int id\n  size()\n}\n{% endmermaid %}\n\n```jinja\n{% mermaid stateDiagram %}\n[*] --> Still\nStill --> [*]\nStill --> Moving\nMoving --> Still\nMoving --> Crash\nCrash --> [*]\n{% endmermaid %}\n```\n\n{% mermaid stateDiagram %}\n[*] --> Still\nStill --> [*]\nStill --> Moving\nMoving --> Still\nMoving --> Crash\nCrash --> [*]\n{% endmermaid %}\n\n```jinja\n{% mermaid pie %}\n\"Dogs\" : 386\n\"Cats\" : 85\n\"Rats\" : 15\n{% endmermaid %}\n```\n\n{% mermaid pie %}\n\"Dogs\" : 386\n\"Cats\" : 85\n\"Rats\" : 15\n{% endmermaid %}\n\n```jinja\n{% mermaid journey %}\ntitle My working day\nsection Go to work\n  Make tea: 5: Me\n  Go upstairs: 3: Me\n  Do work: 1: Me, Cat\nsection Go home\n  Go downstairs: 5: Me\n  Sit down: 3: Me\n{% endmermaid %}\n```\n\n{% mermaid journey %}\ntitle My working day\nsection Go to work\n  Make tea: 5: Me\n  Go upstairs: 3: Me\n  Do work: 1: Me, Cat\nsection Go home\n  Go downstairs: 5: Me\n  Sit down: 3: Me\n{% endmermaid %}\n"},{"title":"Note (Bootstrap Callout)","url":"/docs/tag-plugins/note.html","content":"\n### Settings\n\n```yml next/_config.yml\nnote:\n  # Note tag style values:\n  #  - simple    bs-callout old alert style. Default.\n  #  - modern    bs-callout new (v2-v3) alert style.\n  #  - flat      flat callout style with background, like on Mozilla or StackOverflow.\n  #  - disabled  disable all CSS styles import of note tag.\n  style: simple\n  icons: false\n  # Offset lighter of background in % for modern and flat styles (modern: -12 | 12; flat: -18 | 6).\n  # Offset also applied to label tag variables. This option can work with disabled note tag.\n  light_bg_offset: 0\n```\n\n### Usage\n\n```jinja\n{% note [class] [no-icon] [summary] %}\nAny content (support inline tags too).\n{% endnote %}\n```\n\n- `[class]`   : *Optional parameter.* Supported values: default | primary | success | info | warning | danger.\n- `[no-icon]` : *Optional parameter.* Disable icon in note.\n- `[summary]` : *Optional parameter.* Optional summary of the note.\n\nAll parameters are optional.\n\n### Examples\n\n```jinja\n{% note %}\n#### Header\n(without define class style)\n{% endnote %}\n```\n\n{% note %}\n\n#### Header\n\n(without define class style)\n{% endnote %}\n\n```jinja\n{% note default %}\n#### Default Header\nWelcome to [Hexo!](https://hexo.io)\n{% endnote %}\n```\n\n{% note default %}\n\n#### Default Header\n\nWelcome to [Hexo!](https://hexo.io)\n{% endnote %}\n\n```jinja\n{% note primary %}\n#### Primary Header\n**Welcome** to [Hexo!](https://hexo.io)\n{% endnote %}\n```\n\n{% note primary %}\n\n#### Primary Header\n\n**Welcome** to [Hexo!](https://hexo.io)\n{% endnote %}\n\n```jinja\n{% note info %}\n#### Info Header\n**Welcome** to [Hexo!](https://hexo.io)\n{% endnote %}\n```\n\n{% note info %}\n\n#### Info Header\n\n**Welcome** to [Hexo!](https://hexo.io)\n{% endnote %}\n\n```jinja\n{% note success %}\n#### Success Header\n**Welcome** to [Hexo!](https://hexo.io)\n{% endnote %}\n```\n\n{% note success %}\n\n#### Success Header\n\n**Welcome** to [Hexo!](https://hexo.io)\n{% endnote %}\n\n```jinja\n{% note warning %}\n#### Warning Header\n**Welcome** to [Hexo!](https://hexo.io)\n{% endnote %}\n```\n\n{% note warning %}\n\n#### Warning Header\n\n**Welcome** to [Hexo!](https://hexo.io)\n{% endnote %}\n\n```jinja\n{% note danger %}\n#### Danger Header\n**Welcome** to [Hexo!](https://hexo.io)\n{% endnote %}\n```\n\n{% note danger %}\n\n#### Danger Header\n\n**Welcome** to [Hexo!](https://hexo.io)\n{% endnote %}\n\n```jinja\n{% note info no-icon %}\n#### No icon note\nNote **without** icon: `note info no-icon`\n{% endnote %}\n```\n\n{% note info no-icon %}\n\n#### No icon note\n\nNote **without** icon: `note info no-icon`\n{% endnote %}\n\n```jinja\n{% note primary This is a summary %}\n#### Details and summary\nNote with summary: `note primary This is a summary`\n{% endnote %}\n```\n\n{% note primary This is a summary %}\n\n#### Details and summary\n\nNote with summary: `note primary This is a summary`\n{% endnote %}\n\n```jinja\n{% note info no-icon This is a summary %}\n#### Details and summary (No icon)\nNote with summary: `note info no-icon This is a summary`\n{% endnote %}\n```\n\n{% note info no-icon This is a summary %}\n\n#### Details and summary (No icon)\n\nNote with summary: `note info no-icon This is a summary`\n{% endnote %}\n\n```jinja\n{% note success %}\n#### Codeblock in note\n{% code %}\ncode block in note tag\ncode block in note tag\ncode block in note tag\n{% endcode %}\n{% endnote %}\n```\n\n{% note success %}\n\n#### Codeblock in note\n\n{% code %}\ncode block in note tag\ncode block in note tag\ncode block in note tag\n{% endcode %}\n{% endnote %}\n\n```jinja\n{% note default %}\n#### Lists in note\n* ul\n* ul\n    * ul\n    * ul\n* ul\n\n1. ol\n2. ol\n    1. ol\n    2. ol\n3. ol\n{% endnote %}\n```\n\n{% note default %}\n\n#### Lists in note\n\n- ul\n- ul\n  - ul\n  - ul\n- ul\n\n1. ol\n2. ol\n    1. ol\n    2. ol\n3. ol\n{% endnote %}\n\n```jinja\n#### Table in Note\n{% note default %}\n| 1 | 2 |\n| - | - |\n| 3 | 4 |\n| 5 | 6 |\n| 7 | 8 |\n{% endnote %}\n```\n\n{% note default %}\n\n#### Table in note\n\n| 1 | 2 |\n| - | - |\n| 3 | 4 |\n| 5 | 6 |\n| 7 | 8 |\n{% endnote %}\n"},{"title":"PDF","url":"/docs/tag-plugins/pdf.html","content":"\n### Settings\n\n```yml next/_config.yml\npdf:\n  enable: true\n  # Default height\n  height: 500px\n```\n\n### Usage\n\n```jinja\n{% pdf url [height] %}\n```\n\n- `url`      : The URL (Absolute path) of the PDF file.\n- `[height]` : *Optional parameter.* Height of the PDF display element, e.g. 800px.\n\n{% note warning %}\nThe loading of pdf.js or pdf file might be blocked by CORS policy. If you want to load resources from another website, make sure the Access-Control-Allow-Origin header is set correctly. See also [Access-Control-Allow-Origin - HTTP | MDN](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Access-Control-Allow-Origin).\n{% endnote %}\n\n### Examples\n\n```jinja\n{% pdf https://example.com/sample.pdf %}\n```\n\n```jinja\n{% pdf /path/to/your/file.pdf 600px %}\n```\n"},{"title":"Tabs","url":"/docs/tag-plugins/tabs.html","content":"\n### Settings\n\n```yml next/_config.yml\ntabs:\n  # Make the nav bar of tabs with long content stick to the top.\n  sticky: false\n  transition:\n    tabs: false\n    labels: true\n```\n\n### Usage\n\n```jinja\n{% tabs Unique name, [index] %}\n<!-- tab [Tab caption] [@icon] -->\nAny content (support inline tags too).\n<!-- endtab -->\n{% endtabs %}\n```\n\n- `Unique name`   : Unique name of tabs block tag without comma.\n  Will be used in #id's as prefix for each tab with their index numbers.\n  If there are whitespaces in name, for generate #id all whitespaces will replaced by dashes.\n  Only for current url of post/page must be unique!\n- `[index]`       : Index number of active tab.\n  If not specified, first tab (1) will be selected.\n  If index is -1, no tab will be selected. It's will be something like spoiler.\n  Optional parameter.\n- `[Tab caption]` : Caption of current tab.\n  If not caption specified, unique name with tab index suffix will be used as caption of tab.\n  If not caption specified, but specified icon, caption will empty.\n  Optional parameter.\n- `[@icon]`       : Font Awesome icon name.\n  Can be specified with or without space; e.g. 'Tab caption @icon' is the same as 'Tab caption@icon'.\n  Optional parameter.\n\n### Examples\n\n```jinja\n{% tabs First unique name %}\n<!-- tab -->\n**This is Tab 1.**\n<!-- endtab -->\n\n<!-- tab -->\n**This is Tab 2.**\n<!-- endtab -->\n\n<!-- tab -->\n**This is Tab 3.**\n<!-- endtab -->\n{% endtabs %}\n```\n\n{% tabs First unique name %}\n<!-- tab -->\n**This is Tab 1.**\n<!-- endtab -->\n\n<!-- tab -->\n**This is Tab 2.**\n<!-- endtab -->\n\n<!-- tab -->\n**This is Tab 3.**\n<!-- endtab -->\n{% endtabs %}\n\n#### Tabs with 3rd tab selected\n\n```jinja\n{% tabs Second unique name, 3 %}\n<!-- tab -->\n**This is Tab 1.**\n<!-- endtab -->\n\n<!-- tab -->\n**This is Tab 2.**\n<!-- endtab -->\n\n<!-- tab -->\n**This is Tab 3.**\n<!-- endtab -->\n{% endtabs %}\n```\n\n{% tabs Second unique name, 3 %}\n<!-- tab -->\n**This is Tab 1.**\n<!-- endtab -->\n\n<!-- tab -->\n**This is Tab 2.**\n<!-- endtab -->\n\n<!-- tab -->\n**This is Tab 3.**\n<!-- endtab -->\n{% endtabs %}\n\n#### Tabs with no tab selected\n\n```jinja\n{% tabs Third unique name, -1 %}\n<!-- tab -->\n**This is Tab 1.**\n<!-- endtab -->\n\n<!-- tab -->\n**This is Tab 2.**\n<!-- endtab -->\n\n<!-- tab -->\n**This is Tab 3.**\n<!-- endtab -->\n{% endtabs %}\n```\n\n{% tabs Third unique name, -1 %}\n<!-- tab -->\n**This is Tab 1.**\n<!-- endtab -->\n\n<!-- tab -->\n**This is Tab 2.**\n<!-- endtab -->\n\n<!-- tab -->\n**This is Tab 3.**\n<!-- endtab -->\n{% endtabs %}\n\n#### Tabs with custom labels\n\n```jinja\n{% tabs Fourth unique name %}\n<!-- tab Solution 1 -->\n**This is Tab 1.**\n<!-- endtab -->\n\n<!-- tab Solution 2 -->\n**This is Tab 2.**\n<!-- endtab -->\n\n<!-- tab Solution 3 -->\n**This is Tab 3.**\n<!-- endtab -->\n{% endtabs %}\n```\n\n{% tabs Fourth unique name %}\n<!-- tab Solution 1 -->\n**This is Tab 1.**\n<!-- endtab -->\n\n<!-- tab Solution 2 -->\n**This is Tab 2.**\n<!-- endtab -->\n\n<!-- tab Solution 3 -->\n**This is Tab 3.**\n<!-- endtab -->\n{% endtabs %}\n\n#### Tabs with icons only\n\n```jinja\n{% tabs Fifth unique name %}\n<!-- tab @text-width -->\n**This is Tab 1.**\n<!-- endtab -->\n\n<!-- tab @font -->\n**This is Tab 2.**\n<!-- endtab -->\n\n<!-- tab @bold -->\n**This is Tab 3.**\n<!-- endtab -->\n{% endtabs %}\n```\n\n{% tabs Fifth unique name %}\n<!-- tab @text-width -->\n**This is Tab 1.**\n<!-- endtab -->\n\n<!-- tab @font -->\n**This is Tab 2.**\n<!-- endtab -->\n\n<!-- tab @bold -->\n**This is Tab 3.**\n<!-- endtab -->\n{% endtabs %}\n\n#### Tabs with icons and labels\n\n```jinja\n{% tabs Sixth unique name %}\n<!-- tab Solution 1@text-width -->\n**This is Tab 1.**\n<!-- endtab -->\n\n<!-- tab Solution 2@font -->\n**This is Tab 2.**\n<!-- endtab -->\n\n<!-- tab Solution 3@bold -->\n**This is Tab 3.**\n<!-- endtab -->\n{% endtabs %}\n```\n\n{% tabs Sixth unique name %}\n<!-- tab Solution 1@text-width -->\n**This is Tab 1.**\n<!-- endtab -->\n\n<!-- tab Solution 2@font -->\n**This is Tab 2.**\n<!-- endtab -->\n\n<!-- tab Solution 3@bold -->\n**This is Tab 3.**\n<!-- endtab -->\n{% endtabs %}\n\n#### Tabs permalinks test\n\n```jinja\nPermalink for > [Tab one](#tab-one).\nPermalink for > [Tab one 1](#tab-one-1).\nPermalink for > [Tab one 2](#tab-one-2).\nPermalink for > [Tab one 3](#tab-one-3).\n\nPermalink for > [Tab two](#tab-two).\nPermalink for > [Tab two 1](#tab-two-1).\nPermalink for > [Tab two 2](#tab-two-2).\nPermalink for > [Tab two 3](#tab-two-3).\n\n{% tabs Tab one %}\n<!-- tab -->\n**This is Tab 1.**\n<!-- endtab -->\n\n<!-- tab -->\n**This is Tab 2.**\n<!-- endtab -->\n\n<!-- tab -->\n**This is Tab 3.**\n<!-- endtab -->\n{% endtabs %}\n\n{% tabs Tab two %}\n<!-- tab -->\n**This is Tab 1.**\n<!-- endtab -->\n\n<!-- tab -->\n**This is Tab 2.**\n<!-- endtab -->\n\n<!-- tab -->\n**This is Tab 3.**\n<!-- endtab -->\n{% endtabs %}\n```\n\nPermalink for > [Tab one](#tab-one).\nPermalink for > [Tab one 1](#tab-one-1).\nPermalink for > [Tab one 2](#tab-one-2).\nPermalink for > [Tab one 3](#tab-one-3).\n\nPermalink for > [Tab two](#tab-two).\nPermalink for > [Tab two 1](#tab-two-1).\nPermalink for > [Tab two 2](#tab-two-2).\nPermalink for > [Tab two 3](#tab-two-3).\n\n{% tabs Tab one %}\n<!-- tab -->\n**This is Tab 1.**\n<!-- endtab -->\n\n<!-- tab -->\n**This is Tab 2.**\n<!-- endtab -->\n\n<!-- tab -->\n**This is Tab 3.**\n<!-- endtab -->\n{% endtabs %}\n\n{% tabs Tab two %}\n<!-- tab -->\n**This is Tab 1.**\n<!-- endtab -->\n\n<!-- tab -->\n**This is Tab 2.**\n<!-- endtab -->\n\n<!-- tab -->\n**This is Tab 3.**\n<!-- endtab -->\n{% endtabs %}\n\n#### Tabs with other tags\n\n```jinja\n{% tabs Tags %}\n<!-- tab -->\n**This is Tab 1.**\n\n1. One\n2. Two\n3. Three\n\nIndented code block:\n\n    nano /etc\n\nTagged code block:\n\n{% code %}\ncode tag\ncode tag\ncode tag\n{% endcode %}\n\n{% note default %}\nNote default tag.\n{% endnote %}\n<!-- endtab -->\n\n<!-- tab -->\n**This is Tab 2.**\n\n* Five\n* Six\n* Seven\n\n{% note primary %}\n{% youtube Kt7u5kr_P5o %}\n{% endnote %}\n<!-- endtab -->\n\n<!-- tab -->\n**This is Tab 3.**\n\n{% subtabs Sub Tabs %}\n<!-- tab -->\n**This is Sub Tab 1.**\n{% note success %}\nLorem ipsum dolor sit amet, consectetuer adipiscing elit. Phasellus hendrerit. Pellentesque aliquet nibh nec urna. In nisi neque, aliquet vel, dapibus id, mattis vel, nisi. Sed pretium, ligula sollicitudin laoreet viverra, tortor libero sodales leo, eget blandit nunc tortor eu nibh. Nullam mollis. Ut justo. Suspendisse potenti. Pellentesque fermentum dolor. Aliquam quam lectus, facilisis auctor, ultrices ut, elementum vulputate, nunc.\n\n{% note warning %}\nSed egestas, ante et vulputate volutpat, eros pede semper est, vitae luctus metus libero eu augue. Morbi purus libero, faucibus adipiscing, commodo quis, gravida id, est. Sed lectus. Praesent elementum hendrerit tortor. Sed semper lorem at felis. Vestibulum volutpat, lacus a ultrices sagittis, mi neque euismod dui, eu pulvinar nunc sapien ornare nisl. Phasellus pede arcu, dapibus eu, fermentum et, dapibus sed, urna.\n{% endnote %}\n\nMorbi interdum mollis sapien. Sed ac risus. Phasellus lacinia, magna a ullamcorper laoreet, lectus arcu pulvinar risus, vitae facilisis libero dolor a purus. Sed vel lacus. Mauris nibh felis, adipiscing varius, adipiscing in, lacinia vel, tellus. Suspendisse ac urna. Etiam pellentesque mauris ut lectus. Nunc tellus ante, mattis eget, gravida vitae, ultricies ac, leo. Integer leo pede, ornare a, lacinia eu, vulputate vel, nisl.\n{% endnote %}\n<!-- endtab -->\n\n<!-- tab -->\n**This is Sub Tab 2.**\n{% note success %}\nLorem ipsum dolor sit amet, consectetuer adipiscing elit. Phasellus hendrerit. Pellentesque aliquet nibh nec urna. In nisi neque, aliquet vel, dapibus id, mattis vel, nisi. Sed pretium, ligula sollicitudin laoreet viverra, tortor libero sodales leo, eget blandit nunc tortor eu nibh. Nullam mollis. Ut justo. Suspendisse potenti. Pellentesque fermentum dolor. Aliquam quam lectus, facilisis auctor, ultrices ut, elementum vulputate, nunc.\n\nSed egestas, ante et vulputate volutpat, eros pede semper est, vitae luctus metus libero eu augue. Morbi purus libero, faucibus adipiscing, commodo quis, gravida id, est. Sed lectus. Praesent elementum hendrerit tortor. Sed semper lorem at felis. Vestibulum volutpat, lacus a ultrices sagittis, mi neque euismod dui, eu pulvinar nunc sapien ornare nisl. Phasellus pede arcu, dapibus eu, fermentum et, dapibus sed, urna.\n\n{% note danger %}\nMorbi interdum mollis sapien. Sed ac risus. Phasellus lacinia, magna a ullamcorper laoreet, lectus arcu pulvinar risus, vitae facilisis libero dolor a purus. Sed vel lacus. Mauris nibh felis, adipiscing varius, adipiscing in, lacinia vel, tellus. Suspendisse ac urna. Etiam pellentesque mauris ut lectus. Nunc tellus ante, mattis eget, gravida vitae, ultricies ac, leo. Integer leo pede, ornare a, lacinia eu, vulputate vel, nisl.\n{% endnote %}\n{% endnote %}\n<!-- endtab -->\n\n<!-- tab -->\n**This is Sub Tab 3.**\n\n{% subtabs Sub-Sub Tabs %}\n<!-- tab -->\n**This is Sub-Sub Tab 1 of Sub Tab 3.**\n{% note success %}\nLorem ipsum dolor sit amet, consectetuer adipiscing elit. Phasellus hendrerit. Pellentesque aliquet nibh nec urna. In nisi neque, aliquet vel, dapibus id, mattis vel, nisi. Sed pretium, ligula sollicitudin laoreet viverra, tortor libero sodales leo, eget blandit nunc tortor eu nibh. Nullam mollis. Ut justo. Suspendisse potenti. Pellentesque fermentum dolor. Aliquam quam lectus, facilisis auctor, ultrices ut, elementum vulputate, nunc.\n\nSed egestas, ante et vulputate volutpat, eros pede semper est, vitae luctus metus libero eu augue. Morbi purus libero, faucibus adipiscing, commodo quis, gravida id, est. Sed lectus. Praesent elementum hendrerit tortor. Sed semper lorem at felis. Vestibulum volutpat, lacus a ultrices sagittis, mi neque euismod dui, eu pulvinar nunc sapien ornare nisl. Phasellus pede arcu, dapibus eu, fermentum et, dapibus sed, urna.\n\nMorbi interdum mollis sapien. Sed ac risus. Phasellus lacinia, magna a ullamcorper laoreet, lectus arcu pulvinar risus, vitae facilisis libero dolor a purus. Sed vel lacus. Mauris nibh felis, adipiscing varius, adipiscing in, lacinia vel, tellus. Suspendisse ac urna. Etiam pellentesque mauris ut lectus. Nunc tellus ante, mattis eget, gravida vitae, ultricies ac, leo. Integer leo pede, ornare a, lacinia eu, vulputate vel, nisl.\n{% endnote %}\n<!-- endtab -->\n\n<!-- tab -->\n**This is Sub-Sub Tab 2 of Sub Tab 3.**\n{% note success %}\nLorem ipsum dolor sit amet, consectetuer adipiscing elit. Phasellus hendrerit. Pellentesque aliquet nibh nec urna. In nisi neque, aliquet vel, dapibus id, mattis vel, nisi. Sed pretium, ligula sollicitudin laoreet viverra, tortor libero sodales leo, eget blandit nunc tortor eu nibh. Nullam mollis. Ut justo. Suspendisse potenti. Pellentesque fermentum dolor. Aliquam quam lectus, facilisis auctor, ultrices ut, elementum vulputate, nunc.\n\n{% note warning %}\nSed egestas, ante et vulputate volutpat, eros pede semper est, vitae luctus metus libero eu augue. Morbi purus libero, faucibus adipiscing, commodo quis, gravida id, est. Sed lectus. Praesent elementum hendrerit tortor. Sed semper lorem at felis. Vestibulum volutpat, lacus a ultrices sagittis, mi neque euismod dui, eu pulvinar nunc sapien ornare nisl. Phasellus pede arcu, dapibus eu, fermentum et, dapibus sed, urna.\n\nMorbi interdum mollis sapien. Sed ac risus. Phasellus lacinia, magna a ullamcorper laoreet, lectus arcu pulvinar risus, vitae facilisis libero dolor a purus. Sed vel lacus. Mauris nibh felis, adipiscing varius, adipiscing in, lacinia vel, tellus. Suspendisse ac urna. Etiam pellentesque mauris ut lectus. Nunc tellus ante, mattis eget, gravida vitae, ultricies ac, leo. Integer leo pede, ornare a, lacinia eu, vulputate vel, nisl.\n{% endnote %}\n\n{% endnote %}\n<!-- endtab -->\n\n<!-- tab -->\n**This is Sub-Sub Tab 3 of Sub Tab 3.**\n\n{% note success %}\nLorem ipsum dolor sit amet, consectetuer adipiscing elit. Phasellus hendrerit. Pellentesque aliquet nibh nec urna. In nisi neque, aliquet vel, dapibus id, mattis vel, nisi. Sed pretium, ligula sollicitudin laoreet viverra, tortor libero sodales leo, eget blandit nunc tortor eu nibh. Nullam mollis. Ut justo. Suspendisse potenti. Pellentesque fermentum dolor. Aliquam quam lectus, facilisis auctor, ultrices ut, elementum vulputate, nunc.\n\n{% note warning %}\nSed egestas, ante et vulputate volutpat, eros pede semper est, vitae luctus metus libero eu augue. Morbi purus libero, faucibus adipiscing, commodo quis, gravida id, est. Sed lectus. Praesent elementum hendrerit tortor. Sed semper lorem at felis. Vestibulum volutpat, lacus a ultrices sagittis, mi neque euismod dui, eu pulvinar nunc sapien ornare nisl. Phasellus pede arcu, dapibus eu, fermentum et, dapibus sed, urna.\n\n{% note danger %}\nMorbi interdum mollis sapien. Sed ac risus. Phasellus lacinia, magna a ullamcorper laoreet, lectus arcu pulvinar risus, vitae facilisis libero dolor a purus. Sed vel lacus. Mauris nibh felis, adipiscing varius, adipiscing in, lacinia vel, tellus. Suspendisse ac urna. Etiam pellentesque mauris ut lectus. Nunc tellus ante, mattis eget, gravida vitae, ultricies ac, leo. Integer leo pede, ornare a, lacinia eu, vulputate vel, nisl.\n{% endnote %}\n\n{% endnote %}\n\n{% endnote %}\n<!-- endtab -->\n{% endsubtabs %}\n\n<!-- endtab -->\n{% endsubtabs %}\n\n<!-- endtab -->\n{% endtabs %}\n```\n\n{% tabs Tags %}\n<!-- tab -->\n**This is Tab 1.**\n\n1. One\n2. Two\n3. Three\n\nIndented code block:\n\n    nano /etc\n\nTagged code block:\n\n```\ncode tag\ncode tag\ncode tag\n```\n\n{% note default %}\nNote default tag.\n{% endnote %}\n<!-- endtab -->\n\n<!-- tab -->\n**This is Tab 2.**\n\n- Five\n- Six\n- Seven\n\n{% note primary %}\n{% youtube Kt7u5kr_P5o %}\n{% endnote %}\n<!-- endtab -->\n\n<!-- tab -->\n**This is Tab 3.**\n\n{% subtabs Sub Tabs %}\n<!-- tab -->\n**This is Sub Tab 1.**\n{% note success %}\nLorem ipsum dolor sit amet, consectetuer adipiscing elit. Phasellus hendrerit. Pellentesque aliquet nibh nec urna. In nisi neque, aliquet vel, dapibus id, mattis vel, nisi. Sed pretium, ligula sollicitudin laoreet viverra, tortor libero sodales leo, eget blandit nunc tortor eu nibh. Nullam mollis. Ut justo. Suspendisse potenti. Pellentesque fermentum dolor. Aliquam quam lectus, facilisis auctor, ultrices ut, elementum vulputate, nunc.\n\n{% note warning %}\nSed egestas, ante et vulputate volutpat, eros pede semper est, vitae luctus metus libero eu augue. Morbi purus libero, faucibus adipiscing, commodo quis, gravida id, est. Sed lectus. Praesent elementum hendrerit tortor. Sed semper lorem at felis. Vestibulum volutpat, lacus a ultrices sagittis, mi neque euismod dui, eu pulvinar nunc sapien ornare nisl. Phasellus pede arcu, dapibus eu, fermentum et, dapibus sed, urna.\n{% endnote %}\n\nMorbi interdum mollis sapien. Sed ac risus. Phasellus lacinia, magna a ullamcorper laoreet, lectus arcu pulvinar risus, vitae facilisis libero dolor a purus. Sed vel lacus. Mauris nibh felis, adipiscing varius, adipiscing in, lacinia vel, tellus. Suspendisse ac urna. Etiam pellentesque mauris ut lectus. Nunc tellus ante, mattis eget, gravida vitae, ultricies ac, leo. Integer leo pede, ornare a, lacinia eu, vulputate vel, nisl.\n{% endnote %}\n<!-- endtab -->\n\n<!-- tab -->\n**This is Sub Tab 2.**\n{% note success %}\nLorem ipsum dolor sit amet, consectetuer adipiscing elit. Phasellus hendrerit. Pellentesque aliquet nibh nec urna. In nisi neque, aliquet vel, dapibus id, mattis vel, nisi. Sed pretium, ligula sollicitudin laoreet viverra, tortor libero sodales leo, eget blandit nunc tortor eu nibh. Nullam mollis. Ut justo. Suspendisse potenti. Pellentesque fermentum dolor. Aliquam quam lectus, facilisis auctor, ultrices ut, elementum vulputate, nunc.\n\nSed egestas, ante et vulputate volutpat, eros pede semper est, vitae luctus metus libero eu augue. Morbi purus libero, faucibus adipiscing, commodo quis, gravida id, est. Sed lectus. Praesent elementum hendrerit tortor. Sed semper lorem at felis. Vestibulum volutpat, lacus a ultrices sagittis, mi neque euismod dui, eu pulvinar nunc sapien ornare nisl. Phasellus pede arcu, dapibus eu, fermentum et, dapibus sed, urna.\n\n{% note danger %}\nMorbi interdum mollis sapien. Sed ac risus. Phasellus lacinia, magna a ullamcorper laoreet, lectus arcu pulvinar risus, vitae facilisis libero dolor a purus. Sed vel lacus. Mauris nibh felis, adipiscing varius, adipiscing in, lacinia vel, tellus. Suspendisse ac urna. Etiam pellentesque mauris ut lectus. Nunc tellus ante, mattis eget, gravida vitae, ultricies ac, leo. Integer leo pede, ornare a, lacinia eu, vulputate vel, nisl.\n{% endnote %}\n{% endnote %}\n<!-- endtab -->\n\n<!-- tab -->\n**This is Sub Tab 3.**\n\n{% subtabs Sub-Sub Tabs %}\n<!-- tab -->\n**This is Sub-Sub Tab 1 of Sub Tab 3.**\n{% note success %}\nLorem ipsum dolor sit amet, consectetuer adipiscing elit. Phasellus hendrerit. Pellentesque aliquet nibh nec urna. In nisi neque, aliquet vel, dapibus id, mattis vel, nisi. Sed pretium, ligula sollicitudin laoreet viverra, tortor libero sodales leo, eget blandit nunc tortor eu nibh. Nullam mollis. Ut justo. Suspendisse potenti. Pellentesque fermentum dolor. Aliquam quam lectus, facilisis auctor, ultrices ut, elementum vulputate, nunc.\n\nSed egestas, ante et vulputate volutpat, eros pede semper est, vitae luctus metus libero eu augue. Morbi purus libero, faucibus adipiscing, commodo quis, gravida id, est. Sed lectus. Praesent elementum hendrerit tortor. Sed semper lorem at felis. Vestibulum volutpat, lacus a ultrices sagittis, mi neque euismod dui, eu pulvinar nunc sapien ornare nisl. Phasellus pede arcu, dapibus eu, fermentum et, dapibus sed, urna.\n\nMorbi interdum mollis sapien. Sed ac risus. Phasellus lacinia, magna a ullamcorper laoreet, lectus arcu pulvinar risus, vitae facilisis libero dolor a purus. Sed vel lacus. Mauris nibh felis, adipiscing varius, adipiscing in, lacinia vel, tellus. Suspendisse ac urna. Etiam pellentesque mauris ut lectus. Nunc tellus ante, mattis eget, gravida vitae, ultricies ac, leo. Integer leo pede, ornare a, lacinia eu, vulputate vel, nisl.\n{% endnote %}\n<!-- endtab -->\n\n<!-- tab -->\n**This is Sub-Sub Tab 2 of Sub Tab 3.**\n{% note success %}\nLorem ipsum dolor sit amet, consectetuer adipiscing elit. Phasellus hendrerit. Pellentesque aliquet nibh nec urna. In nisi neque, aliquet vel, dapibus id, mattis vel, nisi. Sed pretium, ligula sollicitudin laoreet viverra, tortor libero sodales leo, eget blandit nunc tortor eu nibh. Nullam mollis. Ut justo. Suspendisse potenti. Pellentesque fermentum dolor. Aliquam quam lectus, facilisis auctor, ultrices ut, elementum vulputate, nunc.\n\n{% note warning %}\nSed egestas, ante et vulputate volutpat, eros pede semper est, vitae luctus metus libero eu augue. Morbi purus libero, faucibus adipiscing, commodo quis, gravida id, est. Sed lectus. Praesent elementum hendrerit tortor. Sed semper lorem at felis. Vestibulum volutpat, lacus a ultrices sagittis, mi neque euismod dui, eu pulvinar nunc sapien ornare nisl. Phasellus pede arcu, dapibus eu, fermentum et, dapibus sed, urna.\n\nMorbi interdum mollis sapien. Sed ac risus. Phasellus lacinia, magna a ullamcorper laoreet, lectus arcu pulvinar risus, vitae facilisis libero dolor a purus. Sed vel lacus. Mauris nibh felis, adipiscing varius, adipiscing in, lacinia vel, tellus. Suspendisse ac urna. Etiam pellentesque mauris ut lectus. Nunc tellus ante, mattis eget, gravida vitae, ultricies ac, leo. Integer leo pede, ornare a, lacinia eu, vulputate vel, nisl.\n{% endnote %}\n\n{% endnote %}\n<!-- endtab -->\n\n<!-- tab -->\n**This is Sub-Sub Tab 3 of Sub Tab 3.**\n\n{% note success %}\nLorem ipsum dolor sit amet, consectetuer adipiscing elit. Phasellus hendrerit. Pellentesque aliquet nibh nec urna. In nisi neque, aliquet vel, dapibus id, mattis vel, nisi. Sed pretium, ligula sollicitudin laoreet viverra, tortor libero sodales leo, eget blandit nunc tortor eu nibh. Nullam mollis. Ut justo. Suspendisse potenti. Pellentesque fermentum dolor. Aliquam quam lectus, facilisis auctor, ultrices ut, elementum vulputate, nunc.\n\n{% note warning %}\nSed egestas, ante et vulputate volutpat, eros pede semper est, vitae luctus metus libero eu augue. Morbi purus libero, faucibus adipiscing, commodo quis, gravida id, est. Sed lectus. Praesent elementum hendrerit tortor. Sed semper lorem at felis. Vestibulum volutpat, lacus a ultrices sagittis, mi neque euismod dui, eu pulvinar nunc sapien ornare nisl. Phasellus pede arcu, dapibus eu, fermentum et, dapibus sed, urna.\n\n{% note danger %}\nMorbi interdum mollis sapien. Sed ac risus. Phasellus lacinia, magna a ullamcorper laoreet, lectus arcu pulvinar risus, vitae facilisis libero dolor a purus. Sed vel lacus. Mauris nibh felis, adipiscing varius, adipiscing in, lacinia vel, tellus. Suspendisse ac urna. Etiam pellentesque mauris ut lectus. Nunc tellus ante, mattis eget, gravida vitae, ultricies ac, leo. Integer leo pede, ornare a, lacinia eu, vulputate vel, nisl.\n{% endnote %}\n\n{% endnote %}\n\n{% endnote %}\n<!-- endtab -->\n{% endsubtabs %}\n\n<!-- endtab -->\n{% endsubtabs %}\n\n<!-- endtab -->\n{% endtabs %}\n"},{"title":"Custom Pages","url":"/docs/theme-settings/custom-pages.html","content":"\n### Custom Page Support\n\nNext allows users to add custom pages in menu.\n\n{% tabs adding-custom-page %}\n<!-- tab Adding New Page → -->\nChange to {% label info@site root directory %} in your terminal. Use `hexo new page custom-name` to create a new `custom-name` page:\n\n```bash\n$ cd hexo-site\n$ hexo new page custom-name\n```\n<!-- endtab -->\n\n<!-- tab Setting Front-matter Values → -->\nFront-matter is a block of YAML or JSON at the beginning of the file that is used to configure settings for your writings. Settings front-matter values and more detailed can be found in [front-matter](https://hexo.io/docs/front-matter). You can also add contents in `custom-name/index.md` if you like.\n\n```md\ntitle: custom-name\ndate: 2014-12-22 12:39:04\n---\n```\n<!-- endtab -->\n\n<!-- tab Editting Menu -->\nAdd `custom-name` to `menu` by editing {% label primary@theme config file %}, like adding `about` page:\n\n```yml next/_config.yml\nmenu:\n  home: / || fa fa-home\n  archives: /archives/ || fa fa-archive\n  about: /about/ || fa fa-user\n```\n<!-- endtab -->\n{% endtabs %}\n\nIf you want to add Tags or Categories page, please continue reading.\nPlease read [Hexo's Docs of Categories & Tags](https://hexo.io/docs/front-matter#Categories-amp-Tags) to know how to add tags or categories for articles.\nFollowing code shows you a example of article with tags:\n\n{% tabs tags-variants %}\n<!-- tab Variant 1 -->\n```md\ntitle: Tags Testing Article\ntags: [Testing, Another Tag]\n---\n```\n<!-- endtab -->\n\n<!-- tab Variant 2 -->\n```md\ntitle: Tags Testing Article\ntags:\n  - Testing\n  - Another Tag\n---\n```\n<!-- endtab -->\n{% endtabs %}\n\n### Use Archive Page as Home Page\n\nYou can configure the path of archive and index generator in {% label info@site config file %}, e.g.\n\n```yml hexo/_config.yml\narchive_dir: /\n\nindex_generator:\n  path: archives\n  per_page: 10\n  order_by: -date\n```\n\n### Adding «Tags» Page\n\nAdding «Tags» page and show «Tags» link in menu. «Tags» page will show all tags of site. If no article has tags, this page will leave blank.\n\n{% tabs adding-tags-page %}\n<!-- tab Adding New Page → -->\nChange to {% label info@site root directory %} in your terminal. Use `hexo new page tags` to create a new `tags` page:\n\n```bash\n$ cd hexo-site\n$ hexo new page tags\n```\n<!-- endtab -->\n\n<!-- tab Setting Page Type → -->\nEdit the new page and change the type to `tags`, theme will show tags cloud automatically in this page. Page content looks like following:\n\n```md\ntitle: Tags\ndate: 2014-12-22 12:39:04\ntype: tags\n---\n```\n<!-- endtab -->\n\n<!-- tab Editting Menu -->\nAdd `tags` to `menu` by editing {% label primary@theme config file %}, like following:\n\n```yml next/_config.yml\nmenu:\n  home: / || fa fa-home\n  archives: /archives/ || fa fa-archive\n  tags: /tags/ || fa fa-tags\n```\n<!-- endtab -->\n{% endtabs %}\n\n{% note warning %}\nIf you enable any comment system for your site, comments will be shown for all posts and pages.\nSee [«How to Disable Comments on Page»](/docs/third-party-services/comments.html#How-to-Disable-Comments-on-Page) if you want to do it for pages like `tags` or `categories`.\n{% endnote %}\n\n#### Tagcloud\n\nBy default, NexT has setted font color and size for tagcloud in tags page.\nFrom NexT v7.0.2 you can customize them, just set related values in {% label primary@theme config file %}:\n\n```yml next/_config.yml\n# TagCloud settings for tags page.\ntagcloud:\n  min: 12 # Minimum font size in px\n  max: 30 # Maximum font size in px\n  amount: 200 # Total amount of tags\n  orderby: name # Order of tags\n  order: 1 # Sort order\n```\n\n### Adding «Categories» Page\n\n{% note default %}\n«Categories» page can be added in similar way as [«Tags» page](#Adding-%C2%ABTags%C2%BB-Page), only name there is difference: just need to replace `tags` with `categories`.\n{% endnote %}\n\n### Adding Google Calendar Page\n\nMind that you need to make sure first you are adding a calendar that is set to public. If you are unsure, please [follow these instructions first to set a Google calendar public](https://docs.simplecalendar.io/make-google-calendar-public/) before adding it.\n\nMore detailed documentation on creating & managing a public Google calendar: https://support.google.com/calendar/answer/37083\n\n{% tabs calendar %}\n<!-- tab Setting Google Calendar → -->\n\n{% subtabs calendar1 %}\n<!-- tab Get Calendar ID and API KEY → -->\n[Follow these instructions](https://docs.simplecalendar.io/find-google-calendar-id/) to find your Google Calendar ID.\n\nLogin to [Google developers](https://console.cloud.google.com/flows/enableapi?apiid=calendar) and add Google Calendar API, you will get your API KEY on the [credentials page](https://console.cloud.google.com/apis/credentials).\n<!-- endtab -->\n<!-- tab NexT Config -->\nYou can enable it by setting values in `calendar` part. Copy the value of Calendar ID and API KEY in {% label primary@theme config file %}.\n\n```yml next/_config.yml\ncalendar:\n  calendar_id: <required>\n  api_key: <required>\n  orderBy: startTime\n  showLocation: false\n  offsetMax: 72\n  offsetMin: 4\n  showDeleted: false\n  singleEvents: true\n  maxResults: 250\n```\n<!-- endtab -->\n{% endsubtabs %}\n\n<!-- endtab -->\n\n<!-- tab Adding Schedule Page → -->\nChange to {% label info@site root directory %} in your terminal. Use `hexo new page schedule` to create a new `schedule` page:\n\n```bash\n$ cd hexo-site\n$ hexo new page schedule\n```\n<!-- endtab -->\n\n<!-- tab Setting Page Type → -->\nEdit the new page and change the type to `schedule`, theme will show schedule automatically in this page. Page content looks like following:\n\n```md\ntitle: Schedule\ndate: 2014-12-22 12:39:04\ntype: schedule\n---\n```\n<!-- endtab -->\n\n<!-- tab Editting Menu -->\nAdd `schedule` to `menu` by editing {% label primary@theme config file %}:\n\n```yml next/_config.yml\nmenu:\n  home: / || fa fa-home\n  archives: /archives/ || fa fa-archive\n  schedule: /schedule/ || fa fa-calendar\n```\n<!-- endtab -->\n{% endtabs %}\n\n### Custom 404 Page\n\nIn your terminal, change to the `source` folder of {% label info@site root directory %}. Create a new folder called `404`, then create a new page in it:\n\n```bash\n$ cd hexo-site\n$ hexo new page 404\n```\n\nMake sure `relative_link` is disabled in {% label info@site config file %}:\n\n```yml hexo/_config.yml\nrelative_link: false\n```\n\n{% note warning %}\nWhether users can be redirected to the 404 page depends on the settings of the website hosting service or web server, not Hexo. For example, if you use Nginx as the server, you also need to configure the 404 page in `nginx.conf` file.\n{% endnote %}\n\n#### Commonweal 404\n\nIf you would like to enable `commonweal 404` (A service provided by Tencent in China), Edit `404/index.md` like this:\n\n```md\n---\ntitle: '404'\ndate: 2014-12-22 12:39:04\ncomments: false\n---\n<script src=\"//qzonestyle.gtimg.cn/qzone/hybrid/app/404/search_children.js\"\n        charset=\"utf-8\" homePageUrl=\"/\" homePageName=\"Back to home\">\n</script>\n```\n\nYou can also add any content you want to it.\n\nAdd `404` to `menu` by editing {% label primary@theme config file %}:\n\n```yml next/_config.yml\nmenu:\n  home: / || fa fa-home\n  archives: /archives/ || fa fa-archive\n  commonweal: /404/ || fa fa-heartbeat\n```\n"},{"title":"Theme Settings","url":"/docs/theme-settings/index.html","content":"\nOne of the guiding principles of NexT is to hide complex details and give you a simple but flexible config, so you can use it easily.\n\n{% note info %}\nThe values given in the document are often typical allowable values rather than default values. They may be different from those in {% label primary@theme config file %}.\n{% endnote %}\n\n### NexT Quick Start\n\n#### Cache Support\n\nNexT v6+ allows to cache content generation. Set the value `enable` to `true` in `cache` section in {% label primary@theme config file %} as following:\n\n```yml next/_config.yml\n# Allow to cache content generation.\ncache:\n  enable: true\n```\n\n#### Minify Support\n\nNexT allows to minify Hexo generation. Set the value `minify` to `true` in {% label primary@theme config file %} as following:\n\n```yml next/_config.yml\n# Remove unnecessary files after hexo generate.\nminify: true\n```\n\n#### Choosing Scheme\n\nScheme is a feature supported by NexT, by using Scheme NexT gives you different views. And nearly all config can be used by those Schemes. Till now NexT supports 4 schemes, and they are:\n\n* **`Muse`** → Default Scheme, this is the initial version of NexT. Uses black-white tone and mainly looks cleanly.\n* `Mist` → A tighter version of Muse with a tidy single-column view.\n* `Pisces` → Double-column Scheme, fresh like your neighbor's daughter.\n* `Gemini` → Looks like Pisces, but have distinct column blocks with shadow to appear more sensitive to view.\n\nYou can change Scheme by editing {% label primary@theme config file %}, searching `scheme` keyword. You'll see 4 lines of scheme settings and can enable one of them by removing it's `#` and added `#` to previous.\n\n```yml next/_config.yml\n#scheme: Muse\n#scheme: Mist\n#scheme: Pisces\nscheme: Gemini\n```\n\n#### Dark Mode\n\n{% darkmode_preview %}\n\nYou can enable Dark Mode by setting `darkmode` to `true` in {% label primary@theme config file %}.\n\n```yml next/_config.yml\ndarkmode: true\n```\n\nThe `prefers-color-scheme` CSS media feature is used to bring Dark Mode to all 4 schemes above, make sure your browser supports it.\n\n{% caniuse prefers-color-scheme @ current,past_1,past_2,past_3,past_4,past_5 %}\n\nTheme NexT automatically shows Dark Mode if the OS prefered theme is dark. It's supported by macOS Mojave, iOS 13 and Android 10 or later. Relevant docs:\n[How to use Dark Mode on your Mac](https://support.apple.com/en-us/HT208976)\n[Use Dark Mode on your iPhone, iPad, or iPod touch](https://support.apple.com/en-us/HT210332)\n[Dark theme | Android Developers](https://developer.android.com/guide/topics/ui/look-and-feel/darktheme)\n\n#### Configuring Favicon\n\nBy default the Hexo site use NexT favicons in `hexo-site/themes/next/source/images/` directory with different size for different device. You can replace them with your own favicons.\n\nFor example, you can put your favicons in `hexo-site/source/images/` directory. Then you need to rename them and change the settings in `favicon` section in {% label primary@theme config file %}, otherwise icons from Next will rewrite your custom icons in Hexo.\n\nYou can also put custom favicons into `hexo-site/source/` directory. In this way, you **must remove** `/images` prefix from paths.\n\nTo generate custom favicons, you can visit [Favicon Generator](https://realfavicongenerator.net).\n\n```yml hexo/_config.yml\nfavicon:\n  small: /images/favicon-16x16-next.png\n  medium: /images/favicon-32x32-next.png\n  apple_touch_icon: /images/apple-touch-icon-next.png\n  safari_pinned_tab: /images/logo.svg\n  android_manifest: /images/manifest.json\n```\n\n#### Custom Logo Support\n\nNexT supports the site logo personalization.\n\nYou can enable it by adding images's url to `custom_logo` in {% label primary@theme config file %}.\n\n```yml next/_config.yml\ncustom_logo: /uploads/custom-logo.jpg\n```\n\n{% note danger %}\nScheme Mist does not support custom logo setting.\n{% endnote %}\n\n#### Creative Commons\n\nNexT supports the display of [Creative Commons 4.0 International License](https://creativecommons.org/) in sidebar and post including `by`, `by-nc`, `by-nc-nd`, `by-nc-sa`, `by-nd`, `by-sa` and `cc-zero`. These licenses allow creators to communicate which rights they reserve, and which rights they waive for the benefit of recipients or other creators.\n\nYou can configure it by editing values in `creative_commons` section in {% label primary@theme config file %}, for example:\n\n```yml next/_config.yml\ncreative_commons:\n  # Available values: by | by-nc | by-nc-nd | by-nc-sa | by-nd | by-sa | cc-zero\n  license: by-nc-sa\n  # Available values: big | small\n  size: small\n  sidebar: true\n  post: true\n  language: deed.zh\n```\n\n{% note info %}\nYou can set a language value if you prefer a translated version of CC license, e.g. deed.zh\nCC licenses are available in 39 languages, you can find the specific and correct abbreviation you need on https://creativecommons.org\n{% endnote %}\n\n#### Configuring Menu Items\n\nMenu settings items have format `Key: /link/ || icon` which contains 3 values:\n\n{% tabs menu-items %}\n<!-- tab <code>Key</code> -->\n`Key` → is the name of menu item (`home`, `archives`, etc.).\nIf translate for this menu will be found in languages, this translate will be loaded; if not, `Key` name will be used.\n{% note danger %}\n`Key` value is case sensitive (e.g. `home` is not same as `Home`).\n{% endnote %}\n<!-- endtab -->\n\n<!-- tab <code>link</code> -->\nValue before `||` delimeter (`/link/`) → is the target link to relative url inside your site.\n<!-- endtab -->\n\n<!-- tab <code>icon</code> -->\nValue after `||` delimeter (`icon`) → is the name of Font Awesome icon.\nNames of that icons can be found in [Font Awesome](https://fontawesome.com) site.\n<!-- endtab -->\n{% endtabs %}\n\nBy default, all menu items are commented out to ensure that you can override them in the [Alternate Theme Config](/docs/getting-started/configuration.html).\nTo customize menu items, edit the following content in {% label primary@theme config file %}:\n\n```yml next/_config.yml\nmenu:\n  home: / || fa fa-home\n  #about: /about/ || fa fa-user\n  #tags: /tags/ || fa fa-tags\n  #categories: /categories/ || fa fa-th\n  archives: /archives/ || fa fa-archive\n  #schedule: /schedule/ || fa fa-calendar\n  #sitemap: /sitemap.xml || fa fa-sitemap\n  #commonweal: /404/ || fa fa-heartbeat\n```\n\n{% note danger %}\nExcept `home` and `archives`, all custom pages under `menu` section need to be created manually. See [«Custom Page Support»](/docs/theme-settings/custom-pages.html).\n\nBesides, [hexo-generator-sitemap](https://github.com/hexojs/hexo-generator-sitemap) plugin is required for `sitemap` support.\n{% endnote %}\n\nDynamic sub-menu within hierarchy structure is also supported. Add your sub-menu items in `menu` section in {% label primary@theme config file %} as following:\n\n```yml next/_config.yml\nmenu:\n  home: / || fa fa-home\n  archives: /archives/ || fa fa-archive\n  Docs:\n    default: /docs/ || fa fa-book\n    Getting Started:\n      default: /getting-started/ || fa fa-flag\n      Installation: /installation.html || fa fa-download\n      Configuration: /configuration.html || fa fa-wrench\n    Third Party Services:\n      default: /third-party-services/ || fa fa-puzzle-piece\n      Math Equations: /math-equations.html || fa fa-square-root-alt\n      Comment Systems: /comments.html || fa fa-comment-alt\n```\n\n{% note danger %}\nA `default` page is required for each sub-menu item.\n{% endnote %}\n\nBy default NexT shows the icons of menu items without badges.\n\n{% tabs menu_settings %}\n<!-- tab <code>icons</code> -->\nYou can configure it by editing values in `menu_settings.icons` section in {% label primary@theme config file %}.\n\n```yml next/_config.yml\nmenu_settings:\n  icons: true\n```\n<!-- endtab -->\n\n<!-- tab <code>badges</code> -->\nSet the value `badges` to `true` to display the count of Posts / Categories / Tags within menu items in `menu_settings` section in {% label primary@theme config file %} as following:\n\n```yml next/_config.yml\nmenu_settings:\n  badges: true\n```\n<!-- endtab -->\n\n{% endtabs %}\n"},{"title":"Footer","url":"/docs/theme-settings/footer.html","content":"\n### Site Footer Setting\n\n#### Site Start Time\n\nBy default NexT shows current year in the footer like `© 2020`. You can configure it to show the time gap like `© 2015 - 2020` by editing values in `since` section in {% label primary@theme config file %}.\n\n```yml next/_config.yml\nfooter:\n  since: 2020\n```\n\n#### Site Footer Icon\n\nBy default NexT shows red `heart` icon {% btn #,, heart %} with animation between year and copyright information in the footer. You can configure it by editing values in `icon` section in {% label primary@theme config file %}.\n\n{% tabs icon %}\n<!-- tab <code>name</code> -->\nThe name of footer icon can be founded in [Font Awesome](https://fontawesome.com) site. `heart` is recommended.\n\n```yml next/_config.yml\nfooter:\n  icon:\n    name: fa fa-user\n```\n\n<!-- endtab -->\n\n<!-- tab <code>animated</code> -->\nSet up animated of footer icon by changing the value of `icon.animated`:\n\n* **`true`** → Icon will be animated.\n* `false` → Icon will not be animated.\n\n```yml next/_config.yml\nfooter:\n  icon:\n    animated: false\n```\n<!-- endtab -->\n\n<!-- tab <code>color</code> -->\nSet up color of footer icon by changing the value of `icon.color`. Please use Hex Code, and red (#ff0000) is recommended for `heart` icon.\n\n```yml next/_config.yml\nfooter:\n  icon:\n    color: \"#808080\"\n```\n\n<!-- endtab -->\n{% endtabs %}\n\n#### Site Copyright Name\n\nBy default NexT shows the name of `author` from {% label info@site config file %}. You can configure it by editing values in `copyright` section in {% label primary@theme config file %}.\n\n```yml next/_config.yml\nfooter:\n  copyright:\n```\n\n{% note warning %}\nThis option will only customize the author name in the footer. The name in the Creative Commons License section at the end of each post is not affected.\n{% endnote %}\n\n#### Site Platform Information\n\nBy default NexT shows Hexo and Theme & scheme information like `Powered by Hexo & NexT.Muse`. You can configure it by editing `powered` section in {% label primary@theme config file %}.\n\n```yml next/_config.yml\nfooter:\n  powered: true\n```\n\n#### Site Beian Information\n\nBeian information is for Chinese users. By default NexT will not show the information of beian. You can configure it by editing values in `beian` section in {% label primary@theme config file %}.\n\n```yml next/_config.yml\nfooter:\n  beian:\n    enable: true\n    icp: 京ICP备 1234567890号-1\n    gongan_id: 1234567890\n    gongan_num: 京公网安备 1234567890号\n    gongan_icon_url: /uploads/beian.png\n```\n"},{"title":"Internationalization","url":"/docs/theme-settings/internationalization.html","content":"\n### Choosing Language\n\nEdit {% label info@site config file %}, set the value of `language` to the language you need. For example, English looks like this:\n\n```yml hexo/_config.yml\nlanguage: en\n```\n\nNexT now supports following languages:\n\n| Language                    | Example               | Code    |\n| --------------------------- | --------------------- | ------- |\n| Arabic                      | عربي                  | `ar`    |\n| Chinese (Simplified)        | 简体中文               | `zh-CN` |\n| Chinese (Traditional)       | 繁體中文               | `zh-TW` |\n| Chinese (Hong Kong)         | 繁體中文-香港           | `zh-HK` |\n| Dutch                       | Niederländisch        | `nl`    |\n| English                     | English               | `en`    |\n| French                      | Français              | `fr`    |\n| German                      | Deutsch               | `de`    |\n| Indonesian                  | Indonesia             | `id`    |\n| Italian                     | Italiano              | `it`    |\n| Japanese                    | 日本語                 | `ja`    |\n| Korean                      | 한국어                 | `ko`    |\n| Persian                     | فارسی                 | `fa`    |\n| Portuguese                  | Português             | `pt`    |\n| Portuguese (Brazilian)      | Português (Brazilian) | `pt-BR` |\n| Russian                     | Русский               | `ru`    |\n| Sinhala                     | සිංහල                  | `si`    |\n| Spanish                     | Español               | `es`    |\n| Turkish                     | Türk                  | `tr`    |\n| Ukrainian                   | Український           | `uk`    |\n| Vietnamese                  | Tiếng Việt            | `vi`    |\n\n{% note primary %}\nThe files in the `language` directory are automatically generated, you do not need to modify them directly. Please submit translations via [Crowdin](https://crowdin.com/project/hexo-theme-next) if you would like to add or improve translation for NexT theme.\n{% endnote %}\n\n### Multilingual Switcher\n\nSet multiple languages in {% label info@site config file %}, e.g.\n\n```yml hexo/_config.yml\nlanguage:\n  - zh-CN\n  - en\n```\n\nThen turn on `language_switcher` in {% label primary@theme config file %}:\n\n```yml next/_config.yml\n# Show multilingual switcher in footer.\nlanguage_switcher: true\n```\n\n### Override Default Translations\n\nIf you would like to customize the default translation, you do not need to modify the translation files in the `languages` directory. You can override all translations using [Data Files](https://hexo.io/docs/data-files).\n\n1. Creat a `languages.yml` in `source/_data`.\n2. Insert following codes: (be careful about the two-space indent)\n\n    ```yml languages.yml\n    # language\n    zh-CN:\n      # items\n      post:\n        copyright:\n          # the translation you perfer\n          author: 本文博主\n    en:\n      menu:\n        schedule: Calendar\n    ```\n\nThis situation is also available for off-list items. For example, Next uses [Theme Inject](/docs/advanced-settings/injects.html) to introduce the commments systems. You can rename the returned value in chinese as followed:\n\n```yml languages.yml\n# language\nzh-CN:\n  # items\n  post:\n    comments:\n      disqus: 评论\n```\n"},{"title":"Post Settings","url":"/docs/theme-settings/posts.html","content":"\n### Preamble Text\n\nIt's a common need to show some part of article in home page and then give a link to full article. NexT gives two ways to control how article is shown in home page. In other words, you can use following ways to show summary of articles and a **Read More** button.\n\n{% tabs preamble %}\n<!-- tab {% label success@Tag more %} -->\nUse `<!-- more -->` in your article to break your article manually, which is recommended by Hexo.\n\n<!-- endtab -->\n\n<!-- tab <code>excerpt_description</code> -->\nIf you have added `description` and set its value to your article summary in [front-matter](https://hexo.io/docs/front-matter), NexT excerpts `description` as preamble text in homepage by default. Without `description`, the full contents would be the preamble text in homepage.\n\nYou can disable it by setting value `excerpt_description` to `false` in {% label primary@theme config file %}.\n\n```yml next/_config.yml\nexcerpt_description: true\n```\n\n<!-- endtab -->\n{% endtabs %}\n\n{% note info %}\nIt is recommended to use `<!-- more -->` (the first way) which can not only control what you want to show better, but also let Hexo's plugins use it easily.\n{% endnote %}\n\n### Post Meta Display\n\nNexT supports post created date, post updated date and post categories display.\n\n{% tabs postmeta %}\n<!-- tab <code>item_text</code> -->\nBy default NexT shows the description text of post meta. You can disable it by setting value `post_meta.item_text` to `false` in {% label primary@theme config file %}.\n\n```yml next/_config.yml\npost_meta:\n  item_text: true\n```\n<!-- endtab -->\n\n<!-- tab <code>created_at</code> -->\nBy default NexT shows the post created date in post meta section and created time in popup. You can disable it by setting value `post_meta.created_at` to `false` in {% label primary@theme config file %}.\n\n```yml next/_config.yml\npost_meta:\n  created_at: true\n```\n<!-- endtab -->\n\n<!-- tab <code>updated_at</code> -->\n\n{% note warning %}\nMake sure you set `use_date_for_updated` and `updated_option` in {% label info@site config file %} correctly, otherwise this option will not take effect. See also [Date / Time format](https://hexo.io/docs/configuration#Date-Time-format).\n{% endnote %}\n\n{% subtabs postmeta1 %}\n<!-- tab <code>enable</code> -->\nBy default NexT shows the post updated date in post meta section and updated time in popup. You can disable it by setting value `post_meta.updated_at.enable` to `false` in {% label primary@theme config file %}.\n\n```yml next/_config.yml\npost_meta:\n  updated_at:\n    enable: true\n```\n<!-- endtab -->\n\n<!-- tab <code>another_day</code> -->\nBy default, if updated/edited date is the same as created date, edited time would be displayed in popup message. You can disable it by setting value `post_meta.updated_at.another_day` to `false` in {% label primary@theme config file %}.\nIn other words:\n\n* If true, show updated date label only if `updated date` is different from `created date` (post edited in another day than was created).\n* And if post was edited in same day as created, edited time will show in popup title under created time label.\n* If false show anyway, but if post edited in same day, show only edited time.\n\n```yml next/_config.yml\npost_meta:\n  updated_at:\n    another_day: true\n```\n<!-- endtab -->\n{% endsubtabs %}\n\n<!-- endtab -->\n\n<!-- tab <code>categories</code> -->\nBy default NexT shows the post categorie in post meta section. You can disable it by setting value `post_meta.categories` to `false` in {% label primary@theme config file %}.\n\n```yml next/_config.yml\npost_meta:\n  categories: true\n```\n<!-- endtab -->\n\n{% endtabs %}\n\n### Post Wordcount\n\n{% tabs wordcount %}\n<!-- tab Installation → -->\nInstall `hexo-word-counter` by executing the following command in {% label info@site root dir %}:\n\n```bash\n$ npm install hexo-word-counter\n$ hexo clean\n```\n<!-- endtab -->\n\n<!-- tab Hexo Config → -->\nActivate this plugin in {% label info@site config file %} by enabled any option:\n\n{% subtabs wordcount1 %}\n<!-- tab <code>symbols</code> -->\nBy default NexT shows the number of post words in post meta section. You can disable it by setting value `symbols_count_time.symbols` to `false` in {% label info@site config file %}.\n\n```yml hexo/_config.yml\nsymbols_count_time:\n  symbols: true\n```\n<!-- endtab -->\n\n<!-- tab <code>time</code> -->\nBy default NexT shows the estimated reading time of post in post meta section. You can disable it by setting value `symbols_count_time.time` to `false` in {% label info@site config file %}.\n\n```yml hexo/_config.yml\nsymbols_count_time:\n  time: true\n```\n<!-- endtab -->\n\n<!-- tab <code>total_symbols</code> -->\nBy default NexT shows the number of all posts words in footer section. You can disable it by setting value `symbols_count_time.total_symbols` to `false` in {% label info@site config file %}.\n\n```yml hexo/_config.yml\nsymbols_count_time:\n  total_symbols: true\n```\n<!-- endtab -->\n\n<!-- tab <code>total_time</code> -->\nBy default NexT shows the estimated reading time of all posts in footer section. You can disable it by setting value `symbols_count_time.total_time` to `false` in {% label info@site config file %}.\n\n```yml hexo/_config.yml\nsymbols_count_time:\n  total_time: true\n```\n<!-- endtab -->\n\n<!-- tab <code>awl</code> -->\n`awl` means the average Word Length (chars count in word). You can check this [here](https://charactercounttool.com/).\n\n```yml next/_config.yml\nsymbols_count_time:\n  awl: 4\n```\n<!-- endtab -->\n\n<!-- tab <code>wpm</code> -->\n`wpm` means the average words per minute. You can check this [here](https://wordcounter.net/).\n\n```yml next/_config.yml\nsymbols_count_time:\n  wpm: 275\n```\n<!-- endtab -->\n\n{% endsubtabs %}\n\n<!-- endtab -->\n\n<!-- tab NexT Config -->\nAfter the plugin enabled, you may adjust options in `symbols_count_time` section in {% label primary@theme config file %}:\n\n{% subtabs wordcount2 %}\n<!-- tab <code>separated_meta</code> -->\nBy default NexT shows the words counts and estimated reading time in a separated line. You can add them into one line by setting value `symbols_count_time.separated_meta` to `false` in {% label primary@theme config file %}.\n\n```yml next/_config.yml\nsymbols_count_time:\n  separated_meta: true\n```\n<!-- endtab -->\n\n<!-- tab <code>item_text_total</code> -->\nBy default NexT doesn't shows the text description of the words counts and estimated reading time in footer section. You can enable it by setting value `symbols_count_time.item_text_total` to `false` in {% label primary@theme config file %}.\n\n```yml next/_config.yml\nsymbols_count_time:\n  item_text_total: true\n```\n<!-- endtab -->\n\n{% endsubtabs %}\n\n<!-- endtab -->\n{% endtabs %}\n\n### Tag Icon\n\nBy default, tags at the bottom of posts have a symbol # at there left side.\n\nIf you prefer icon instead of symbol, edit {% label primary@theme config file %} like following:\n\n```yml next/_config.yml\ntag_icon: true\n```\n\n### Donate Settings\n\nMore and more online blogging platforms (e.g. WeChat public accounts, Jianshu, Zhihu) support donate (sponsor). To catch paid reading trends, we added donate feature, supports WeChat, Alipay and Bitcoin. What you need is:\n\n1. Get your WeChat / Alipay / Bitcoin receive money QRcode image(s) and put into `source/images` under {% label primary@theme directory %} or upload it(them) to an image cloud to get the absolute HTTP address(es).\n2. Set needed values in  {% label primary@theme config file %}:\n\n    ```yml next/_config.yml\n    # Donate (Sponsor) settings\n    # Front-matter variable (nonsupport animation).\n    reward_settings:\n      # If true, a donate button will be displayed in every article by default.\n      enable: true\n      animation: false\n      #comment: Buy me a coffee\n\n    reward:\n      wechatpay: /images/wechatpay.png\n      alipay: /images/alipay.png\n      bitcoin: /images/bitcoin.png\n    ```\n\nYou can also add QRcode of other platforms, e.g.\n\n```yml next/_config.yml\npaypal: /images/paypal.png\nmonero: /images/monero.png\n```\n\n### Follow Me\n\n```yml next/_config.yml\n# Subscribe through Telegram Channel, Twitter, etc.\n# Usage: `Key: permalink || icon` (Font Awesome)\nfollow_me:\n  #Twitter: https://twitter.com/username || fab fa-twitter\n  #Telegram: https://t.me/channel_name || fab fa-telegram\n  #WeChat: /images/wechat_channel.jpg || fab fa-weixin\n  #RSS: /atom.xml || fa fa-rss\n```\n\n### Related Popular Posts\n\nNexT supports the related posts functionality according to [hexo-related-popular-posts](https://github.com/tea3/hexo-related-popular-posts).\n\n{% tabs related_posts %}\n<!-- tab Installation → -->\nInstall `hexo-related-popular-posts` by executing the following command in {% label info@site root dir %}:\n\n```bash\n$ npm install hexo-related-popular-posts\n$ hexo clean\n```\n<!-- endtab -->\n\n<!-- tab <code>enable</code> -->\nYou can enable it by setting value `related_posts.enable` to `true` in {% label primary@theme config file %}.\n\n```yml next/_config.yml\nrelated_posts:\n  enable: true\n```\n<!-- endtab -->\n\n<!-- tab <code>title</code> -->\nBy default NexT uses 'Related Posts' as title by default. You can configure it by editing value in `related_posts.title` section in {% label primary@theme config file %}.\n\n```yml next/_config.yml\nrelated_posts:\n  title:\n```\n<!-- endtab -->\n\n<!-- tab <code>display_in_home</code> -->\nBy default NexT doesn't show the related posts in homepage. You can enable it by setting value `related_posts.display_in_home` to `true` in {% label primary@theme config file %}.\n\n```yml next/_config.yml\nrelated_posts:\n  display_in_home: true\n```\n<!-- endtab -->\n\n<!-- tab <code>params</code> -->\nBy default NexT shows up to 5 related posts and their titles without any date, image and excerpt. You can change the default behavior by editing values of `related_posts.params` in {% label primary@theme config file %}.\n\n{% subtabs related_posts1 %}\n<!-- tab <code>maxCount</code> -->\nMaximum count of a list, change it by yourself.\n\n```yml next/_config.yml\nrelated_posts:\n  params:\n    maxCount: 5\n```\n<!-- endtab -->\n\n<!-- tab <code>PPMixingRate</code> -->\nMixing ratio of popular posts and related posts.\n\n```yml next/_config.yml\nrelated_posts:\n  params:\n    #PPMixingRate: 0.0\n```\n<!-- endtab -->\n\n<!-- tab <code>isDate</code> -->\nUncomment and set true to display dates of related post.\n\n```yml next/_config.yml\nrelated_posts:\n  params:\n    isDate: true\n```\n<!-- endtab -->\n\n<!-- tab <code>isImage</code> -->\nUncomment and set true to display images of related posts.\n\n```yml next/_config.yml\nrelated_posts:\n  params:\n    isImage: true\n```\n<!-- endtab -->\n\n<!-- tab <code>isExcerpt</code> -->\nUncomment and set true to display excerpts of related posts.\n\n```yml next/_config.yml\nrelated_posts:\n  params:\n    isExcerpt: true\n```\n<!-- endtab -->\n\n{% endsubtabs %}\n<!-- endtab -->\n{% endtabs %}\n\n### Post Edit\n\nNexT supports the edit functionality of your posts. By enabling this feature, users can quickly browse and modify the blog's source code on GitHub.\n\n{% tabs post_edit %}\n<!-- tab <code>enable</code> -->\nYou can enable it by setting value `post_edit.enable` to `true` in {% label primary@theme config file %}.\n\n```yml next/_config.yml\npost_edit:\n  enable: true\n```\n<!-- endtab -->\n\n<!-- tab <code>url</code> -->\nYou should create a source repository of your post files. The `url` setting depends on the source project in github.\n\n* For site repository\n  * Link for view source: `url: https://github.com/.../tree/master/source/_posts/`\n  * Link for fork & edit: `url: https://github.com/.../edit/master/source/_posts/`\n* For post repository\n  * Link for view source: `url: https://github.com/.../_posts/tree/master/`\n  * Link for fork & edit: `url: https://github.com/.../_posts/edit/master/`\n\n```yml next/_config.yml\npost_edit:\n  url:\n```\n<!-- endtab -->\n\n{% endtabs %}\n\n### Post Navigation\n\nShow previous post and next post in post footer if exists.\n\n```yml next/_config.yml\npost_navigation: left\n```\n"},{"title":"Misc Theme Settings","url":"/docs/theme-settings/miscellaneous.html","content":"\n### Preconnect\n\nNexT supports adding preconnect resource hints to establish early connections to fonts and plugins origins.\n\nYou can enable it by setting `preconnect: true` in {% label primary@theme config file %}.\n\n```yml next/_config.yml\n# Preconnect CDN for fonts and plugins.\n# For more information: https://www.w3.org/TR/resource-hints/#preconnect\npreconnect: true\n```\n\n### Text Align\n\nNexT allows to customize the text alignment in posts / pages. The `text-align` CSS property sets the horizontal alignment of a block element or table-cell box.\n\n| Values         | Effect                                                                                                                                                                 |\n| -------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| `start`        | The same as `left` if direction is left-to-right and `right` if direction is right-to-left.                                                                            |\n| `end`          | The same as `right` if direction is left-to-right and `left` if direction is right-to-left.                                                                            |\n| `left`         | The inline contents are aligned to the left edge of the line box.                                                                                                      |\n| `right`        | The inline contents are aligned to the right edge of the line box.                                                                                                     |\n| `center`       | The inline contents are centered within the line box.                                                                                                                  |\n| `justify`      | The inline contents are justified. Text should be spaced to line up its left and right edges to the left and right edges of the line box, except for the last line.    |\n| `justify-all`  | Same as `justify`, but also forces the last line to be justified.                                                                                                      |\n| `match-parent` | Similar to `inherit`, but the values `start` and `end` are calculated according to the parent's direction and are replaced by the appropriate `left` or `right` value. |\n\n```yml next/_config.yml\n# Set the text alignment in the posts.\ntext_align:\n  # Available values: start | end | left | right | center | justify | justify-all | match-parent\n  desktop: justify\n  mobile: justify\n```\n\n### Mobile Devices Adaptation\n\nIf you want to reduce padding/margin indents on devices with narrow width, you can enable it by setting value `mobile_layout_economy` to `true` in {% label primary@theme config file %}.\n\n```yml next/_config.yml\nmobile_layout_economy: true\n```\n\n### Theme Color\n\nBy default NexT uses black-deep (`#222`) as the color of browser header panel (it's supported by Safari 15 and Android Chrome). You can configure it by editing values with Hex color in `theme_color` section in {% label primary@theme config file %}.\n\n```yml next/_config.yml\ntheme_color:\n  light: \"#222\"\n  dark: \"#222\"\n```\n### Body Scrollbar\n\n```yml next/_config.yml\n# Override browsers' default behavior.\nbody_scrollbar:\n  # Place the scrollbar over the content.\n  overlay: false\n  # Present the scrollbar even if the content is not overflowing.\n  stable: false\n```\n\n### Codeblock Style\n\n{% tabs codeblock %}\n<!-- tab <code>theme</code> -->\n\nNexT uses the [Highlight.js](https://highlightjs.org) and [Prism](https://prismjs.com) package to support code highlight.\n\n{% note warning %}\nPlease read Hexo's documentation on [Syntax Highlighting](https://hexo.io/docs/syntax-highlight) first, and set it up in {% label info@site config file %}.\n{% endnote %}\n\nYou can preview all available Code Highlight themes here: [NexT Highlight Theme Preview](https://theme-next.js.org/highlight/). Change the value of `theme` and `prism` to choose the highlight style you like.\n\n```yml next/_config.yml\ncodeblock:\n  # Code Highlight theme\n  # All available themes: https://theme-next.js.org/highlight/\n  theme:\n    light: default\n    dark: tomorrow-night\n  prism:\n    light: prism\n    dark: prism-dark\n```\n\nIf Dark Mode is enabled, dark code highlighting themes will be available.\n<!-- endtab -->\n\n<!-- tab <code>copy_button</code> -->\nNexT supports the copy-and-paste functionality of codeblock.\n\n{% subtabs codeblock1 %}\n<!-- tab <code>enable</code> -->\nYou can enable it by setting value `copy_button.enable` to `true` in {% label primary@theme config file %}. By default NexT shows copy result of the copy-and-paste functionality.\n\n```yml next/_config.yml\ncodeblock:\n  copy_button:\n    enable: true\n```\n<!-- endtab -->\n<!-- tab <code>style</code> -->\nWith `style` option, you can change your copy button style.\nThere are three style available currently: `default` (Just leave it empty), `flat` and `mac`.\n\n```yml next/_config.yml\ncodeblock:\n  copy_button:\n    style: flat\n```\n<!-- endtab -->\n{% endsubtabs %}\n\n<!-- endtab -->\n\n{% endtabs %}\n\n### Back To Top\n\n{% tabs b2t %}\n<!-- tab <code>enable</code> -->\n```yml next/_config.yml\nback2top:\n  enable: true\n```\n\nSet the value `back2top.enable` to `true` to display `Back to top` button.\n<!-- endtab -->\n\n<!-- tab <code>sidebar</code> -->\n```yml next/_config.yml\nback2top:\n  # Back to top in sidebar.\n  sidebar: true\n```\n\nSet the value `back2top.sidebar` to `true` to put the button in sidebar.\n<!-- endtab -->\n\n<!-- tab <code>scrollpercent</code> -->\n```yml next/_config.yml\nback2top:\n  # Scroll percent label in b2t button.\n  scrollpercent: true\n```\n\nSet the value `back2top.scrollpercent` to `true` to display scroll percent label in `Back to top` button.\n<!-- endtab -->\n{% endtabs %}\n\n### Reading Progress\n\nNexT supports the page scroll reading progress indicator.\n\nYou can enable it by setting value `reading_progress.enable` to `true` in {% label primary@theme config file %}.\n\n```yml next/_config.yml\nreading_progress:\n  enable: true\n  # Available values: left | right\n  start_at: left\n  # Available values: top | bottom\n  position: top\n  reversed: false\n  color: \"#37c6c0\"\n  height: 2px\n```\n\n### Bookmark\n\nBookmark is a plugin that allow the users save their reading progress. Users could just click the bookmark icon (like 🔖) in left-top of the page to save the scroll position. And when they visit your blog in the next time, they can resume the last scroll position of each page automatically.\n\nYou can enable it by setting value `bookmark.enable` to `true` in {% label primary@theme config file %}.\n\n```yml next/_config.yml\nbookmark:\n  enable: false\n  # Customize the color of the bookmark.\n  color: \"#222\"\n  # If auto, save the reading progress when closing the page or clicking the bookmark-icon.\n  # If manual, only save it by clicking the bookmark-icon.\n  save: auto\n```\n\n### GitHub Banner\n\nNexT provides `Follow me on GitHub` banner in right-top corner.\n\n```yml next/_config.yml\n# Follow me on GitHub banner in right-top corner.\ngithub_banner:\n  enable: true\n  permalink: https://github.com/yourname\n  title: Follow me on GitHub\n```\n\n{% tabs github-banner %}\n<!-- tab <code>permalink</code> -->\n`permalink` → is the specified link must have full url path.\n<!-- endtab -->\n\n<!-- tab <code>title</code> -->\n`title` → is the title and aria-label name.\n<!-- endtab -->\n{% endtabs %}\n\nYou can set `enable` to `true` and add your own GitHub link.\n\n### Fonts Customization\n\nNexT gives you 5 specific font settings, they are:\n\n* Global Font: Font used in the whole site.\n* Title Font: Font used by site title.\n* Headlines Font: Font used by headings in articles (h1, h2, h3, h4, h5, h6).\n* Article Font: Font used by articles.\n* Code Font: Font used by code blocks in articles.\n\nEach font will be used as the first font of this class, NexT will fallback to internal font settings if they are unavalible.\n\n* Non-code Font: Fallback to `\"PingFang SC\", \"Microsoft YaHei\", sans-serif`\n* Code Font: Fallback to `consolas, Menlo, \"PingFang SC\", \"Microsoft YaHei\", monospace`\n\nPlus each section has a `external` attribute, this controls whether to use the font library CDN.\nUse this can help you to use fonts installed in system and reduce unnecessary requests.\n\n{% note info %}\nTo solve the unstable of [Google Fonts API](https://fonts.google.com) in some countries, NexT supports custom URL of fonts library by setting `font.host`.\nIn addition, we noticed that for requests from certain websites, Google Fonts will return 403. At this time, it is necessary to use `font.host` to set up a mirror site.\nRelevant issues: [#613](https://github.com/theme-next/hexo-theme-next/issues/613), [#1333](https://github.com/theme-next/hexo-theme-next/issues/1333)\n{% endnote %}\n\n```yml next/_config.yml\nfont:\n  # Use custom fonts families or not.\n  # Depended options: `external` and `family`.\n  enable: true\n\n  # Uri of fonts host, e.g. https://fonts.googleapis.com (Default).\n  host:\n\n  # Font options:\n  # `external: true` will load this font family from `host` above.\n  # `family: Times New Roman`. Without any quotes.\n  # `size: x.x`. Use `em` as unit. Default: 1 (16px)\n\n  # Global font settings used for all elements inside <body>.\n  global:\n    external: true\n    family: Monda\n    size: 1.125\n\n  # Font settings for site title (.site-title).\n  title:\n    external: true\n    family: Lobster Two\n    size:\n\n  # Font settings for headlines (<h1> to <h6>).\n  headings:\n    external: true\n    family: Amita\n    size:\n\n  # Font settings for posts (.post-body).\n  posts:\n    external: true\n    family: Montserrat\n\n  # Font settings for <code> and code blocks.\n  codes:\n    external: true\n    family: PT Mono\n```\n\nAnd you can apply multiple font families for each option. This is especially useful for those who often writes both Chinese and English.\n\n```yml next/_config.yml\nfont:\n  ...\n  title:\n    external: true\n    family: Roboto Slab, Noto Serif SC\n    size:\n```\n\n{% note info %}\nAccording to the [CSS Fonts Module Level 3](https://www.w3.org/TR/2018/REC-css-fonts-3-20180920/#propdef-font-family) spec:\n> Font family names other than generic families must either be given quoted as strings, or unquoted as a sequence of one or more identifiers.\n\nTo avoid escaping mistakes, quote font family names if necessary.\n{% endnote %}\n\nIf you still need more customization, following change will cover Fonts Customization function. Edit `source/_data/variables.styl` in {% label info@site root directory %} and add two varibles:\n\n```styl hexo/source/_data/variables.styl\n// Title Font, set it to font family you want.\n$font-family-headings = Georgia, sans\n\n// Set it to font family you want.\n$font-family-base = \"Microsoft YaHei\", Verdana, sans-serif\n\n// Code Font.\n$code-font-family = \"Input Mono\", \"PT Mono\", Consolas, Monaco, Menlo, monospace\n\n// Font size of articles.\n$font-size-base = 16px\n\n// Font size of table and code.\n$table-font-size = 13px\n```\n\nThen uncomment `variable` under the `custom_file_path` section in {% label primary@theme config file %}.\n"},{"title":"SEO","url":"/docs/theme-settings/seo.html","content":"\n### SEO Setting\n\nNext provides useful options for better Search Engine Optimization (SEO).\n\n{% note info %}\nBy default a canonical link tag is created in Hexo after you have set up your URL `url: http://example.com` in {% label info@site config file %}. More detailed information can be found in [Consolidate duplicate URLs](https://support.google.com/webmasters/answer/139066).\n{% endnote %}\n\nSet the value of `index_with_subtitle` in {% label primary@theme config file %} to `true` to add `subtitle` information to index page.\n\n```yml next/_config.yml\nindex_with_subtitle: true\n```\n\nYou can set `subtitle` in {% label info@site config file %}.\n\n### Webmaster Tools\n\n#### Google Webmaster Tools\n\nSet the verification string of [Google Webmaster Tools](https://developers.google.com/search) which is used in submitting sitemap.\n\n{% tabs google-webmaster-tools %}\n<!-- tab Get Verification Code → -->\nLogin to Google Webmaster Tools and go to verification methods and choose `HTML Tag`, you will get some code:\n\n```html\n<meta name=\"google-site-verification\" content=\"XXXXXXXXXXXXXXXXXXXXXXX\">\n```\n<!-- endtab -->\n\n<!-- tab NexT Config -->\nCopy `XXXXXXXXXXXXXXXXXXXXXXX` value of `content` key.\nEdit {% label primary@theme config file %} and add or change the value of `google_site_verification`:\n\n```yml next/_config.yml\ngoogle_site_verification: XXXXXXXXXXXXXXXXXXXXXXX\n```\n<!-- endtab -->\n{% endtabs %}\n\n#### Bing Webmaster Tools\n\nSet the verification string of [Bing Webmaster Tools](https://www.bing.com/webmasters) which is used in submitting sitemap.\n\n{% tabs bing-webmaster-tools %}\n<!-- tab Get Verification Code → -->\nLogin to Bing Webmaster Tools and go to verification methods and choose `HTML Tag`, you will get some code:\n\n```html\n<meta name=\"msvalidate.01\" content=\"XXXXXXXXXXXXXXXXXXXXXXX\">\n```\n<!-- endtab -->\n\n<!-- tab NexT Config -->\nCopy `XXXXXXXXXXXXXXXXXXXXXXX` value of `content` key.\nEdit {% label primary@theme config file %} and add or change the value of `bing_site_verification`:\n\n```yml next/_config.yml\nbing_site_verification: XXXXXXXXXXXXXXXXXXXXXXX\n```\n<!-- endtab -->\n{% endtabs %}\n\n#### Yandex Webmaster Tools\n\nSet the verification string of [Yandex Webmaster Tools](https://webmaster.yandex.ru/) which is used in submitting sitemap.\n\n{% tabs yandex-webmaster-tools %}\n<!-- tab Get Verification Code → -->\nLogin to Yandex Webmaster Tools and go to verification methods and choose `Meta Tag`, you will get some code:\n\n```html\n<meta name=\"yandex-verification\" content=\"XXXXXXXXXXXXXXXXXXXXXXX\">\n```\n<!-- endtab -->\n\n<!-- tab NexT Config -->\nCopy `XXXXXXXXXXXXXXXXXXXXXXX` value of `content` key.\nEdit {% label primary@theme config file %} and add or change the value of `yandex_site_verification`:\n\n```yml next/_config.yml\nyandex_site_verification: XXXXXXXXXXXXXXXXXXXXXXX\n```\n<!-- endtab -->\n{% endtabs %}\n\n#### Baidu Webmaster Tools\n\nSet the verification string of [Baidu Webmaster Tools](https://ziyuan.baidu.com/site/) which is used in submitting sitemap.\n\n{% tabs Baidu-webmaster-tools %}\n<!-- tab Get Verification Code → -->\nLogin to Baidu Webmaster Tools and go to verification methods and choose `HTML Tag`, you will get some code:\n\n```html\n<meta name=\"baidu-site-verification\" content=\"code-XXXXXXXXXX\">\n```\n<!-- endtab -->\n\n<!-- tab NexT Config -->\nCopy `code-XXXXXXXXXX` value of `content` key.\nEdit {% label primary@theme config file %} and add or change the value of `baidu_site_verification`:\n\n```yml next/_config.yml\nbaidu_site_verification: code-XXXXXXXXXX\n```\n<!-- endtab -->\n{% endtabs %}\n\n{% note info %}\nBy default Baidu will cache and rewrite your site to provide a webpage snapshot for mobile users. You can disable this by setting the site type.\n\n![Baidu Webmaster Tools](/images/baidu.png)\n{% endnote %}\n"},{"title":"Sidebar Setting","url":"/docs/theme-settings/sidebar.html","content":"\n### Sidebar Style\n\nBy default sidebar only shows in posts (have a table of content), and is placed in left side. You can change it by editing values under `sidebar` setting in {% label primary@theme config file %}.\n\nSidebar has several options, including `position`, `width`, `display`, `padding` and `offset`.\n\n{% tabs setting-sidebar %}\n<!-- tab <code>position</code> -->\nSet up sidebar position by changing the value of `sidebar.position`, which can be one of following:\n\n* **`left`** → Place at the left of the screen.\n* `right` → Place at the right of the screen.\n\n```yml next/_config.yml\nsidebar:\n  position: left\n  #position: right\n```\n\n<!-- endtab -->\n\n<!-- tab <code>width</code> -->\nYou can change sidebar width by specify `sidebar.width` setting in pixels, for example:\n\n```yml next/_config.yml\nsidebar:\n  width: 300\n```\n\n{% note info %}\nThis option is commented out by default and values are:\n\n* For Muse | Mist schemes: `320`\n* For Pisces | Gemini schemes: `240`\n\n{% endnote %}\n<!-- endtab -->\n\n<!-- tab <code>display</code> -->\nSet up conditions under which sidebar will show by editing `sidebar.display` value, which can be one of following:\n\n* **`post`** → Show sidebar only in posts which have index.\n* `always` → Show sidebar in all pages.\n* `hide` → Hide it in all pages (but can be opened by user manually).\n* `remove` → Remove sidebar totally.\n\n```yml next/_config.yml\nsidebar:\n  display: post\n  #display: always\n  #display: hide\n  #display: remove\n```\n<!-- endtab -->\n\n<!-- tab <code>padding</code> -->\nSet up sidebar padding in pixels by changing the value of `sidebar.padding`:\n\n```yml next/_config.yml\nsidebar:\n  padding: 18\n```\n<!-- endtab -->\n\n<!-- tab <code>offset</code> -->\nSet up sidebar offset from top menubar in pixels by changing the value of `sidebar.offset`:\n\n```yml next/_config.yml\nsidebar:\n  offset: 12\n```\n\n{% note danger %}\nFor now only Pisces / Gemini Schemes supports `offset` setting under **6.0.x** version or later.\n{% endnote %}\n<!-- endtab -->\n\n{% endtabs %}\n\n### Configuring Avatar\n\nBy default NexT doesn't show avatar in sidebar. You can configure it by editing values under `avatar` setting in {% label primary@theme config file %}.\n\n{% tabs avatar %}\n<!-- tab <code>url</code> -->\nFor first test you can uncomment `/images/avatar.gif` value near the `avatar.url` setting to see default avatar:\n\n```yml next/_config.yml\navatar:\n  url: /images/avatar.gif\n```\n\nThen you need to specify your own avatar. It can be done one of the ways below:\n\n{% subtabs avatar1 %}\n<!-- tab {% label success@Hexo directory %} -->\nPut your avatar under {% label info@site directory %} `source/uploads/` (create directory if it doesn't exists).\nAnd then change option to `url: /uploads/avatar.png`.\n<!-- endtab -->\n\n<!-- tab NexT directory -->\nPut your avatar under {% label primary@theme directory %} `source/images/`.\nAnd then change option to `url: /images/avatar.png`.\n\n{% note info %}\nCurrent site uses avatar under {% label primary@theme directory %} from file located in `next/source/images/apple-touch-icon-next.png` with following config:\n\n```yml next/_config.yml\navatar:\n  url: /images/apple-touch-icon-next.png\n```\n\n{% endnote %}\n<!-- endtab -->\n\n<!-- tab Absolute URL from Internet -->\nYou can also specify any external URL with absolute path to image: `http(s)://example.com/avatar.png`\n<!-- endtab -->\n{% endsubtabs %}\n<!-- endtab -->\n\n<!-- tab <code>rounded</code> -->\nSet up rounded of avatar by changing the value of `avatar.rounded`:\n\n* `true` → Avatar will be rounded.\n* **`false`** → Avatar will be squared.\n\n```yml next/_config.yml\navatar:\n  rounded: true\n```\n<!-- endtab -->\n\n<!-- tab <code>rotated</code> -->\nSet up rotated of avatar by changing the value of `avatar.rotated`:\n\n* `true` → Avatar will be rotate under the mouse hovering.\n* **`false`** → Avatar will not rotate under the mouse hovering.\n\n```yml next/_config.yml\navatar:\n  rotated: true\n```\n\n<!-- endtab -->\n{% endtabs %}\n\n### Sidebar Site State\n\nBy default NexT shows the categories and counts of Posts / Categories / Tags in sidebar. You can configure it by editing value `site_state` in {% label primary@theme config file %}.\n\n```yml next/_config.yml\nsite_state: true\n```\n\n### Sidebar Social Links\n\n{% note default %}\nSocial Links have similar structure as [Menu Items](/docs/theme-settings/#Configuring-Menu-Items), only target link there is difference: specified link must have full url path (permalink).\n{% endnote %}\n\nEdit the `social` section in {% label primary@theme config file %} as following:\n\n```yml next/_config.yml\nsocial:\n  GitHub: https://github.com/yourname || fab fa-github\n  E-Mail: mailto:yourname@gmail.com || fa fa-envelope\n  Weibo: https://weibo.com/yourname || fab fa-weibo\n  Google: https://plus.google.com/yourname || fab fa-google\n  Twitter: https://twitter.com/yourname || fab fa-twitter\n  FB Page: https://www.facebook.com/yourname || fab fa-facebook\n  StackOverflow: https://stackoverflow.com/yourname || fab fa-stack-overflow\n  YouTube: https://youtube.com/yourname || fab fa-youtube\n  Instagram: https://instagram.com/yourname || fab fa-instagram\n  Skype: skype:yourname?call|chat || fab fa-skype\n```\n\nBy default NexT shows the icons of social links in sidebar.\n\n{% tabs social_icons %}\n<!-- tab <code>enable</code> -->\nYou can configure it by editing value `enable` in `social_icons` section in {% label primary@theme config file %}.\n\n```yml next/_config.yml\nsocial_icons:\n  enable: true\n```\n<!-- endtab -->\n\n<!-- tab <code>icons_only</code> -->\nSet the value `icons_only` to `true` to display social icons without description in `social_icons` section in {% label primary@theme config file %} as following:\n\n```yml next/_config.yml\nsocial_icons:\n  icons_only: true\n```\n<!-- endtab -->\n\n<!-- tab <code>transition</code> -->\nSet the value `transition` to `true` to display social icons with transition effects in `social_icons` section in {% label primary@theme config file %} as following:\n\n```yml next/_config.yml\nsocial_icons:\n  transition: true\n```\n<!-- endtab -->\n\n{% endtabs %}\n\n### Sidebar Blogrolls\n\nYou can add blog rolls within sidebar in NexT.\n\n{% tabs blogrolls %}\n<!-- tab <code>links_settings</code> -->\nBy default NexT shows the `globe` icon {% btn #,, globe %} before `title`. The name of icon can be found in [Font Awesome](https://fontawesome.com) site. You can configure it by editing value `icon` in `links_settings` section in {% label primary@theme config file %}.\n\n```yml next/_config.yml\nlinks_settings:\n  icon: fa fa-globe\n```\n\nBy default NexT uses `Links` as the name of blogroll. You can configure it by editing value `title` in `links_settings` section in {% label primary@theme config file %}.\n\n```yml next/_config.yml\nlinks_settings:\n  title: Links\n```\n\nBy default all blogrolls are displayed in block. You can configure it to `inline` by editing value `layout` in `links_settings` section in {% label primary@theme config file %}.\n\n```yml next/_config.yml\nlinks_settings:\n  layout: block\n```\n<!-- endtab -->\n\n<!-- tab <code>links</code> -->\nEdit the `links` section in {% label primary@theme config file %} and add your favorite links:\n\n```yml next/_config.yml\nlinks:\n  Title1: https://example1.com/\n  Title2: https://example2.com/\n```\n<!-- endtab -->\n\n{% endtabs %}\n\n### Sidebar TOC\n\n{% tabs toc %}\n<!-- tab <code>enable</code> -->\nBy default NexT shows `Table Of Contents (TOC)` in the sidebar. You can disable it by setting `toc.enable` to `false` in {% label primary@theme config file %}.\n\n```yml next/_config.yml\ntoc:\n  enable: true\n```\n<!-- endtab -->\n\n<!-- tab <code>number</code> -->\nBy default NexT adds list number to TOC automatically. You can disable it by setting `toc.number` to `false` in {% label primary@theme config file %}.\n\n```yml next/_config.yml\ntoc:\n  number: true\n```\n<!-- endtab -->\n\n<!-- tab <code>wrap</code> -->\nIf the post header width longer than sidebar width, you can wrap the header words in next lines by setting `toc.wrap` to `true` in {% label primary@theme config file %}.\n\n```yml next/_config.yml\ntoc:\n  wrap: true\n```\n<!-- endtab -->\n\n<!-- tab <code>expand_all</code> -->\nIf you want all level of TOC in a post to be displayed, rather than the activated part of it, you can set `toc.expand_all` to `true` in {% label primary@theme config file %}.\n\n```yml next/_config.yml\ntoc:\n  expand_all: true\n```\n<!-- endtab -->\n\n<!-- tab <code>max_depth</code> -->\nBy default maximum heading depth of generated toc is 6. You can set it by setting `toc.max_depth` to `another number` in {% label primary@theme config file %}.\n\n```yml next/_config.yml\ntoc:\n  max_depth: 3\n```\n<!-- endtab -->\n{% endtabs %}\n"}]